/*! For license information please see ads_initiator.js.LICENSE.txt */
window.adsNinjaInitiator={dataResponse:{configs:null,geo:{country:null,region:null,city:null},gamId:null,isBoosted:0},brandName:null,shortBrandName:null,init:async function(){await this.fetchData(),await this.loadScript(),await this.runInjector()},fetchData:async function(){let t="https://adsninja.ca/urlmap?url="+this.__getLiveHost()+window.location.pathname.toLowerCase()+"&brand="+this.shortBrandName;await fetch(t).then(t=>t.json()).then(async t=>{if(t.versions){let n=t.versions.split("#");this.dataResponse.adsInjectorConfigVersion=n[0],this.dataResponse.adsInjectorVersion=n[1];let a=this.__getApiPath()+"/valnetinc/"+this.brandName+"/adsInjectorConfigs.json?v="+this.dataResponse.adsInjectorConfigVersion;await fetch(a).then(t=>t.json()).then(t=>{this.dataResponse.configs=JSON.parse(t.configs)}).catch(t=>{console.error("Error :",t)})}if(t.geo){let n=t.geo.split("#");this.dataResponse.geo={country:n[0],region:n[1],city:n[2]}}if(t.gamId){let n=t.gamId.split("#");this.dataResponse.gamId=n[0],this.dataResponse.isBoosted=n[1]}}).catch(t=>{console.error("Error :",t)}),console.log("ADS INITIATOR ---",this.dataResponse)},__getLiveHost:function(){let t=window.location.host,n=t.split(".");return"www"===n[0]||"ads"!=n[0]&&!/^qa\d+$/.test(n[0])||(t=t.replace(n[0],"www")),t},loadScript:async function(){let t=this.__getPath()+"/ads_injector.js?v="+this.dataResponse.adsInjectorVersion,n=document.createElement("script");n.src=t,document.head.appendChild(n),await new Promise(t=>{n.onload=t})},runInjector:async function(){window.ads_injector.setConfigs(this.dataResponse.configs),window.ads_injector.setCountry(this.dataResponse.geo.country),window.ads_injector.setRegion(this.dataResponse.geo.region),window.ads_injector.setCity(this.dataResponse.geo.city),window.ads_injector.setGAMId(this.dataResponse.gamId),window.ads_injector.setBoostedUrlData(this.dataResponse.isBoosted),window.ads_injector.init()},__getPath:function(){let t="https://cdn.adsninja.ca",n=location.host.split(".");return["militarydev.prod.acquia-sites.com"].includes(window.location.hostname)?t="https://ads.adsninja.ca/cached":3!==n[0].length||-1==n[0].indexOf("qa")&&-1==n[0].indexOf("ads")?-1===["com","ca","net","co","uk","org"].indexOf(n[n.length-1])&&(t="https://www.adsninja.ca."+n[n.length-1]+"/cached"):t="https://"+n[0]+".adsninja.ca/cached",t},__getApiPath:function(){let t="https://cdn.adsninja.ca/api/cached",n=location.host.split(".");return["militarydev.prod.acquia-sites.com"].includes(window.location.hostname)?t="https://ads.adsninja.ca/api/cached":3!==n[0].length||-1==n[0].indexOf("qa")&&-1==n[0].indexOf("ads")?-1===["com","ca","net","co","uk","org"].indexOf(n[n.length-1])&&(t="https://www.adsninja.ca."+n[n.length-1]+"/api/cached"):t="https://"+n[0]+".adsninja.ca/api/cached",t}};
//# sourceMappingURL=ads_initiator-055bfdddc3d876b7b3b3.js.map