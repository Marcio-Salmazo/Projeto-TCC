(()=>{var e={7(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var i=function(){"use strict";return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buttonNext=t.buttonNext,this.buttonPrev=t.buttonPrev,this.divContainer=t.container,this.carouselContainer=t.carouselContainer,this.carouselElements=t.carouselElements},n=[{key:"gliderCarousel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Glider(this.carouselContainer,Object.assign({type:"slider",slidesToScroll:1,slidesToShow:1,draggable:!0,arrows:{prev:this.buttonPrev,next:this.buttonNext},responsive:[{breakpoint:775,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,draggable:!1}}]},e))}}],n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();window.customCarousel=i},925(e,t,n){"use strict";n.d(t,{A:()=>s});var i=n(3768);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}const s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ajaxRequest=!1,this.handleAccountVerificationClick=this.handleAccountVerificationClick.bind(this),this.handleCloseButtonClick=this.handleCloseButtonClick.bind(this)},t=[{key:"hideSuccessVerificationMsg",value:function(){var e=document.getElementById("account-verification-popup-success-msg-new");e&&e.classList.add("is-hidden")}},{key:"hideErrorVerificationMsg",value:function(){var e=document.getElementById("account-verification-popup-error-msg-new");e&&e.classList.add("is-hidden")}},{key:"displaySuccessVerificationMsg",value:function(e){var t=document.getElementById("account-verification-popup-success-msg-new"),n=document.getElementById("accountVerificationPopupCloseButton");e&&(t.firstChild.innerHTML=e),t.classList.remove("is-hidden"),setTimeout(function(){t.classList.add("is-hidden"),n&&n.click()},4e3)}},{key:"displayErrorVerificationMsg",value:function(e){var t=document.getElementById("account-verification-popup-error-msg-new"),n=document.getElementById("accountVerificationPopupCloseButton");e&&(t.firstChild.innerHTML=e),t.classList.remove("is-hidden"),setTimeout(function(){t.classList.add("is-hidden"),n&&n.click()},4e3)}},{key:"handleVerificationResponse",value:function(e){this.hideSuccessVerificationMsg(),this.hideErrorVerificationMsg();var t=e.status,n=e.message;"success"===t?this.displaySuccessVerificationMsg(n):this.displayErrorVerificationMsg(n),this.ajaxRequest=!1}},{key:"handleVerifyAccount",value:function(){var e=this;window.isUserLoggedIn&&(this.ajaxRequest&&this.ajaxRequest.abort(),this.ajaxRequest=new XMLHttpRequest,this.ajaxRequest.open("GET","/verify-email/",!0),this.ajaxRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.ajaxRequest.onreadystatechange=function(){4===e.ajaxRequest.readyState&&e.ajaxRequest.response&&e.handleVerificationResponse(JSON.parse(e.ajaxRequest.response))},this.ajaxRequest.send())}},{key:"injectAccountVerificationPopup",value:function(){var e=document.getElementById("account-verification-popup-container");if(!window.accountVerificationContainerInjected&&!e){var t=window.accountVerificationPopupHtml.trim("&quot;").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&amp;/g,"&").replace(/(^"|"$)/g,"").replaceAll("loginForm","loginPopup");document.body.insertAdjacentHTML("beforeend",t),window.accountVerificationContainerInjected=!0}}},{key:"showAccountVerificationPopup",value:function(){this.injectAccountVerificationPopup();var e=document.getElementById("account-verification-popup-container"),t=document.getElementById("account-verification-popup-message");if(t&&(t.innerHTML="Please verify your email address to unlock additional features on your account."),e){var n=e.getAttribute("data-style-path-url"),o="true"===e.getAttribute("data-style-injected");n&&!o?(0,i.tW)(n,function(){e.setAttribute("data-style-injected","true"),e.classList.add("is-visible")}):e.classList.add("is-visible")}this.addAccountVerificationPopupEventListeners()}},{key:"addAccountVerificationPopupEventListeners",value:function(){var e=document.getElementById("accountVerificationPopupCloseButton"),t=document.getElementById("accountVerificationPopupSubmitButton");e&&!e.isAlreadyAttached&&(e.isAlreadyAttached=!0,e.removeEventListener("click",this.handleCloseButtonClick),e.addEventListener("click",this.handleCloseButtonClick)),t&&!t.isAlreadyAttached&&(t.isAlreadyAttached=!0,t.removeEventListener("click",this.handleAccountVerificationClick),t.addEventListener("click",this.handleAccountVerificationClick))}},{key:"handleAccountVerificationClick",value:function(e){return e.preventDefault(),e.stopPropagation(),this.handleVerifyAccount(),!1}},{key:"handleCloseButtonClick",value:function(e){return e.preventDefault(),e.stopPropagation(),document.getElementById("account-verification-popup-container").classList.remove("is-visible"),this.hideSuccessVerificationMsg(),this.hideErrorVerificationMsg(),!1}}],t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},965(){function e(){if(document.querySelector(".light-wide-jump-links")&&!document._lightWideJumpLinksAttached){document._lightWideJumpLinksAttached=!0;var e=document.querySelectorAll(".table-content-link a, .table-content-sub-level a"),t=Array.from(e).map(function(e){var t=e.getAttribute("href").replace("#","");return document.getElementById(t)}).filter(function(e){return null!==e}),n=null;window.addEventListener("scroll",i),i()}function i(){var e=window.scrollY,i=null;var o=t[0].getBoundingClientRect().top;t.forEach(function(e){var t=e.getBoundingClientRect().top;e.getBoundingClientRect().bottom;if(t<250){var n=document.querySelector('.table-content-link a[href="#'.concat(e.id,'"], .table-content-sub-level a[href="#').concat(e.id,'"]'));i=n.closest("li")}}),i!==n&&(null!==i||null===i&&e<o)&&(n&&(n.classList.remove("reading"),n.classList.contains("is-sub-level")&&!i.classList.contains("is-sub-level")&&(n.closest("ul").classList.add("is-collapse"),n.closest("ul").closest("li").classList.remove("icon-clicked"))),i&&(i.classList.add("reading"),i.classList.contains("is-sub-level")&&(i.closest("ul").classList.remove("is-collapse"),i.closest("ul").closest("li").classList.add("icon-clicked"))),n=i)}}document.addEventListener("DOMContentLoaded",function(){e()}),e()},2586(e,t,n){"use strict";var i=n(3768),o=document.querySelectorAll(".poll-area");if(o.length>0){var r=o[0].getAttribute("data-style-path-url");(0,i.tW)(r,function(){for(var e=0;e<o.length;e++){var t=o[e];t.removeAttribute("hidden");var n=0,i="",r=!1;t&&(n=t.getAttribute("data-poll-id"),i=t.getAttribute("data-poll-type"),r="true"==t.getAttribute("data-poll-closed"));var s=t.querySelectorAll("label"),h=d("valnet_poll_"+n),f=document.getElementById("poll-vote-btn-"+n);!h&&r&&(h='{"idPoll":"'+n+'","choices":[]}'),h&&f||r?(a(null,h),f.classList.add("is-hidden")):f&&f.addEventListener("click",l);for(var m=0;m<s.length;m++)h||(s[m].addEventListener("click",c),s.length<=5&&s[m].addEventListener("click",u),s[m].pollType=i,s[m].options=s);var p=document.getElementById("poll-result-btn-"+n);p&&p.addEventListener("click",a)}})}function a(e,t){var n=null;("string"!=typeof t&&(t='{"idPoll":"","choices":[]}'),e)?n=e.target.parentNode.parentNode.getAttribute("data-poll-id"):n=JSON.parse(t).idPoll;var i=JSON.parse(t).choices;document.getElementById("poll-result-btn-"+n).classList.add("is-hidden"),document.getElementById("poll-total-votes-"+n).classList.remove("is-hidden");var o=document.getElementById("poll-vote-btn-"+n);o.removeEventListener("click",l),o.addEventListener("click",s),o.idPoll=n;for(var r="poll-opt-label-"+n,a=document.querySelectorAll("[id^="+r+"]"),d=0;d<a.length;d++){var u=a[d];u.classList.add("selectall"),i.includes(u.getAttribute("data-choice-id"))&&u.classList.add("selected"),u.querySelector(".progress").classList.remove("is-hidden"),u.querySelector(".percent").classList.remove("is-hidden"),u.querySelector(".circle").classList.add("is-hidden"),u.removeEventListener("click",c)}}function s(e){var t=e.target,n=e.target.parentNode.parentNode,i=n.getAttribute("data-poll-id");t.removeEventListener("click",s),t.addEventListener("click",l),document.getElementById("poll-result-btn-"+i).classList.remove("is-hidden"),document.getElementById("poll-total-votes-"+i).classList.add("is-hidden");for(var o=n.querySelectorAll(".poll-area label"),r=0;r<o.length;r++){var a=o[r];a.classList.remove("selectall"),a.classList.remove("selected"),a.querySelector(".progress").classList.add("is-hidden"),a.querySelector(".percent").classList.add("is-hidden"),a.querySelector(".circle").classList.remove("is-hidden"),a.addEventListener("click",c)}}function l(e){for(var t=[],n=e.target.parentNode.parentNode,i=n.getAttribute("data-poll-id"),o=n.getElementsByClassName("poll-choices-"+i),r=0;o[r];++r)o[r].checked&&t.push(o[r].value);0==t.length?alert("Please choose a valid poll answer."):function(e,t){var n=new XMLHttpRequest,i="/poll/update-vote/",o={idPoll:e,choices:t};n.open("POST",i,!0),n.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&200===this.status&&(!function(e,t){var n=document.getElementById("poll-vote-btn-"+t);n.classList.add("is-hidden");var i=document.getElementById("poll-result-btn-"+t);i.classList.add("is-hidden");var o=document.getElementById("poll-total-votes-"+t);o.classList.remove("is-hidden");for(var r=e.poll.choices,a=e.poll.totalVotes,s=0;s<r.length;s++){var d=document.getElementById("poll-opt-label-"+t+"-"+r[s].id);if(d){var h=Math.round(r[s].votes/a*100);d.querySelector(".progress").style.setProperty("--w",h),d.querySelector(".progress").classList.remove("is-hidden"),d.querySelector(".percent").innerHTML=h+"%",d.querySelector(".percent").classList.remove("is-hidden"),d.querySelector(".circle").classList.add("is-hidden"),d.removeEventListener("click",l),d.removeEventListener("click",c),d.length<=5&&d.removeEventListener("click",u)}}}(JSON.parse(n.responseText),e),document.cookie="valnet_poll_"+e+"="+JSON.stringify(o))},n.send(JSON.stringify(o))}(i,t)}function c(e){var t=e.target,n=e.currentTarget.pollType,i=e.currentTarget.options;t.getAttribute("data-choice-id");if("single-select"==n)for(var o=0;o<i.length;o++)i[o].classList.contains("selected")&&i[o].classList.remove("selected");t.classList.add("selected");for(var r=0;r<i.length;r++)i[r].classList.add("selectall");var a=t.getAttribute("for"),s=document.querySelector("#"+a);"checkbox"==s.getAttribute("type")?s.setAttribute("type","radio"):1==s.checked&&(t.classList.remove("selected"),s.setAttribute("type","checkbox"));for(var l=[],c=0;c<i.length;c++)i[c].classList.contains("selected")&&l.push(c);if(0==l.length)for(var d=0;d<i.length;d++)i[d].removeAttribute("class")}function d(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}function u(){var e=document.querySelectorAll(".poll-area input"),t=document.querySelector(".poll-area[data-poll-id]").getAttribute("data-poll-id"),n=document.getElementById("poll-vote-btn-"+t);setTimeout(function(){for(var t=0,i=e.length;t<i;t++)if(e[t].checked)return void(n.classList="")},1),n.classList="is-disabled"}function h(){document.querySelectorAll(".poll-wrapper form").forEach(function(e){var t=e.closest(".poll-wrapper"),n=t.dataset.pollId,i="#poll-content-".concat(n),o=t.querySelector("#poll-result-btn-".concat(n)),r=t.querySelector("#poll-submit-btn-".concat(n)),a=t.querySelector(".poll__nav-btn-next"),s=t.querySelector(".poll__nav-btn-prev");!function(e,t){var n=document.querySelector(t),i=n.querySelector(e);i&&n?i.addEventListener("click",function(){var e=i.classList.toggle("poll__button--active");n.classList.toggle("show-results"),i.innerText=e?"Hide Results":"Show Results"}):console.warn("Toggle setup failed: ".concat(e," or ").concat(t," not found."))}(".poll__results-btn",i),function(e){var t=document.querySelector(e);if(t){var n=Number(t.dataset.sectionsCount),i=Number(t.dataset.pollId),o=t.querySelectorAll(".poll__tab"),r=t.querySelector(".poll__nav-btn-next"),a=t.querySelector(".poll__nav-btn-prev"),s=t.querySelector(".poll__btn-submit"),l=t.querySelector("#poll-result-btn-".concat(i));null==l||l.addEventListener("click",function(e){for(var t=0,n=0;n<o.length;n++)if(console.log(n),o[n].classList.contains("poll__tab--active")){t=o[n].dataset.tabIndex;break}u(t,o.length)}),o.forEach(function(e){e.addEventListener("click",function(){c(e.dataset.tabId),u(Number(e.dataset.tabIndex),n)})}),null==r||r.addEventListener("click",function(){var e=h(1);e&&(c(e.dataset.tabId),u(Number(e.dataset.tabIndex),n))}),null==a||a.addEventListener("click",function(){var e=h(-1);e&&(c(e.getAttribute("data-tab-id")),u(Number(e.dataset.tabIndex),n))})}function c(e){o.forEach(function(t){var n=t.dataset.tabId===e;n?t.classList.add("poll__tab--active"):t.classList.remove("poll__tab--active",n)}),t.querySelectorAll(".poll__pane").forEach(function(t){t.dataset.paneId===e?t.classList.add("poll__pane--active"):t.classList.remove("poll__pane--active")})}function u(e,n){var o=t.classList.contains("show-results"),l=!1;d("valnet_poll_".concat(i))&&(l=!0),e==n?(a.classList.remove("is-hidden"),r.classList.add("is-hidden"),s&&(o||l?s.classList.add("is-hidden"):s.classList.remove("is-hidden"))):e<n&&e>1?(a.classList.remove("is-hidden"),r.classList.remove("is-hidden"),s&&s.classList.add("is-hidden")):1==e&&(a.classList.add("is-hidden"),r.classList.remove("is-hidden"),s&&s.classList.add("is-hidden"))}function h(e){var n=t.querySelector(".poll__tab--active"),i=Array.from(o),r=i.indexOf(n);return i[r+e]}}(i);var l=t.querySelectorAll(".poll__tab");e.addEventListener("submit",function(i){i.preventDefault();var c=new FormData(e),d={};c.forEach(function(e,t){d[t]?Array.isArray(d[t])?d[t].push(e):d[t]=[d[t],e]:d[t]=[e]}),fetch("/poll/update-vote/",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({pollId:n,choices:d,content:"html"})}).then(function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(function(e){if(e.updated){document.cookie="valnet_poll_"+n+"="+JSON.stringify(d);var i=t.querySelector("#poll-sections-list-".concat(n));t.classList.add("show-results"),i.innerHTML=e.poll,r.parentNode.removeChild(r),o.parentNode.removeChild(o),s.classList.add("is-hidden"),a.classList.remove("is-hidden"),l.forEach(function(e,t){0==t?e.classList.add("poll__tab--active"):e.classList.remove("poll__tab--active")}),wrapper.querySelectorAll(".poll__pane").forEach(function(e,t){0==e?t.classList.add("poll__pane--active"):t.classList.remove("poll__pane--active")})}else console.error("Poll submission failed:",e.message)}).catch(function(e){console.error("Error submitting poll:",e)})})})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){h()}):h()},2751(){window.addEventListener("load",function(){var e=document.querySelectorAll(".js-tabs-ul > li");if(void 0!==e)for(i=0;i<e.length;i++)e[i].addEventListener("click",t);function t(t){for(var n=0;n<e.length;n++)e[n].classList.remove("selected");t.currentTarget.classList.add("selected");var i=document.querySelectorAll(".js-tab-pane");for(n=0;n<i.length;n++)i[n].classList.add("is-hidden");var o=t.target;"H3"==o.nodeName&&(o=o.parentElement);var r="js-content"+o.getAttribute("id").replace("js",""),a=document.getElementById(r);null!==a&&a.classList.remove("is-hidden")}}),window.addEventListener("load",function(){var e=document.querySelectorAll(".js-content-tabs-ul > li");if(void 0!==e)for(i=0;i<e.length;i++)e[i].addEventListener("click",t);function t(t){for(var n=0;n<e.length;n++)e[n].classList.remove("selected");t.currentTarget.classList.add("selected");var i=document.querySelectorAll(".js-content-tab-pane");for(n=0;n<i.length;n++)i[n].classList.add("is-hidden");var o=t.target;"H3"==o.nodeName&&(o=o.parentElement);var r="js-listing"+o.getAttribute("id").replace("js",""),a=document.getElementById(r);null!==a&&a.classList.remove("is-hidden")}}),window.addEventListener("load",function(){var e=document.getElementById("js-expand-upcoming");null!==e&&e.addEventListener("click",function(t){t.preventDefault();var n,i,o=document.getElementById("js-upcoming-expandable");i="closed",null!=(n=o)&&(n.classList.contains(i)?n.classList.remove(i):n.classList.add(i)),o.classList.contains("closed")?(e.setAttribute("title","View More"),e.textContent="View More"):(e.setAttribute("title","View Less"),e.textContent="View Less")})});var e=document.querySelectorAll(".js-tabs > li");if(void 0!==e)for(i=0;i<e.length;i++)e[i].addEventListener("click",function(t){for(var n=0;n<e.length;n++)e[n].classList.remove("selected");var i=t.currentTarget;i.classList.add("selected");var o=document.querySelectorAll(".js-tab-content-1")[0];i.classList.contains("js-article-tab-2")?o.classList.add("is-hidden"):o.classList.remove("is-hidden")})},2870(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var i=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},this.defaults,t),this.trackedWindow=null,this.clientId=this.options.clientId,this.redirectUri=this.options.redirectUri,this.scopes=this.options.scopes||["user:read:email"]},(n=[{key:"defaults",get:function(){return{clientId:"",redirectUri:"/twitch-login/",scopes:["user:read:email"]}}},{key:"getAuthUrl",value:function(){var e=new URLSearchParams({client_id:this.clientId,redirect_uri:this.redirectUri,response_type:"code",scope:this.scopes.join(" "),state:this.currentState});return"https://id.twitch.tv/oauth2/authorize?".concat(e.toString())}},{key:"currentState",get:function(){return window.location.href}},{key:"auth",value:function(){window.location.href=this.getAuthUrl()}},{key:"sendWebsiteSentinelEvent",value:function(e){window.websiteSentinel&&(console.info("twitch event sent ->",e),window.websiteSentinel.sendEvent(e.name,e.action,"twitch"))}}])&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();window.handleTwitchLogin=function(){try{if(console.log(window.twitchClientId),!window.twitchClientId)throw new Error("Twitch client ID not found");var e={clientId:window.twitchClientId,redirectUri:"".concat(window.location.origin,"/twitch-login/"),scopes:["user:read:email"]};new i(e).auth()}catch(e){console.error("Twitch authorization failed:",e)}},window.handleTwitchAfterLogin=function(){var e=new URLSearchParams(window.location.search).get("twitchLogin")||null;if(e&&window.websiteSentinel){var t,n;t="twitchLogin",(n=new URL(window.location)).searchParams.delete(t),window.history.replaceState({},"",n);var i=sessionStorage.getItem("loginFormEventCategoryOpening");window.websiteSentinel.sendEvent(i,e,"twitch")}},"complete"!==document.readyState?document.addEventListener("readystatechange",function(e){"complete"===e.target.readyState&&window.handleTwitchAfterLogin()}):window.handleTwitchAfterLogin()},3474(){var e=document.getElementsByClassName("js-search-focus"),t=document.getElementById("js-search-input");for(i=0;i<e.length;i++)e[i].addEventListener("click",n,!1);function n(e){window.setTimeout(function(){return t.focus()},0)}!function(){var e=window.location.pathname;if("mobile"==VALNET_GLOBAL_DETECTEDDEVICE)for(var t=document.querySelectorAll(".w-sidenav-subnav.sidenav-elements"),n=0;n<t.length;n++)if(t[n].dataset.permalinkpartmatch&&e.includes(t[n].dataset.permalinkpartmatch)){var i=document.querySelector('li[data-id="explore"]');i&&i.classList.add("is-open"),t[n].classList.add("is-open")}}();var o=document.getElementById("subnav-search-input"),r=document.getElementById("reset-search-btn"),a=document.getElementById("subnav-search-results"),s=document.getElementById("subnav-search-close");function l(){a.innerHTML='<div class="w-loader">\n                     <div class="dot-flashing"></div>\n                 </div>'}function c(e){var t=document.createElement("a");t.classList.add("subnav-search-result-item"),t.href=e.listing_page_permalink;var n=e.release_date;e.base_msrp&&(n="string"==typeof e.base_msrp&&Number.isFinite(Number(e.base_msrp))?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(e.base_msrp):e.base_msrp);var i='\n        <picture>\n            <img src="'.concat(e.image_url,'" alt="').concat(e.tag_name,'" title="').concat(e.tag_name,'" width="37" height="56"/>\n        </picture>\n        <div class="subnav-search-result-item-info">\n            <h6 class="search-result-item-title">').concat(e.tag_name,"</h6>\n    ");return n&&(i+='<p class="search-result-item-date">'.concat(n,"</p>")),e.tag_type&&(i+='<div class="search-result-item-people"><span>'.concat(e.tag_type,"</span></div>")),e.extra_spec_1&&"NULL"!==e.extra_spec_1&&(i+='<div class="search-result-item-specs"><span>'.concat(e.extra_spec_1,"</span>"),e.extra_spec_2&&"NULL"!==e.extra_spec_2&&e.extra_spec_1!==e.extra_spec_2&&(i+=", <span>".concat(e.extra_spec_2,"</span>")),i+="</div>"),i+="</div>",t.innerHTML=i,t}function d(e){var t=document.createElement("a");return t.classList.add("subnav-search-result-item"),t.href=e.slug,t.innerHTML='\n        <picture>\n            <img src="'.concat(e.imageUrl,'" alt="').concat(e.title,'" title="').concat(e.title,'" width="48" height="48"/>\n        </picture>\n        <div class="subnav-search-result-item-info">\n            <h6 class="search-result-item-title">').concat(e.title,'</h6>\n            <p class="search-result-item-author"> ').concat(e.type,'</p>\n            <p class="search-result-item-version">').concat(e.specTitle,": ").concat(e.specValue,"</p>\n        </div>\n    "),t}if(r&&o&&r.addEventListener("click",function(){l(),a.classList.add("is-hidden"),o.value="",s.classList.add("is-hidden")}),o){var u=null,h=null;o.addEventListener("input",function(){var e=this;clearTimeout(u),this.value.length<=1&&!a.classList.contains("is-hidden")&&a.classList.add("is-hidden"),u=setTimeout(function(){if(e.value.length>1){h&&h.abort();var t=(h=new AbortController).signal;l();var n=document.querySelector(".w-loader");a.classList.remove("is-hidden"),n.classList.remove("is-hidden"),s&&s.classList.contains("is-hidden")&&s.classList.remove("is-hidden");var i=e.dataset.type||"listing",o="",r=null;switch(i){case"mod":o="/mods/search/?q=".concat(e.value,"&priority=1"),r=d;break;case"listing":o="/tag/search/listing-page/?q=".concat(e.value),r=c}fetch(o,{signal:t}).then(function(e){return e.json()}).then(function(e){n.classList.add("is-hidden");var t=JSON.parse(e.data);if(0===t.length){var i=document.createElement("a");return i.classList.add("subnav-search-result-item"),i.innerHTML='\n                                <div class="subnav-search-result-item-info">\n                                    <span>No Results Found</span>\n                                </div>',void a.appendChild(i)}t.forEach(function(e){var t=r(e);a.appendChild(t)})}).catch(function(e){n.classList.add("is-hidden"),console.error(e)})}},300)}),document.addEventListener("click",function(e){var t=o.contains(e.target)||a.contains(e.target);t?t&&document.querySelector(".subnav-search-result-item-info")&&(a.classList.remove("is-hidden"),s.classList.remove("is-hidden")):(a.classList.add("is-hidden"),s.classList.add("is-hidden"))})}var f=document.querySelectorAll(".w-subheader-menu-item");if(f&&document.addEventListener("click",function(e){var t=!1,n=document.querySelector("div.subheader-submenu-item.is-active > div.subheader-submenu-item-2nd-lvl");f.forEach(function(i){if(i.contains(e.target)){if(t=!0,n&&n.contains(e.target))return;if(e.target.closest("a"))return;var o=e.target.closest(".subheader-menu-item");if(i.classList.contains("is-active")&&o)i.classList.remove("is-active");else{f.forEach(function(e){e.classList.remove("is-active")}),i.classList.add("is-active");var r=document.querySelector(".w-subheader-optional-dropdown");r&&r.classList.contains("is-active")&&r.classList.remove("is-active"),T&&E&&T.classList.contains("is-sliding-in")&&B([T],[E])}}else i.classList.remove("is-active")}),t||f.forEach(function(e){e.classList.remove("is-active")})}),["content-all","list-all"].includes(VALNET_GLOBAL_TEMPLATE)&&"mobile"==VALNET_GLOBAL_DETECTEDDEVICE&&"GMS"==VALNET_GLOBAL_BRAND_SHORT_NAME.toUpperCase()){var m=document.querySelector("header.w-header"),p=document.querySelector("#ad-below-ticker");if(m&&p){var v=function(){var e=document.body.getBoundingClientRect().top;e>m.lastPosition?m.classList.remove("gms-header-hide"):e<m.lastPosition&&m.classList.add("gms-header-hide"),m.lastPosition=e};new Waypoint.Inview({element:p,entered:function(e){m.classList.remove("gms-header-hide"),document.removeEventListener("scroll",v,{passive:!0})},exited:function(e){m.lastPosition=document.body.getBoundingClientRect().top,document.addEventListener("scroll",v,{passive:!0})}})}}var g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.slideOutClass||"is-sliding-out",o=n.slideInClass||"is-sliding-in";if(e&&(!e.classList.contains(o)||!t)&&(!e.classList.contains(i)||t))return t?(e.classList.remove(i),e.classList.add(o),!0):(e.classList.remove(o),e.classList.add(i),!1)},y=document.querySelector('[data-is-action-bar-dynamic-section="true"]'),w=document.querySelector('[data-is-action-bar-more-action="true"]'),b=document.querySelector('[data-is-action-bar-more-action-button="true"]'),S=document.querySelector('[data-is-action-bar-more-action-dropdown="true"]'),k=document.querySelector('[data-is-dbsearch-toggle-button="true"]'),L=document.querySelector('[data-is-dbsearch-secondary-toggle-button="true"]'),E=document.querySelector('[data-is-header-menu-toggle-button="true"]'),C=document.querySelector('[data-is-dbsearch-drawer="true"]'),T=document.querySelector('[data-is-header-menu-drawer="true"]'),I=document.querySelector('[data-is-header-menu-submenu="true"]'),A=document.querySelector('[data-is-header-menu-drawer-expand-input="true"]'),P=document.querySelector(".subheader-menu-optional.w-btn"),q=document.querySelector('[data-is-secondary-header="true"]'),x=window.requestAnimationFrame||function(e){setInterval(function(){e()},16)},B=function(e,t){for(var n=0;n<e.length;n++)if(e[n]){var i=e[n];g(i,!1),i==T&&(g(I,!1,{slideOutClass:"is-sliding-out-submenu",slideInClass:"is-sliding-in-submenu"}),A&&(A.checked=!1)),i==w&&g(S,!1,{slideOutClass:"is-not-active",slideInClass:"is-active"})}for(var o=0;o<t.length;o++){if(t[o])t[o].classList.remove("is-active")}},_="mobile"==VALNET_GLOBAL_DETECTEDDEVICE;if(q&&(q.attached||(q.attached=!0,q.showUpdateFunctionCallback=function(){var e=document.scrollingElement.scrollTop>(_?410:600),t="1"==q.dataset.isDbSearch;t||g(q,e),e||t||B([w],[b]),x(function(){q.showUpdateFunctionCallback()})}.bind(q),q.showUpdateFunctionCallback())),y){for(var O=function(){if(S.children.length<=0)w.classList.add("is-hidden");else if(1==S.children.length)y.insertBefore(S,w),w.classList.add("is-hidden");else{var e=S.children;Array.from(e).some(function(e){return"none"!==window.getComputedStyle(e).display})?w.classList.remove("is-hidden"):w.classList.add("is-hidden")}},j=0,N=[],M=0;M<y.children.length;M++)N.push(y.children[M]);for(var R=0;R<N.length;R++)N[R]!=w&&++j>2&&S.appendChild(N[R]);b.alreadyAttached||(b.addEventListener("click",function(e){B([C,T],[k,E]),b.classList.toggle("is-active"),g(S,b.classList.contains("is-active"),{slideOutClass:"is-not-active",slideInClass:"is-active"})}),b.alreadyAttached=!0),window.addEventListener("resize",O),O()}if(k&&!k.attached){k.attached=!0;var z=function(){B([T,w],[E,b]),k.classList.toggle("is-active"),g(C,k.classList.contains("is-active"))};k.addEventListener("click",z),L&&!L.attached&&(L.attached=!0,L.addEventListener("click",z))}if(E&&(E.attached||(E.attached=!0,E.addEventListener("click",function(){if(P){var e=P.querySelector(".w-subheader-optional-dropdown");e&&e.classList.remove("is-active")}B([C,w],[k,b]),E.classList.toggle("is-active"),g(T,E.classList.contains("is-active")),g(I,E.classList.contains("is-active"),{slideOutClass:"is-sliding-out-submenu",slideInClass:"is-sliding-in-submenu"})}))),P){var V=P.querySelector(".btn-fab"),D=P.querySelector(".w-subheader-optional-dropdown");V&&V.addEventListener("click",function(e){e.stopPropagation(),D&&(f&&f.forEach(function(e){e.classList.remove("is-active")}),B([T],[E]),D.classList.toggle("is-active"))}),document.addEventListener("click",function(e){P.contains(e.target)||D&&D.classList.remove("is-active")})}try{B([T,w],[E,b])}catch(e){}var U=document.querySelector(".subheader-menu-list"),F=document.querySelector(".subheader-optional-dropdown");function H(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".subheader-submenu-item.has-submenu").forEach(function(e){e.__submenuInitialized||(e.__submenuInitialized=!0,e.addEventListener("click",function(t){if(!t.target.closest("a")){var n=e.closest(".sublist-drawer-item");n&&n.hasAttribute("data-has-lazy-children")||t.stopPropagation();var i=n?n.parentElement:null;i&&i.querySelectorAll(".subheader-submenu-item.has-submenu.is-selected").forEach(function(t){t!==e&&t.classList.remove("is-selected")}),e.classList.add("is-selected")}}))})}function W(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".sublist-btn-back").forEach(function(e){e.__backInitialized||(e.__backInitialized=!0,e.addEventListener("click",function(t){if(!t.target.closest("a")){t.stopPropagation();var n=e.closest(".w-sublist-drawer");if(n){var i=n.previousElementSibling;i&&i.classList.contains("has-submenu")&&i.classList.remove("is-selected")}}}))})}function Q(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll("[data-has-lazy-children]").forEach(function(e){e.__lazyInitialized||(e.__lazyInitialized=!0,e.addEventListener("click",J))})}function J(e){var t=e.currentTarget;if(!t.__lazyChildrenLoaded){var n=t.getAttribute("data-menu-node-id");if(n){var i=t.closest('[data-is-header-menu-submenu="true"]');if(i){var o=Array.from(i.querySelectorAll('[data-sublist-target="'+n+'"]'));if(o.length){var r=i.querySelector("[data-menu-tag-id], [data-menu-root-id]"),a=r?r.getAttribute("data-menu-tag-id"):null,s=r?r.getAttribute("data-menu-root-id"):null;if(n&&s){var l={submenuId:n,menuTagId:a,rootMenuId:s};return fetch("/header-menu/submenu/children/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(function(e){if(!e.ok)throw new Error("Failed to load submenu");return e.json()}).then(function(e){e&&e.success?(t.__lazyChildrenLoaded=!0,o.forEach(function(t){t.innerHTML=e.html,H(t),W(t),Q(t)})):console.error("Submenu load error:",e&&e.error)}).catch(console.error)}}}}}}document.querySelectorAll(".w-subheader-optional-dropdown").forEach(function(e){var t=e.querySelector(".active-link");if(t){var n=t.closest(".w-optional-dropdown-item.has-submenu");n&&n.classList.add("is-active")}}),document.querySelectorAll(".subheader-submenu-item.active-link, .w-subheader-submenu-item.active-link, .sublist-drawer-item.active-link").forEach(function(e){var t;for(t=e.classList.contains("sublist-drawer-item")?e.parentElement?e.parentElement.closest(".sublist-drawer-item"):null:e.closest(".sublist-drawer-item");t;){var n=t.querySelector(".subheader-submenu-item.has-submenu");n&&n.classList.add("is-selected"),t=t.parentElement?t.parentElement.closest(".sublist-drawer-item"):null}}),Q(),H(),W(),function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelector(".subheader-optional-dropdown");e&&"true"!==e.dataset.optionalInit&&(e.__optionalInit=!0,e.addEventListener("click",function(t){if(!t.target.closest("a")){t.stopPropagation();var n=t.target.closest(".optional-dropdown-item");if(n){var i=n.closest(".w-optional-dropdown-item.has-submenu");i&&(e.querySelectorAll(".w-optional-dropdown-item.has-submenu.is-active").forEach(function(e){e!==i&&e.classList.remove("is-active")}),i.classList.toggle("is-active"))}}}))}(),U&&P&&F&&function(){var e=Array.from(U.querySelectorAll(".w-subheader-menu-item")),t=!1;function n(){if(!t){var n=document.createDocumentFragment();e.forEach(function(e){var t=e.querySelector(".wrapper.w-subheader-submenu"),i=!!t,o=document.createElement("div");o.className="w-optional-dropdown-item is-generated-from-main",i&&o.classList.add("has-submenu"),e.classList.contains("active-link")&&o.classList.add("active-link");var r=document.createElement("div");r.className="optional-dropdown-item",o.appendChild(r);var a,s=e.querySelector(".subheader-item-label, .subheader-submenu-item-label"),l=function(e,t){var n;return t?((n=document.createElement("a")).className="optional-dropdown-label",n.href=t.href,n.textContent=e,t.target&&(n.target=t.target)):((n=document.createElement("div")).className="optional-dropdown-label",n.textContent=e),n}(s?s.textContent.trim():"",e.querySelector("a.subheader-item-label, a.subheader-submenu-item-label"));if(r.appendChild(l),i&&t){var c=t.querySelector(".w-list-submenu");if(c){var d=document.createElement("div");d.className="w-optional-dropdown-submenu";var u=document.createElement("div");u.className="optional-dropdown-submenu",u.innerHTML=c.innerHTML,d.appendChild(u),o.appendChild(d),H(a=d),W(a),Q(a)}}n.appendChild(o),e.classList.add("is-hidden-via-resize")}),F.insertBefore(n,F.firstChild),t=!0}}function i(){window.innerWidth<=1024?n():t&&(F.querySelectorAll(".w-optional-dropdown-item.is-generated-from-main").forEach(function(e){return e.remove()}),e.forEach(function(e){e.classList.remove("is-hidden-via-resize")}),t=!1),function(){if(P&&F){var e=!!F.querySelector(".w-optional-dropdown-item");P.classList.toggle("do-not-show",!e)}}()}window.addEventListener("load",i),window.addEventListener("resize",i)}(),document.querySelectorAll(".wiki-icon-container .dropdown-toggle").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var n=e.closest(".wiki-icon-container").querySelector(".wikis-menu-options");document.querySelectorAll(".wiki-icon-container .wikis-menu-options").forEach(function(e){e!==n&&(e.style.display="none")}),"block"===n.style.display?n.style.display="none":n.style.display="block"})}),document.addEventListener("click",function(e){e.target.closest(".wiki-icon-container")||document.querySelectorAll(".wiki-icon-container .wikis-menu-options").forEach(function(e){e.style.display="none"})}),window.addEventListener("scroll",function(){document.querySelectorAll(".wiki-icon-container .wikis-menu-options").forEach(function(e){e.style.display="none"})}),window.openActionBar=function(e){e&&e.stopPropagation();var t=document.querySelector(".action-bar-ai-feature-dropdown");t&&("none"===getComputedStyle(t).display?(t.style.removeProperty("display"),t.dataset.openAtY=String(window.scrollY),t.dataset.scrollAccum="0",t.dataset.lastCloseAt=t.dataset.lastCloseAt||"0",window.__actionBarIsOpen=!0):(t.style.display="none",t.dataset.openAtY="",t.dataset.scrollAccum="0",window.__actionBarIsOpen=!1))},function(){if(!window.__actionBarOutsideCloseInit){window.__actionBarOutsideCloseInit=!0;var e=function(){return document.querySelector(".action-bar-ai-feature-dropdown")};document.addEventListener("click",t,!0),document.addEventListener("touchstart",t,{capture:!0}),document.addEventListener("keydown",function(t){if("Escape"===t.key){var n=e();n&&window.__actionBarIsOpen&&(n.style.display="none",window.__actionBarIsOpen=!1)}})}function t(t){var n=e();if(n&&window.__actionBarIsOpen){var i=t.target.closest(".action-bar-ai-feature-dropdown"),o=t.target.closest(".action-bar-ai-feature");i||o||(n.style.display="none",n.dataset.openAtY="",n.dataset.scrollAccum="0",window.__actionBarIsOpen=!1)}}}()},3575(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var i=function(){"use strict";return e=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.waypointElement=n,this.type=t,this.referer=i,this.init()},n=[{key:"init",value:function(){this.createWaypoint(),this.sendPixel(this.type,this.referer)}},{key:"sendPixel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new XMLHttpRequest,i="https://"+window.location.hostname+"/"+window.pixelName+"?time="+Date.now()+"&type="+e+"&permalink="+window.location.pathname;t&&(i=i+"&referer="+t),n.open("GET",i,!0),n.send()}},{key:"createWaypoint",value:function(){if(this.waypointElement){var e=this;new Waypoint({element:e.waypointElement,handler:function(t){"down"==t&&e.waypointHandler(),this.destroy()},offset:-(1600+screen.height)})}}},{key:"waypointHandler",value:function(){this.sendPixel("depthMarker")}}],n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();window.valnet_sentinel=i},3768(e,t,n){"use strict";function i(e){return!e||""==e.replace(/\s|\n|\r/gm,"")}function o(e){var t=document.createElement("template");return t.innerHTML=e,Array.from(t.content.childNodes).find(function(e){return e.nodeType!==Node.TEXT_NODE})}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(!e)return null;for(var i=0,o=e,r=function(e){var n=function(e){return e.matches||e.webkitMatchesSelector||e.msMatchesSelector||e.mozMatchesSelector||function(){return!1}}(e);return"string"==typeof t?n.call(e,t):"function"==typeof t&&t(e)};o&&i<n&&o;){if(r(o))return o;o=o.parentElement,i++}return null}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Array.prototype.slice.call(arguments,1);try{e.apply(null,t)}catch(e){console.error(e)}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};c([e]).then(function(){t()})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};c(e).then(function(){t()})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.allSettled(e.map(function(e){return new Promise(function(t){var n=function(){return t()};if(!e)return n();var i=document.head.querySelector('link[href="'.concat(e,'"]'));if(i)return"complete"===i.readyState||"loaded"===i.readyState?n():(i.addEventListener("load",n),void i.addEventListener("error",n));var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("href",e),o.addEventListener("load",n),o.addEventListener("error",n),document.head.appendChild(o)})}))}function d(e){for(var t=atob(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new TextDecoder("utf-8").decode(n)}function u(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}function h(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";if(n){(r=new Date).setTime(r.getTime()+24*n*60*60*1e3);var o="; expires="+r.toGMTString()}else{var r;o="; expires="+(r=new Date(2147483647e3)).toGMTString()}document.cookie=e+"="+t+o+"; path="+i}n.d(t,{CC:()=>o,Gt:()=>l,Qb:()=>d,Ri:()=>u,TV:()=>h,dC:()=>r,jx:()=>a,lS:()=>i,tW:()=>s})},4502(e,t,n){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";var e="undefined"!=typeof window?window:this,t=e.Glider=function(t,n){var i=this;if(t._glider)return t._glider;if(i.ele=t,i.ele.classList.add("glider"),i.ele._glider=i,i.opt=Object.assign({},{slidesToScroll:1,slidesToShow:1,resizeLock:!0,duration:.5,easing:function(e,t,n,i,o){return i*(t/=o)*t+n}},n),i.animate_id=i.page=i.slide=0,i.arrows={},i._opt=i.opt,i.opt.skipTrack)i.track=i.ele.children[0];else for(i.track=document.createElement("div"),i.ele.appendChild(i.track);1!==i.ele.children.length;)i.track.appendChild(i.ele.children[0]);i.track.classList.add("glider-track"),i.init(),i.resize=i.init.bind(i,!0),i.event(i.ele,"add",{scroll:i.updateControls.bind(i)}),i.event(e,"add",{resize:i.resize})},n=t.prototype;return n.init=function(e,t){var n=this,i=0,o=0;n.slides=n.track.children,[].forEach.call(n.slides,function(e,t){e.classList.add("glider-slide"),e.setAttribute("data-gslide",t)}),n.containerWidth=n.ele.clientWidth;var r=n.settingsBreakpoint();if(t||(t=r),"auto"===n.opt.slidesToShow||void 0!==n.opt._autoSlide){var a=n.containerWidth/n.opt.itemWidth;n.opt._autoSlide=n.opt.slidesToShow=n.opt.exactWidth?a:Math.max(1,Math.floor(a))}"auto"===n.opt.slidesToScroll&&(n.opt.slidesToScroll=Math.floor(n.opt.slidesToShow)),n.itemWidth=n.opt.exactWidth?n.opt.itemWidth:n.containerWidth/n.opt.slidesToShow,[].forEach.call(n.slides,function(e){e.style.height="auto",e.style.width=n.itemWidth+"px",i+=n.itemWidth,o=Math.max(e.offsetHeight,o)}),n.track.style.width=i+"px",n.trackWidth=i,n.isDrag=!1,n.preventClick=!1,n.move=!1,n.opt.resizeLock&&n.scrollTo(n.slide*n.itemWidth,0),(r||t)&&(n.bindArrows(),n.buildDots(),n.bindDrag()),n.updateControls(),n.emit(e?"refresh":"loaded")},n.bindDrag=function(){var e=this;e.mouse=e.mouse||e.handleMouse.bind(e);var t=function(){e.mouseDown=void 0,e.ele.classList.remove("drag"),e.isDrag&&(e.preventClick=!0),e.isDrag=!1},n=function(){e.move=!0},i={mouseup:t,mouseleave:t,mousedown:function(t){t.preventDefault(),t.stopPropagation(),e.mouseDown=t.clientX,e.ele.classList.add("drag"),e.move=!1,setTimeout(n,300)},touchstart:function(t){e.ele.classList.add("drag"),e.move=!1,setTimeout(n,300)},mousemove:e.mouse,click:function(t){e.preventClick&&e.move&&(t.preventDefault(),t.stopPropagation()),e.preventClick=!1,e.move=!1}};e.ele.classList.toggle("draggable",!0===e.opt.draggable),e.event(e.ele,"remove",i),e.opt.draggable&&e.event(e.ele,"add",i)},n.buildDots=function(){var e=this;if(e.opt.dots){if("string"==typeof e.opt.dots?e.dots=document.querySelector(e.opt.dots):e.dots=e.opt.dots,e.dots){e.dots.innerHTML="",e.dots.setAttribute("role","tablist"),e.dots.classList.add("glider-dots");for(var t=0;t<Math.ceil(e.slides.length/e.opt.slidesToShow);++t){var n=document.createElement("button");n.dataset.index=t,n.setAttribute("aria-label","Page "+(t+1)),n.setAttribute("role","tab"),n.className="glider-dot "+(t?"":"active"),e.event(n,"add",{click:e.scrollItem.bind(e,t,!0)}),e.dots.appendChild(n)}}}else e.dots&&(e.dots.innerHTML="")},n.bindArrows=function(){var e=this;e.opt.arrows?["prev","next"].forEach(function(t){var n=e.opt.arrows[t];n&&("string"==typeof n&&(n=document.querySelector(n)),n&&(n._func=n._func||e.scrollItem.bind(e,t),e.event(n,"remove",{click:n._func}),e.event(n,"add",{click:n._func}),e.arrows[t]=n))}):Object.keys(e.arrows).forEach(function(t){var n=e.arrows[t];e.event(n,"remove",{click:n._func})})},n.updateControls=function(e){var t=this;e&&!t.opt.scrollPropagate&&e.stopPropagation();var n=t.containerWidth>=t.trackWidth;t.opt.rewind||(t.arrows.prev&&(t.arrows.prev.classList.toggle("disabled",t.ele.scrollLeft<=0||n),t.arrows.prev.setAttribute("aria-disabled",t.arrows.prev.classList.contains("disabled"))),t.arrows.next&&(t.arrows.next.classList.toggle("disabled",Math.ceil(t.ele.scrollLeft+t.containerWidth)>=Math.floor(t.trackWidth)||n),t.arrows.next.setAttribute("aria-disabled",t.arrows.next.classList.contains("disabled")))),t.slide=Math.round(t.ele.scrollLeft/t.itemWidth),t.page=Math.round(t.ele.scrollLeft/t.containerWidth);var i=t.slide+Math.floor(Math.floor(t.opt.slidesToShow)/2),o=Math.floor(t.opt.slidesToShow)%2?0:i+1;1===Math.floor(t.opt.slidesToShow)&&(o=0),t.ele.scrollLeft+t.containerWidth>=Math.floor(t.trackWidth)&&(t.page=t.dots?t.dots.children.length-1:0),[].forEach.call(t.slides,function(e,n){var r=e.classList,a=r.contains("visible"),s=t.ele.scrollLeft,l=t.ele.scrollLeft+t.containerWidth,c=t.itemWidth*n,d=c+t.itemWidth;[].forEach.call(r,function(e){/^left|right/.test(e)&&r.remove(e)}),r.toggle("active",t.slide===n),i===n||o&&o===n?r.add("center"):(r.remove("center"),r.add([n<i?"left":"right",Math.abs(n-(n<i?i:o||i))].join("-")));var u=Math.ceil(c)>=Math.floor(s)&&Math.floor(d)<=Math.ceil(l);r.toggle("visible",u),u!==a&&t.emit("slide-"+(u?"visible":"hidden"),{slide:n})}),t.dots&&[].forEach.call(t.dots.children,function(e,n){e.classList.toggle("active",t.page===n)}),e&&t.opt.scrollLock&&(clearTimeout(t.scrollLock),t.scrollLock=setTimeout(function(){clearTimeout(t.scrollLock),Math.abs(t.ele.scrollLeft/t.itemWidth-t.slide)>.02&&(t.mouseDown||t.trackWidth>t.containerWidth+t.ele.scrollLeft&&t.scrollItem(t.getCurrentSlide()))},t.opt.scrollLockDelay||250))},n.getCurrentSlide=function(){var e=this;return e.round(e.ele.scrollLeft/e.itemWidth)},n.scrollItem=function(e,t,n){n&&n.preventDefault();var i=this,o=e;++i.animate_id;var r,a=i.slide;if(!0===t)r=(e=Math.round(e*i.containerWidth/i.itemWidth))*i.itemWidth;else{if("string"==typeof e){var s="prev"===e;if(e=i.opt.slidesToScroll%1||i.opt.slidesToShow%1?i.getCurrentSlide():i.slide,s?e-=i.opt.slidesToScroll:e+=i.opt.slidesToScroll,i.opt.rewind){var l=i.ele.scrollLeft;e=s&&!l?i.slides.length:!s&&l+i.containerWidth>=Math.floor(i.trackWidth)?0:e}}e=Math.max(Math.min(e,i.slides.length),0),i.slide=e,r=i.itemWidth*e}return i.emit("scroll-item",{prevSlide:a,slide:e}),i.scrollTo(r,i.opt.duration*Math.abs(i.ele.scrollLeft-r),function(){i.updateControls(),i.emit("animated",{value:o,type:"string"==typeof o?"arrow":t?"dot":"slide"})}),!1},n.settingsBreakpoint=function(){var t=this,n=t._opt.responsive;if(n){n.sort(function(e,t){return t.breakpoint-e.breakpoint});for(var i=0;i<n.length;++i){var o=n[i];if(e.innerWidth>=o.breakpoint)return t.breakpoint!==o.breakpoint&&(t.opt=Object.assign({},t._opt,o.settings),t.breakpoint=o.breakpoint,!0)}}var r=0!==t.breakpoint;return t.opt=Object.assign({},t._opt),t.breakpoint=0,r},n.scrollTo=function(t,n,i){var o=this,r=(new Date).getTime(),a=o.animate_id,s=function(){var l=(new Date).getTime()-r;o.ele.scrollLeft=o.ele.scrollLeft+(t-o.ele.scrollLeft)*o.opt.easing(0,l,0,1,n),l<n&&a===o.animate_id?e.requestAnimationFrame(s):(o.ele.scrollLeft=t,i&&i.call(o))};e.requestAnimationFrame(s)},n.removeItem=function(e){var t=this;t.slides.length&&(t.track.removeChild(t.slides[e]),t.refresh(!0),t.emit("remove"))},n.addItem=function(e){var t=this;t.track.appendChild(e),t.refresh(!0),t.emit("add")},n.handleMouse=function(e){var t=this;t.mouseDown&&(t.isDrag=!0,t.ele.scrollLeft+=(t.mouseDown-e.clientX)*(t.opt.dragVelocity||3.3),t.mouseDown=e.clientX)},n.round=function(e){var t=1/(this.opt.slidesToScroll%1||1);return Math.round(e*t)/t},n.refresh=function(e){this.init(!0,e)},n.setOption=function(e,t){var n=this;n.breakpoint&&!t?n._opt.responsive.forEach(function(t){t.breakpoint===n.breakpoint&&(t.settings=Object.assign({},t.settings,e))}):n._opt=Object.assign({},n._opt,e),n.breakpoint=0,n.settingsBreakpoint()},n.destroy=function(){var t=this,n=t.ele.cloneNode(!0),i=function(e){e.removeAttribute("style"),[].forEach.call(e.classList,function(t){/^glider/.test(t)&&e.classList.remove(t)})};t.opt.skipTrack||(n.children[0].outerHTML=n.children[0].innerHTML),i(n),[].forEach.call(n.getElementsByTagName("*"),i),t.ele.parentNode.replaceChild(n,t.ele),t.event(e,"remove",{resize:t.resize}),t.emit("destroy")},n.emit=function(t,n){var i=this,o=new e.CustomEvent("glider-"+t,{bubbles:!i.opt.eventPropagate,detail:n});i.ele.dispatchEvent(o)},n.event=function(e,t,n){var i=e[t+"EventListener"].bind(e);Object.keys(n).forEach(function(e){i(e,n[e])})},t})?i.call(t,n,t,e):i)||(e.exports=o)},6241(e,t,n){"use strict";n(4502),n(7);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var a=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},this.defaults,n),this.container=t,this.beyondThreshold=this.container.querySelector(this.options.beyondThresholdSelector),this.beforeThreshold=document.querySelector(this.options.beforeThresholdSelector),this.scrollThreshold=this.options.scrollThreshold,this.hasUserNotification=this.beforeThreshold&&this.beforeThreshold.classList.contains("has-notification")},(t=[{key:"defaults",get:function(){return{beyondThresholdSelector:"#login-button-actionbar",beforeThresholdSelector:"#logged-in-button-header",scrollThreshold:200}}},{key:"init",value:function(){window.scrollY>this.scrollThreshold?this.beyondScrollThreshold():this.beforeScrollThreshold();var e=this;document.onscroll=function(t){!e.container.classList.contains("is-showing")&&window.scrollY>e.scrollThreshold?e.beyondScrollThreshold():e.container.classList.contains("is-showing")&&window.scrollY<e.scrollThreshold&&e.beforeScrollThreshold()}}},{key:"beyondScrollThreshold",value:function(){this.container.classList.add("is-showing"),this.hasUserNotification&&(this.beforeThreshold&&this.beforeThreshold.classList.remove("has-notification"),this.beyondThreshold&&!this.beyondThreshold.classList.contains("has-notification")&&this.beyondThreshold.classList.add("has-notification"))}},{key:"beforeScrollThreshold",value:function(){this.container.classList.remove("is-showing"),this.hasUserNotification&&(this.beforeThreshold&&this.beforeThreshold.classList.add("has-notification"),this.beyondThreshold&&this.beyondThreshold.classList.contains("has-notification")&&this.beyondThreshold.classList.remove("has-notification"))}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),s=n(8089),l=n(925);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,u(i.key),i)}}function u(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var h=n(8089).verifyUser,f="[data-is-like-article-button]",m=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1},t=[{key:"getDefaultTextEl",value:function(){return this._defaultTextEl||(this._defaultTextEl=document.createElement("span")),this._defaultTextEl}},{key:"getDefaultIconEl",value:function(){return this._defaultIconEl||(this._defaultIconEl=document.createElement("span")),this._defaultIconEl}},{key:"initialize",value:function(){this.initialized||(this.initialized=!0,this.buttons=document.querySelectorAll(f),this.attachEventListeners(),this.cleanupLiked(),this.render())}},{key:"update",value:function(){this.buttons=document.querySelectorAll(f),this.attachEventListeners(),this.render()}},{key:"attachEventListeners",value:function(){for(var e=0;e<this.buttons.length;e++)this.attachEventListener(this.buttons[e])}},{key:"render",value:function(){this.getLiked();for(var e=0;e<this.buttons.length;e++)this.setButtonState(this.buttons[e])}},{key:"attachEventListener",value:function(e){if(!e.isAttached){e.isAttached=!0,e.boundEventListener=this.onButtonClick.bind(this),e.addEventListener("click",e.boundEventListener);var t=e.closest(".inactive");t&&this.modifyClass("remove",t,"inactive")}}},{key:"setButtonState",value:function(e){var t=e.querySelector("[data-is-icon]")||this.getDefaultIconEl(),n=e.querySelector("[data-is-text]")||this.getDefaultTextEl(),i=window.websiteUser&&window.websiteUser.isUserLoggedIn,o=this.getLikedValue(i?e.dataset.id:null,+e.dataset.value),r=e.dataset.likeCount,a=null!==e.closest(".layout-vertical-short");0==o.newValue?(this.modifyClass("remove",t,e.dataset.likeIcon),this.modifyClass("add",t,e.dataset.unlikeIcon),a||(n.innerText=r&&r>9?this.thousandsFormat(Number(r)):e.dataset.likeTitle),e.dataset.value=0):(a||(n.innerText=r&&r>9?this.thousandsFormat(Number(r)):e.dataset.unlikeTitle),this.modifyClass("remove",t,e.dataset.unlikeIcon),this.modifyClass("add",t,e.dataset.likeIcon),e.dataset.value=1)}},{key:"thousandsFormat",value:function(e){for(var t=["","K","M","B","T"],n=0;e>=1e3&&n<t.length-1;)e/=1e3,n++;return e.toFixed(1).replace(/\.0$/,"")+t[n]}},{key:"modifyClass",value:function(e,t,n){for(var i=n.split(" "),o=0;o<i.length;o++)"add"===e?t.classList.add(i[o]):t.classList.remove(i[o])}},{key:"onButtonClick",value:function(e){var t=e.target.closest(f);t.disabled=!0;var n=+t.dataset.value,i={id:t.dataset.id,isLike:1===n?0:1,originalValue:n};if(!h(window.websiteUser,!0,"",!0,{triggeredFrom:"like",gaEventCategory:"like",valnetLoginAction:{apiCallCallback:"LikeArticle.submitLikeArticle",apiCallCallbackOptions:i}}))return t.disabled=!1,!1;this.submitLikeArticle(i).finally(function(){t.disabled=!1})}},{key:"fetchLikeArticle",value:function(e){var t=this;return fetch("/like-article-submit/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e)}).then(function(e){if(!e.ok)throw new Error;return e.json()}).then(function(){t.addToLiked(e.id,e.isLike,e.originalValue)})}},{key:"submitLikeArticle",value:function(e){var t=this;return this.fetchLikeArticle(e).then(function(){setTimeout(function(){t.render()})}).catch(function(){})}},{key:"getLiked",value:function(){var e=localStorage.getItem("likeArticleList");return e?JSON.parse(e||"{}"):{}}},{key:"setLiked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};localStorage.setItem("likeArticleList",JSON.stringify(e))}},{key:"addToLiked",value:function(e,t,n){var i=this.getLiked();i[e]={newValue:t,oldValue:n,createdAt:Date.now()},this.setLiked(i)}},{key:"getLikedValue",value:function(e,t){if(e){var n=this.getLiked()[e];if(n)return n}return{oldValue:t,newValue:t,defaultValue:!0,createdAt:Date.now()}}},{key:"removeLiked",value:function(e){var t=this.getLiked();delete t[e],this.setLiked(t)}},{key:"cleanupLiked",value:function(){for(var e=[],t=[],n=0;n<this.buttons.length;n++){var i=this.buttons[n];-1==e.indexOf(i.dataset.id)&&(e.push(i.dataset.id),t.push(+i.dataset.value))}for(var o=0;o<e.length;o++)this.getLikedValue(e[o],t[o]).newValue===t[o]&&this.removeLiked(e[o]);var r=this.getLiked();for(var a in r)(null==r[a].createdAt||r[a].createdAt<Date.now()-3e5)&&delete r[a];this.setLiked(r)}}],t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i)}}function g(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}m._instance=null,m.getInstance=function(){return m._instance||(m._instance=new m),m._instance};var y=n(8089).verifyUser,w="[data-is-like-tag-button]",b=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1},t=[{key:"getDefaultTextEl",value:function(){return this._defaultTextEl||(this._defaultTextEl=document.createElement("span")),this._defaultTextEl}},{key:"getDefaultIconEl",value:function(){return this._defaultIconEl||(this._defaultIconEl=document.createElement("span")),this._defaultIconEl}},{key:"initialize",value:function(){this.initialized||(this.initialized=!0,this.buttons=document.querySelectorAll(w),this.attachEventListeners(),this.cleanupLiked(),this.render())}},{key:"update",value:function(){this.buttons=document.querySelectorAll(w),this.attachEventListeners(),this.render()}},{key:"attachEventListeners",value:function(){for(var e=0;e<this.buttons.length;e++)this.attachEventListener(this.buttons[e])}},{key:"render",value:function(){this.getLiked();for(var e=0;e<this.buttons.length;e++)this.setButtonState(this.buttons[e])}},{key:"attachEventListener",value:function(e){if(!e.isAttached){e.isAttached=!0,e.boundEventListener=this.onButtonClick.bind(this),e.addEventListener("click",e.boundEventListener);var t=e.closest(".inactive");t&&this.modifyClass("remove",t,"inactive")}}},{key:"setButtonState",value:function(e){var t=e.querySelector("[data-is-like-tag-icon]")||this.getDefaultIconEl(),n=e.querySelector("[data-is-like-tag-text]")||this.getDefaultTextEl(),i=window.websiteUser&&window.websiteUser.isUserLoggedIn,o=this.getLikedValue(i?e.dataset.id:null,+e.dataset.value),r=e.dataset.likeCount;0==o.newValue?(this.modifyClass("remove",t,e.dataset.likeIcon),this.modifyClass("add",t,e.dataset.unlikeIcon),n.innerText=r>9?this.thousandsFormat(Number(r)):e.dataset.likeTitle,e.dataset.value=0):(n.innerText=r>9?this.thousandsFormat(Number(r)):e.dataset.unlikeTitle,this.modifyClass("remove",t,e.dataset.unlikeIcon),this.modifyClass("add",t,e.dataset.likeIcon),e.dataset.value=1)}},{key:"thousandsFormat",value:function(e){for(var t=["","K","M","B","T"],n=0;e>=1e3&&n<t.length-1;)e/=1e3,n++;return e.toFixed(1).replace(/\.0$/,"")+t[n]}},{key:"modifyClass",value:function(e,t,n){for(var i=n.split(" "),o=0;o<i.length;o++)"add"===e?t.classList.add(i[o]):t.classList.remove(i[o])}},{key:"onButtonClick",value:function(e){var t=e.target.closest(w);t.disabled=!0;var n=+t.dataset.value,i=t.closest("[data-list-name]"),o=null;i&&(o=i.dataset.listName);var r={id:t.dataset.id,isLike:1===n?0:1,originalValue:n,pushToTopOfList:!0,listName:o};y(window.websiteUser,!0,"",!0,{triggeredFrom:"like",gaEventCategory:"like",valnetLoginAction:{apiCallCallback:"LikeTag.submitLikeTag",apiCallCallbackOptions:r}})?(r.pushToTopOfList=!1,this.submitLikeTag(r).finally(function(){t.disabled=!1})):t.disabled=!1}},{key:"submitLikeTag",value:function(e){var t=this;return this.fetchLikeTag(e).then(function(){setTimeout(function(){t.render()})}).catch(function(){})}},{key:"fetchLikeTag",value:function(e){var t=this;return fetch("/like-tag-submit/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e)}).then(function(e){if(!e.ok)throw new Error;return e.json()}).then(function(){t.addToLiked(e.id,e.isLike,e.originalValue),e.pushToTopOfList&&e.listName&&e.id&&(document.cookie="".concat(e.listName,"=").concat(e.id))})}},{key:"getLiked",value:function(){var e=localStorage.getItem("likeTagList");return e?JSON.parse(e||"{}"):{}}},{key:"setLiked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};localStorage.setItem("likeTagList",JSON.stringify(e))}},{key:"addToLiked",value:function(e,t,n){var i=this.getLiked();i[e]={newValue:t,oldValue:n,createdAt:Date.now()},this.setLiked(i)}},{key:"getLikedValue",value:function(e,t){if(e){var n=this.getLiked()[e];if(n)return n}return{oldValue:t,newValue:t,defaultValue:!0,createdAt:Date.now()}}},{key:"removeLiked",value:function(e){var t=this.getLiked();delete t[e],this.setLiked(t)}},{key:"cleanupLiked",value:function(){for(var e=[],t=[],n=0;n<this.buttons.length;n++){var i=this.buttons[n];-1==e.indexOf(i.dataset.id)&&(e.push(i.dataset.id),t.push(+i.dataset.value))}for(var o=0;o<e.length;o++)this.getLikedValue(e[o],t[o]).newValue===t[o]&&this.removeLiked(e[o]);var r=this.getLiked();for(var a in r)(null==r[a].createdAt||r[a].createdAt<Date.now()-3e5)&&delete r[a];this.setLiked(r)}}],t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,L(i.key),i)}}function L(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=S(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}b._instance=null,b.getInstance=function(){return b._instance||(b._instance=new b),b._instance};var E=n(8089).verifyUser,C="[data-is-like-mod-button]",T=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1},t=[{key:"getDefaultTextEl",value:function(){return this._defaultTextEl||(this._defaultTextEl=document.createElement("span")),this._defaultTextEl}},{key:"getDefaultIconEl",value:function(){return this._defaultIconEl||(this._defaultIconEl=document.createElement("span")),this._defaultIconEl}},{key:"initialize",value:function(){this.initialized||(this.initialized=!0,this.buttons=document.querySelectorAll(C),this.attachEventListeners(),this.cleanupLiked(),this.render())}},{key:"update",value:function(){this.buttons=document.querySelectorAll(C),this.attachEventListeners(),this.render()}},{key:"attachEventListeners",value:function(){for(var e=0;e<this.buttons.length;e++)this.attachEventListener(this.buttons[e])}},{key:"render",value:function(){this.getLiked();for(var e=0;e<this.buttons.length;e++)this.setButtonState(this.buttons[e])}},{key:"attachEventListener",value:function(e){if(!e.isAttached){e.isAttached=!0,e.boundEventListener=this.onButtonClick.bind(this),e.addEventListener("click",e.boundEventListener);var t=e.closest(".inactive");t&&this.modifyClass("remove",t,"inactive")}}},{key:"setButtonState",value:function(e){var t=e.querySelector("[data-is-icon]")||this.getDefaultIconEl(),n=e.querySelector("[data-is-text]")||this.getDefaultTextEl(),i=window.websiteUser&&window.websiteUser.isUserLoggedIn,o=this.getLikedValue(i?e.dataset.id:null,+e.dataset.value),r=e.dataset.likeCount;0==o.newValue?(this.modifyClass("remove",t,e.dataset.likeIcon),this.modifyClass("add",t,e.dataset.unlikeIcon),n.innerText=r>9?this.thousandsFormat(Number(r)):e.dataset.likeTitle,e.dataset.value=0):(n.innerText=r>9?this.thousandsFormat(Number(r)):e.dataset.unlikeTitle,this.modifyClass("remove",t,e.dataset.unlikeIcon),this.modifyClass("add",t,e.dataset.likeIcon),e.dataset.value=1)}},{key:"thousandsFormat",value:function(e){for(var t=["","K","M","B","T"],n=0;e>=1e3&&n<t.length-1;)e/=1e3,n++;return e.toFixed(1).replace(/\.0$/,"")+t[n]}},{key:"modifyClass",value:function(e,t,n){for(var i=n.split(" "),o=0;o<i.length;o++)"add"===e?t.classList.add(i[o]):t.classList.remove(i[o])}},{key:"onButtonClick",value:function(e){var t=e.target.closest(C);t.disabled=!0;var n=+t.dataset.value,i=t.closest("[data-list-name]"),o=null;i&&(o=i.dataset.listName);var r={id:t.dataset.id,isLike:1===n?0:1,originalValue:n,pushToTopOfList:!0,listName:o};E(window.websiteUser,!0,"",!0,{triggeredFrom:"like",gaEventCategory:"like",valnetLoginAction:{apiCallCallback:"LikeMod.submitLikeMod",apiCallCallbackOptions:r}})?(r.pushToTopOfList=!1,this.submitLikeMod(r).finally(function(){t.disabled=!1})):t.disabled=!1}},{key:"submitLikeMod",value:function(e){var t=this;return this.fetchLikeMod(e).then(function(){setTimeout(function(){t.render()})}).catch(function(){})}},{key:"fetchLikeMod",value:function(e){var t=this;return fetch("/like-mod-submit/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e)}).then(function(e){if(!e.ok)throw new Error;return e.json()}).then(function(){t.addToLiked(e.id,e.isLike,e.originalValue),e.pushToTopOfList&&e.listName&&e.id&&(document.cookie="".concat(e.listName,"=").concat(e.id))})}},{key:"getLiked",value:function(){var e=localStorage.getItem("likeModList");return e?JSON.parse(e||"{}"):{}}},{key:"setLiked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};localStorage.setItem("likeModList",JSON.stringify(e))}},{key:"addToLiked",value:function(e,t,n){var i=this.getLiked();i[e]={newValue:t,oldValue:n,createdAt:Date.now()},this.setLiked(i)}},{key:"getLikedValue",value:function(e,t){if(e){var n=this.getLiked()[e];if(n)return n}return{oldValue:t,newValue:t,defaultValue:!0,createdAt:Date.now()}}},{key:"removeLiked",value:function(e){var t=this.getLiked();delete t[e],this.setLiked(t)}},{key:"cleanupLiked",value:function(){for(var e=[],t=[],n=0;n<this.buttons.length;n++){var i=this.buttons[n];-1==e.indexOf(i.dataset.id)&&(e.push(i.dataset.id),t.push(+i.dataset.value))}for(var o=0;o<e.length;o++)this.getLikedValue(e[o],t[o]).newValue===t[o]&&this.removeLiked(e[o]);var r=this.getLiked();for(var a in r)(null==r[a].createdAt||r[a].createdAt<Date.now()-3e5)&&delete r[a];this.setLiked(r)}}],t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function I(e){var t=e.idModule,n=e.idTag,i=new FormData;i.append("idModule",t),i.append("idTag",n);var o=new XMLHttpRequest;o.open("POST","/modules-save/",!0),o.onreadystatechange=function(){4===o.readyState&&o.response&&(JSON.parse(o.response).success&&document.querySelectorAll('.add-to-list-interaction-tag[data-id-module="'.concat(t,'"][data-id-tag="').concat(n,'"]')).forEach(function(e){e.classList.add("is-selected");var t=e.querySelector("i.icon");t&&(t.classList.add("i-check"),t.classList.remove("i-plus"))}),o=!1)},o.send(i)}function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,q(i.key),i)}}function q(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=A(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}T._instance=null,T.getInstance=function(){return T._instance||(T._instance=new T),T._instance};var x=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){if(t.infinityScrollInstance)return t.infinityScrollInstance;this.reachedEnd=!1,this.isBusy=!1,this.options=Object.assign({apiEndpoint:"",apiOptions:{method:"GET"},chunkSize:1,apiExtraParams:{},nbItemsToIgnore:0,nbItemsClassSelector:"",maxItems:0,onUpdated:function(e){},shouldLoad:function(e,t){return t.bottom<2*window.innerHeight},renderData:function(e,t){return t},isEndReached:function(e,t){return!t}},n),this.container=t,this.container.infinityScrollInstance=this,this._boundTick=this.tick.bind(this),this.queueNextTick()}},(t=[{key:"doLoad",value:function(){var e=this.container.getBoundingClientRect();this.options.shouldLoad(this,e)&&this.fetchItems()}},{key:"onLoaded",value:function(e){this.options.isEndReached(this,e)&&(this.reachedEnd=!0),e&&this.container.insertAdjacentHTML("beforeend",this.options.renderData(this,e)),this.isBusy=!1,this.updateContainerState()}},{key:"updateContainerState",value:function(){this.reachedEnd&&this.container.classList.add("has-reached-end"),this.isBusy?this.container.classList.add("is-loading"):this.container.classList.remove("is-loading"),this.options.onUpdated&&this.options.onUpdated(this)}},{key:"fetchItems",value:function(){var e=this;if(!this.isBusy&&!this.reachedEnd){var t=this.container.children.length;if(this.options.nbItemsClassSelector&&(t=this.container.querySelectorAll(".".concat(this.options.nbItemsClassSelector)).length),this.options.nbItemsToIgnore>0&&(t-=this.options.nbItemsToIgnore),0==Math.ceil(t/this.options.chunkSize)||this.options.maxItems>0&&t>=this.options.maxItems)return this.reachedEnd=!0,void this.updateContainerState();this.isBusy=!0,this.updateContainerState();var n=new URLSearchParams(this.options.apiExtraParams),i=Math.ceil(t/this.options.chunkSize)+1;n.set("page",i),n.set("limit",this.options.chunkSize),fetch("".concat(this.options.apiEndpoint,"?").concat(n.toString()),this.options.apiOptions).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).then(function(t){e.onLoaded(t)}).catch(function(t){e.isBusy=!1,e.reachedEnd=!0,e.updateContainerState()})}}},{key:"isContainerRendered",value:function(){return!(!this.container||!this.container.offsetParent)}},{key:"queueNextTick",value:function(){var e;this.reachedEnd||(e=this._boundTick,window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,16))}},{key:"tick",value:function(){this.isBusy?this.queueNextTick():this.isContainerRendered()?(this.updateContainerState(),this.doLoad(),this.queueNextTick()):this.queueNextTick()}}])&&P(e.prototype,t),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,O(i.key),i)}}function O(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=B(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}var j=function(){return e=function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t._shareButton)return t._shareButton;this.element=t,t._shareButton=this,this.options=Object.assign({onCopySuccess:function(){var e=n.element.getAttribute("data-success"),t=n.element.textContent;n.element.classList.add("success"),n.element.textContent=e||t,setTimeout(function(){n.element.classList.remove("success"),n.element.textContent=t},1e3)},onCopyError:function(){n.element.classList.add("error"),setTimeout(function(){n.element.classList.remove("error")},1e3)}},i),this.initialize()},(t=[{key:"initialize",value:function(){this.element.addEventListener("click",this.onClick.bind(this))}},{key:"onClick",value:function(){try{var e=this.options.prefixWithDomain?window.location.origin+this.element.getAttribute("data-url"):this.element.getAttribute("data-url");navigator.clipboard.writeText(e),this.options.onCopySuccess(this)}catch(e){this.options.onCopyError(this)}}}])&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-is-share-button]",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.querySelectorAll(e);if(n&&0!==n.length)for(var i=0;i<n.length;i++)new j(n[i],Object.assign({prefixWithDomain:"true"===n[i].getAttribute("data-prefix-with-domain")},t))}var M=n(3768);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,V(i.key),i)}}function V(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=R(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}var D=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t._swipeHandler&&t._swipeHandler.detach(),this._boundEvents={},this.element=t,this.swipeStartAt=0,this.deltaX=0,this.deltaY=0,this.options=Object.assign({maxSwipeTime:500,threshold:80,onSwipeRight:function(){},onSwipeLeft:function(){},onSwipeUp:function(){},onSwipeDown:function(){}},n),this._init()},(t=[{key:"_init",value:function(){this._boundEvents.touchstart=this._handleTouchStart.bind(this),this._boundEvents.touchend=this._handleTouchEnd.bind(this),this._boundEvents.touchmove=this._handleTouchMove.bind(this),this.element.addEventListener("touchstart",this._boundEvents.touchstart),this.element.addEventListener("touchmove",this._boundEvents.touchmove),this.element.addEventListener("touchend",this._boundEvents.touchend),this.element._swipeHandler=this}},{key:"_handleTouchStart",value:function(e){this.deltaX=0,this.deltaY=0,this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY,this.swipeStartAt=Date.now()}},{key:"_handleTouchMove",value:function(e){this.deltaX=e.touches[0].clientX-this.startX,this.deltaY=e.touches[0].clientY-this.startY}},{key:"_handleTouchEnd",value:function(e){Date.now()-this.swipeStartAt<this.options.maxSwipeTime&&(Math.abs(this.deltaX)>this.options.threshold&&(this.deltaX>0?this.options.onSwipeRight():this.options.onSwipeLeft()),Math.abs(this.deltaY)>this.options.threshold&&(this.deltaY>0?this.options.onSwipeDown():this.options.onSwipeUp())),this.deltaX=0,this.deltaY=0}},{key:"detach",value:function(){this.element.removeEventListener("touchstart",this._boundEvents.touchstart),this.element.removeEventListener("touchmove",this._boundEvents.touchmove),this.element.removeEventListener("touchend",this._boundEvents.touchend),this.element._swipeHandler=null}}])&&z(e.prototype,t),n&&z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();window.SwipeHandler=D;n(965);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,H(i.key),i)}}function H(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=U(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:t+""}var W=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isOpen=!1,this.options=Object.assign({drawer:null,toggleButton:null,alternateButtons:null,insideContainer:null,openClass:"is-open",onToggle:function(e,t){e.toggle(t)},customData:{}},t),this.options.toggleButton||this.options.alternateButtons&&this.options.alternateButtons.length>0&&(this.options.toggleButton=this.options.alternateButtons[0]),this.options.drawer&&this.options.toggleButton?this.options.drawer._drawerInstance||this.options.toggleButton._drawerInstance||(this.options.drawer._drawerInstance=this,this.options.toggleButton._drawerInstance=this,this.attachEvents()):console.log("%c  Drawer: %cMissing elements!!! ","background: red; color: black; font-weight: bold; padding: 5px","color: white; text-transform: italic; background: red; padding: 5px;")},t=[{key:"attachEvents",value:function(){if(this.toggleButtonClickHandler=this.onToggle.bind(this),this.onOutsideClickHandler=this.onOutsideClick.bind(this),this.options.toggleButton&&this.options.toggleButton.addEventListener("click",this.toggleButtonClickHandler),this.options.alternateButtons)for(var e=0;e<this.options.alternateButtons.length;e++)this.options.alternateButtons[e].addEventListener("click",this.toggleButtonClickHandler);document.addEventListener("click",this.onOutsideClickHandler)}},{key:"detachEvents",value:function(){this.options.toggleButton&&this.options.toggleButton.removeEventListener("click",this.toggleButtonClickHandler),document.removeEventListener("click",this.onOutsideClickHandler)}},{key:"updateToggleButtonState",value:function(){this.options.drawer.classList.contains(this.options.openClass)?(this.options.toggleButton.classList.add(this.options.openClass),this.isOpen=!0):(this.options.toggleButton.classList.remove(this.options.openClass),this.isOpen=!1)}},{key:"onToggle",value:function(e){var t=!this.isOpen;this.options.onToggle(this,t)}},{key:"toggle",value:function(e){1==e?("none"==this.options.drawer.style.display&&(this.options.drawer.style.display="block"),this.options.drawer.classList.add(this.options.openClass)):("block"==this.options.drawer.style.display&&(this.options.drawer.style.display="none"),this.options.drawer.classList.remove(this.options.openClass)),this.updateToggleButtonState()}},{key:"onOutsideClick",value:function(e){if(this.isOpen){var t=this.options.insideContainer&&this.options.insideContainer.contains(e.target)||this.options.insideContainer===e.target,n=this.options.toggleButton.contains(e.target)||this.options.toggleButton===e.target,i=this.options.drawer.contains(e.target)||this.options.drawer===e.target,o=!1;if(this.options.alternateButtons)for(var r=0;r<this.options.alternateButtons.length;r++){var a=this.options.alternateButtons[r];if(a.contains(e.target)||a===e.target){o=!0;break}}n||i||o||t||("block"==this.options.drawer.style.display&&(this.options.drawer.style.display="none"),this.options.drawer.classList.remove(this.options.openClass),this.updateToggleButtonState())}}}],t&&F(e.prototype,t),n&&F(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Y(i.key),i)}}function Y(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Q(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Q(t)?t:t+""}var G=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endpoint=t,this.options=Object.assign({},this.defaults,n)},t=[{key:"defaults",get:function(){return{currentAbortController:null,beforeRequest:function(){console.log("before")},onResponse:function(e){console.log("onResponse",e)},onError:function(e){console.error("onError",e)}}}},{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this;this.options.currentAbortController&&this.options.currentAbortController.abort(),this.options.currentAbortController=new AbortController;var n=this.options.currentAbortController.signal;this.options.beforeRequest(),fetch(e,{signal:n}).then(function(e){return e.json()}).then(function(e){return t.options.onResponse(e)}).then(function(){return t.options.afterResponse()}).catch(function(e){return t.options.onError(e)})})}],t&&J(e.prototype,t),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function $(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,K(i.key),i)}}function K(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=X(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X(t)?t:t+""}var Z=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},this.defaults,t),this.currentPage=this.options.currentPage,this.totalPages=this.options.totalPages,this.totalItems=this.options.totalItems,this.loadedPages=1,this.calculateTotalPages()},(t=[{key:"defaults",get:function(){return{pageSize:10,currentPage:1,totalPages:1,totalItems:0,onPreviousPage:function(e,t){console.log("Page changed to ".concat(t))},onNextPage:function(e,t){console.log("Page changed to ".concat(t))},onOutOfBounds:function(e,t){console.log("Page changed to ".concat(t))}}}},{key:"calculateTotalPages",value:function(){this.options.totalItems>0&&(this.totalPages=Math.ceil(this.options.totalItems/this.options.pageSize))}},{key:"direction",value:function(e){return e>this.currentPage?"up":"down"}},{key:"isNextDirection",value:function(e){return"up"===this.direction(e)}},{key:"isPreviousDirection",value:function(e){return"down"===this.direction(e)}},{key:"setCurrentPage",value:function(e){if(e>=1&&e<=this.totalPages){var t=this.isNextDirection(e);this.currentPage=e,t?this.options.onNextPage&&this.options.onNextPage(this,e):this.options.onPreviousPage&&this.options.onPreviousPage(this,e)}else this.options.onOutOfBounds&&this.options.onOutOfBounds(this,e)}},{key:"setTotalItems",value:function(e){this.totalItems=e,this.calculateTotalPages()}},{key:"nextPage",value:function(){this.setCurrentPage(Math.min(this.currentPage+1,this.totalPages))}},{key:"previousPage",value:function(){this.setCurrentPage(Math.max(this.currentPage-1,1))}},{key:"getCurrentPage",value:function(){return this.currentPage}},{key:"firstPage",value:function(){this.setCurrentPage(1)}},{key:"lastPage",value:function(){this.setCurrentPage(this.totalPages)}},{key:"getPageItems",value:function(e){var t=(this.currentPage-1)*this.options.pageSize,n=t+this.options.pageSize;return e.slice(t,n)}},{key:"getStart",value:function(){return(this.currentPage-1)*this.options.pageSize}},{key:"getEnd",value:function(){return this.currentPage*this.options.pageSize}},{key:"isLastPage",value:function(){return this.currentPage===this.totalPages}},{key:"isFirstPage",value:function(){return 1===this.currentPage}}])&&$(e.prototype,t),n&&$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function ie(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,oe(i.key),i)}}function oe(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=ee(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ee(t)?t:t+""}var re=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},this.defaults,n),this.container=t,this.content=this.container.querySelector(this.options.contentId),this.prevButton=this.container.querySelector(this.options.prevButtonId),this.nextButton=this.container.querySelector(this.options.nextButtonId),this.slider=this.container.querySelector(this.options.sliderId),this.hideButtons=this.options.hideButtons,this.pageItemId=this.options.pageItemId,this.disablingDelay=this.options.disablingDelay,this.fetcher=this.createFetcher(),this.paginator=this.createPaginator(),this.scrollTimeout=this.options.scrollTimeout,this.onSpecificInit=this.options.onSpecificInit,this.onSpecificAfterResponse=this.options.onSpecificAfterResponse},t=[{key:"defaults",get:function(){return{apiExtraParams:{},useSwipe:!0,contentId:".w-slide-list",prevButtonId:".slide-prev",nextButtonId:".slide-next",sliderId:".w-content-slider-pagination",pageItemId:".slide-list-page",hideButtons:!0,disablingDelay:200,scrollTimeout:null,onSpecificInit:function(e){console.log("Specific initialization")},onSpecificAfterResponse:function(e){console.log("Specific handling after response")},onResponseProcess:function(e,t){return t.defaultResponseProcessor(e,t)},onCountAllItems:function(e){return e.defaultItemCounter(e)}}}},{key:"slideWidth",get:function(){return this.content.clientWidth}},{key:"pageSize",get:function(){return this.content.dataset.pageSize}},{key:"totalItems",get:function(){return this.content.dataset.itemsCount}},{key:"loadedPagesCount",get:function(){return this.content.querySelectorAll(this.pageItemId).length}},{key:"currentPage",get:function(){return parseInt(this.content.dataset.page)},set:function(e){this.content.dataset.page=e}},{key:"lastPageBlock",get:function(){return this.content.querySelectorAll(this.pageItemId)[this.paginator.currentPage]}},{key:"pageBlocks",get:function(){return this.content.querySelectorAll(this.pageItemId)}},{key:"endpoint",get:function(){return this.content.dataset.endpoint}},{key:"togglePrevButton",get:function(){this.prevButton.toggleAttribute("disabled")}},{key:"prevButtonDisplay",set:function(e){this.prevButton.style.display=e}},{key:"toggleNextButton",get:function(){this.nextButton.toggleAttribute("disabled")}},{key:"nextButtonDisplay",set:function(e){this.nextButton.style.display=e}},{key:"countLoadedItems",get:function(){return this.options.onCountAllItems(this)}},{key:"defaultItemCounter",value:function(e){for(var t=e.content.querySelectorAll(e.options.pageItemId),n=0,i=0;i<t.length;i++)n+=t[i].children.length;return n}},{key:"defaultResponseProcessor",value:function(e,t){var n="";e&&e.html&&(n=e.html);var i=document.createElement("div");i.style.visibility="hidden",i.style.maxWidth="0",i.style.maxHeight="0",i.style.position="absolute",i.innerHTML=n,document.body.appendChild(i);for(var o=0,r=!0,a=i.querySelectorAll(t.options.pageItemId),s=0;s<a.length;s++)o+=a[s].children.length;return(0===o||Math.ceil(o/t.pageSize)*t.pageSize>o)&&(r=!1),i.parentElement.removeChild(i),{shouldContinueLoading:r,countAddedItems:o,html:n}}},{key:"getScrollendSupport",value:function(){if(void 0===this.isScrollEndSupported||null===this.isScrollEndSupported){var e=document.createElement("div");this.isScrollEndSupported="onscrollend"in e}return this.isScrollEndSupported}},{key:"getBlocksByTarget",value:function(e){return this.content.querySelectorAll(e)}},{key:"appendContent",value:function(e){this.content.insertAdjacentHTML("beforeend",e)}},{key:"prependContent",value:function(e){this.content.insertAdjacentHTML("afterbegin",e)}},{key:"isPageAlreadyLoaded",value:function(e){return e<=this.loadedPagesCount}},{key:"createFetcher",value:function(){var e=this,t=this;return new G(this.endpoint,{beforeRequest:function(){t.disableButtons()},onResponse:function(n){var i=e.options.onResponseProcess(n,t);i.html&&t.appendContent(i.html),i.shouldContinueLoading||(t.paginator.options.totalItems=t.countLoadedItems,t.paginator.calculateTotalPages(),t.paginator.isLastPage()&&t.slider&&t.slider.classList.add("last-page"))},afterResponse:function(){t.onSpecificAfterResponse(t),t.hideButtons&&(t.paginator.isLastPage()&&(t.nextButtonDisplay="none"),t.paginator.isFirstPage()||(t.prevButtonDisplay="")),t.enableButtons()}})}},{key:"createPaginator",value:function(){var e=this;return new Z({pageSize:this.pageSize,totalItems:this.totalItems,currentPage:this.currentPage,onNextPage:function(t,n){e.scrollToNextPage(),t.isLastPage()||e.isPageAlreadyLoaded(n+1)?(e.hideButtons&&(e.paginator.isLastPage()&&(e.nextButtonDisplay="none"),e.paginator.isFirstPage()||(e.prevButtonDisplay="")),setTimeout(function(){e.enableButtons()},200)):e.fetchPage(n+1),t.isLastPage()&&e.slider&&e.slider.classList.add("last-page"),e.currentPage=n},onPreviousPage:function(t,n){e.scrollToPreviousPage(),e.hideButtons&&(t.isFirstPage()&&(e.prevButtonDisplay="none"),t.isLastPage()||(e.nextButtonDisplay="")),e.slider&&e.slider.classList.remove("last-page"),e.currentPage=n,setTimeout(function(){e.enableButtons()},200)}})}},{key:"fetchPage",value:function(e){try{var t=new URL(this.endpoint),n=new URLSearchParams(Object.assign({},this.options.apiExtraParams,{page:e,pageSize:this.pageSize}));t.search=n.toString(),this.fetcher.fetch(t)}catch(e){console.error(e)}}},{key:"scrollToNextPage",value:function(){var e=this.paginator.getCurrentPage()-1,t=this.pageBlocks[e];t&&t.classList.add("current-page"),this.resetScrollTimout(),this.clearListeners();var n=this.pageBlocks[e-2];n?(n.classList.add("scroll"),n.addEventListener("transitionend",this.setCurrentPage.bind(this),{once:!0})):(this.getScrollendSupport()&&this.content.addEventListener("scrollend",this.setCurrentPage.bind(this),{once:!0}),this.content.scrollBy({left:this.slideWidth,behavior:"smooth"}));var i=this.pageBlocks[e+1];i&&i.classList.remove("scroll")}},{key:"scrollToPreviousPage",value:function(){var e=this.paginator.getCurrentPage()-1,t=this.pageBlocks[e];t&&t.classList.add("current-page"),this.resetScrollTimout(),this.clearListeners();var n=this.pageBlocks[e-1];n?(n.classList.remove("scroll"),n.addEventListener("transitionend",this.setCurrentPage.bind(this),{once:!0})):(this.getScrollendSupport()&&this.content.addEventListener("scrollend",this.setCurrentPage.bind(this),{once:!0}),this.content.scrollBy({left:-this.slideWidth,behavior:"smooth"}));var i=this.pageBlocks[e+2];i&&i.classList.add("scroll")}},{key:"setCurrentPage",value:function(){for(var e=this.paginator.getCurrentPage()-1,t=0;t<this.pageBlocks.length;t++)t==e?this.pageBlocks[t].classList.add("current-page"):this.pageBlocks[t].classList.remove("current-page")}},{key:"clearListeners",value:function(e){var t,n=te(this.pageBlocks);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.removeEventListener("scrollend",this.setCurrentPage),i.removeEventListener("transitionend",this.setCurrentPage)}}catch(e){n.e(e)}finally{n.f()}}},{key:"resetScrollTimout",value:function(){clearTimeout(this.scrollTimeout)}},{key:"enableButtons",value:function(){this.nextButton.disabled=!1,this.prevButton.disabled=!1}},{key:"disableButtons",value:function(){this.nextButton.disabled=!0,this.prevButton.disabled=!0}},{key:"toggleButtons",value:function(){this.toggleNextButton,this.togglePrevButton}},{key:"next",value:function(){this.nextButton.disabled||(this.disableButtons(),this.paginator.nextPage())}},{key:"prev",value:function(){this.prevButton.disabled||(this.disableButtons(),this.paginator.previousPage())}},{key:"attachSwipeHandler",value:function(){var e=this;new D(this.container,{onSwipeLeft:function(){e.next()},onSwipeRight:function(){e.prev()}})}},{key:"init",value:function(){var e=this,t=this.pageBlocks[0];t&&t.classList.add("current-page"),this.getScrollendSupport()||this.content.addEventListener("scroll",function(){e.resetScrollTimout(),e.scrollTimeout=setTimeout(function(){e.setCurrentPage()},150)});var n=this;this.onSpecificInit(n),this.options.useSwipe&&this.attachSwipeHandler(),this.nextButton&&this.nextButton.addEventListener("click",function(e){n.next()}),this.prevButton&&this.prevButton.addEventListener("click",function(e){n.prev()})}}],t&&ie(e.prototype,t),n&&ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,le(i.key),i)}}function le(e){var t=function(e,t){if("object"!=ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=ae(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ae(t)?t:t+""}var ce=function(){return e=function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.oneFocusQuickReviewCarouselInstance)return t.oneFocusQuickReviewCarouselInstance;this.element=t,this.loadingBusy=!1,this.animationBusy=!1,this.pointer=0,this.options=Object.assign({nextPageThreshold:1,apiOptions:{method:"GET"},apiEndpoint:"",pageSize:1,occlusion:1,fullOcclusion:1,animationCooldown:300,apiExtraParams:{},focusChild:0,hiddenClass:"hidden",inFocusClass:"in-focus",firstElements:[],lastElements:[],firstElementsOffset:null,lastElementsOffset:null,isEndReached:function(e,t){return n.isEndReached(e,t)},beforeLoad:function(e,t,n){},onLoaded:function(e,t){},onShifted:function(e){}},i),this.beginOffsetLimit=0,this.endOffsetLimit=0,this.options.firstElements&&this.options.firstElements.length>0&&(this.beginOffsetLimit=this.options.firstElements.length),this.options.lastElements&&this.options.lastElements.length>0&&(this.endOffsetLimit=this.options.lastElements.length),null==this.options.firstElementsOffset&&null==this.options.firstElementsOffset||(this.beginOffsetLimit=this.options.firstElementsOffset),null==this.options.lastElementsOffset&&null==this.options.lastElementsOffset||(this.endOffsetLimit=this.options.lastElementsOffset),this.init(),t.oneFocusQuickReviewCarouselInstance=this},t=[{key:"updateFirstAndLastElements",value:function(){for(var e=this.options.firstElements,t=this.options.lastElements,n=e.length-1;n>=0;n--)this.element.children[n]!=e[n]&&this.element.insertBefore(e[n],this.element.children[0]);for(var i=0;i<t.length;i++)this.element.children[this.element.children.length-t.length+i]!=t[i]&&this.element.appendChild(t[i])}},{key:"focusChild",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(!this.animationBusy){this.animationBusy=!0,setTimeout(function(){e.animationBusy=!1},this.options.animationCooldown),t<this.beginOffsetLimit&&(t=this.beginOffsetLimit),t>=this.element.children.length-this.endOffsetLimit&&(t=this.element.children.length-this.endOffsetLimit-1),this.pointer=t;var n=this.element.children.length-this.beginOffsetLimit-this.endOffsetLimit-this.options.nextPageThreshold;this.pointer>=n&&this.fetchMore(),this.updateState()}}},{key:"updateInFocus",value:function(){for(var e=0;e<this.element.children.length;e++)this.element.children[e].classList.remove(this.options.inFocusClass);this.element.children[this.pointer].classList.add(this.options.inFocusClass)}},{key:"init",value:function(){this.updateState(),this.focusChild(this.options.focusChild+this.beginOffsetLimit)}},{key:"jumpTo",value:function(e){this.focusChild(Array.from(this.element.children).indexOf(e))}},{key:"prev",value:function(){this.focusChild(this.pointer-1)}},{key:"next",value:function(){this.focusChild(this.pointer+1)}},{key:"isEndReached",value:function(e,t){return!t||!t.html||""==t.html.replace(/\s|\n|\r/gm,"")}},{key:"onLoaded",value:function(e){this.reachedEnd=this.options.isEndReached(this,e),e.html&&this.element.insertAdjacentHTML("beforeend",e.html),this.options.onLoaded(this,e)}},{key:"updateChildrenStates",value:function(){for(var e=this.pointer,t=e-this.options.occlusion,n=e+this.options.occlusion,i=t-this.options.fullOcclusion,o=n+this.options.fullOcclusion,r=0;r<this.element.children.length;r++)this.element.children[r].style.display=r<i||r>o?"none":"",r<t||r>n?this.element.children[r].classList.add(this.options.hiddenClass):this.element.children[r].classList.remove(this.options.hiddenClass),r==e?this.element.children[r].classList.add("in-focus"):this.element.children[r].classList.remove("in-focus")}},{key:"updateState",value:function(){this.updateFirstAndLastElements(),this.updateChildrenStates(),this.updateInFocus();var e=this.pointer;this.options.onShifted(this,{focusedIndex:e,isAtBeginning:e<=this.beginOffsetLimit,isAtEnd:e>=this.element.children.length-this.endOffsetLimit-1})}},{key:"fetchMore",value:function(){var e=this;if(!this.loadingBusy&&!this.reachedEnd){var t=new URLSearchParams(this.options.apiExtraParams),n=Math.ceil((this.element.children.length-this.beginOffsetLimit-this.endOffsetLimit)/this.options.pageSize)+1;t.set("page",n),t.set("pageSize",this.options.pageSize),this.loadingBusy=!0,this.options.beforeLoad(this,t,this.element),fetch("".concat(this.options.apiEndpoint,"?").concat(t.toString()),this.options.apiOptions).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).then(function(t){e.onLoaded(t)}).catch(function(t){e.reachedEnd=!0}).finally(function(){e.loadingBusy=!1,e.updateState()})}}}],t&&se(e.prototype,t),n&&se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,he(i.key),i)}}function he(e){var t=function(e,t){if("object"!=de(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=de(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==de(t)?t:t+""}var fe=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.attribute,i=void 0===n?"data-stnl":n,o=t.sentinel,r=void 0===o?window.websiteSentinel:o,a=t.once,s=void 0!==a&&a,l=t.checkIfUserVerified,c=void 0!==l&&l,d=t.category,u=void 0===d?"Click Event Tracking":d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attribute=i,this.sentinel=r,this.category=u,this.once=s,this.checkIfUserVerified=c,this.eventType="ontouchstart"in window?"pointerup":"click",this.customEventType="sentinel:relay:tracker",this.handleEvent=this.handleEvent.bind(this),this.handleCustomEvent=this.handleCustomEvent.bind(this),this.userVerified=!0},t=[{key:"init",value:function(){var e,t=this;return"function"!=typeof(null===(e=this.sentinel)||void 0===e?void 0:e.sendEvent)?(console.warn("sentinel-event-tracking: websiteSentinel is not properly defined"),!1):(window.addEventListener(this.eventType,this.handleEvent,{passive:!0}),window.addEventListener(this.customEventType,this.handleCustomEvent,{passive:!0}),window.addEventListener("valnet_ui_event:user_not_verified",function(){console.warn("User is not verified. Stopping sentinel events."),t.userVerified=!1},{passive:!0}),window.sentinelTracking=this,!0)}},{key:"handleEvent",value:function(e){var t=this;if(!this.checkIfUserVerified||this.userVerified){var n=this.findTrackingElement(e.target);if(n)try{var i=(0,M.dC)(e.target,"label[for]",2),o=null,r=!1;if(i){var a=i.getAttribute("for");if(a){var s=document.getElementById(a);s&&"checkbox"==s.getAttribute("type")&&(r=(o=s)&&o.checked||!1)}}var l=JSON.parse(decodeURIComponent(n.getAttribute(this.attribute))),c=[];if(!l)return;if(Array.isArray(l)){var d=l.filter(function(e){var i;if(e.auth&&(null===(i=window.websiteUser)||void 0===i||!i.isVerified))return!1;if(!e.name||!e.action)return!1;var a=e.category||t.category;return"toggle"===e.mode?o&&!r&&c.push({category:a,action:e.action,name:e.name}):c.push({category:a,action:e.action,name:e.name}),t.removeGroupOnce(n),!e.once});n.setAttribute(this.attribute,encodeURIComponent(JSON.stringify(d)))}else if(l.name&&l.action){var u,h=l.name,f=l.action,m=l.once;if(l.auth&&(null===(u=window.websiteUser)||void 0===u||!u.isVerified))return;var p=l.category||this.category;"toggle"===l.mode&&o&&!r?c.push({category:p,action:f,name:h}):l.mode||c.push({category:p,action:f,name:h}),this.removeGroupOnce(n),m&&n.removeAttribute(this.attribute)}if(c.length>0)for(var v=0;v<c.length;v++)this.logger(c[v].category,c[v].name,c[v].action),this.sentinel.sendEvent(c[v].category,c[v].name,c[v].action)}catch(e){console.error(e)}}else console.warn("User is not verified. Stopping sentinel events.")}},{key:"removeGroupOnce",value:function(e){var t,n=null==e||null===(t=e.dataset)||void 0===t?void 0:t.stnlGroupOnce;if(n)for(var i=document.querySelectorAll('[data-stnl-group-once="'.concat(n,'"]')),o=0;o<i.length;o++){var r=i[o];r.removeAttribute(this.attribute),r.removeAttribute("data-stnl-group-once")}}},{key:"handleCustomEvent",value:function(e){e.detail&&e.detail.event?this.handleEvent(e.detail.event):console.warn("sentinel-event-tracking: event must be in detail object of the custom event and must be the original event")}},{key:"findTrackingElement",value:function(e){for(var t=e;t&&t!==document;){if(t.hasAttribute(this.attribute))return t;t=t.parentElement}return null}},{key:"logger",value:function(e,t,n){"string"==typeof e&&"string"==typeof t&&"string"==typeof n||console.warn("sentinel-event-tracking: category, name, and action must be strings")}}],t&&ue(e.prototype,t),n&&ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),me=function(){if("complete"===document.readyState&&window.websiteSentinel)(new fe).init();else var e=setInterval(function(){"complete"===document.readyState&&window.websiteSentinel&&(clearInterval(e),(new fe).init())},100)};function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function ve(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,we(i.key),i)}}function we(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=pe(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}var be=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t._tabContainerInstance||(this.tabContainer=t,this.options=Object.assign({eventListenerIdentifier:"vn_ui:tab_container:switch"},n),this.init(),t._tabContainerInstance=this)}return t=e,i=[{key:"getInstance",value:function(t){return t._tabContainerInstance||(t._tabContainerInstance=new e(t)),t._tabContainerInstance}}],(n=[{key:"isInteractedWith",value:function(){return!!this.interactedWith}},{key:"init",value:function(){this.buttons=this.tabContainer.querySelectorAll("[data-target]"),this.tabs=this.tabContainer.querySelectorAll("[data-tab]"),this.options.activeTab?this.activeTab=this.options.activeTab:this.activeTab=this.tabContainer?this.tabContainer.getAttribute("data-active-tab"):null,this.attachEvents(),this.switchTab(this.activeTab)}},{key:"attachEvents",value:function(){this.boundListeners={onTabClick:this.onTabClick.bind(this),onArbitrarySwitch:this.onArbitrarySwitch.bind(this)};var e,t=ve(this.buttons);try{for(t.s();!(e=t.n()).done;)e.value.addEventListener("click",this.boundListeners.onTabClick)}catch(e){t.e(e)}finally{t.f()}}},{key:"onArbitrarySwitch",value:function(e){var t=e.detail.tab;this.switchTab(t)}},{key:"onTabClick",value:function(e){e.preventDefault();var t=e.target.closest("[data-target]");this.switchTab(t.getAttribute("data-target")),this.interactedWith=!0}},{key:"isTabInContainer",value:function(e){var t,n=!1,i=ve(this.tabs);try{for(i.s();!(t=i.n()).done;)if(t.value.dataset.tab===e){n=!0;break}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"switchTab",value:function(e){if(this.isTabInContainer(e)){var t,n=ve(this.tabs);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.classList.add("is-hidden"),i.dataset.tab===e&&i.classList.remove("is-hidden")}}catch(e){n.e(e)}finally{n.f()}var o,r=ve(this.buttons);try{for(r.s();!(o=r.n()).done;){var a=o.value;a.classList.remove("is-active"),a.dataset.target===e&&a.classList.add("is-active")}}catch(e){r.e(e)}finally{r.f()}this.activeTab=e}}}])&&ye(t.prototype,n),i&&ye(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function ke(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ce(i.key),i)}}function Ce(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Se(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:t+""}var Te=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({nextSelector:".slide-next",prevSelector:".slide-prev",listSelector:".w-slide-list",totalItems:10,responsiveness:{0:1},debounceDelay:300,pageClasses:["hub-rate-slider-page","slide-list-page"],currentItems:[],breakpointClassPrefix:"breakpoint-",visiblePageClasses:["current-page"],hiddenPagesStyles:{maxWidth:"0px"},api:"",prepareFetch:function(e,t,n,i){var o=new URLSearchParams;return o.append("page",n),o.append("size",i),fetch("".concat(t,"?").concat(o.toString()))},onLoaded:function(){}},n),this.element=t,this.element.style.display="",this.list=t.querySelector(this.options.listSelector),this.prevButton=t.querySelector(this.options.prevSelector),this.nextButton=t.querySelector(this.options.nextSelector),this.endReached=!1,this.busy=!1,this.busyTimeout=null,this.page=0,this.previousPage=0,this.totalItems=+this.options.totalItems,this.items=Array.from(this.options.currentItems),this.hiddenList=document.createDocumentFragment();for(var i=0;i<this.options.currentItems.length;i++)this.hiddenList.appendChild(this.options.currentItems[i]);this.list.innerHTML="",this.updatePageSize(),this.renderAllPages(),this.updateButtons(),this.attachEvents()},t=[{key:"attachEvents",value:function(){var e=this;window.addEventListener("resize",function(){return e.onResize()}),this.prevButton&&this.prevButton.addEventListener("click",function(){return e.prev()}),this.nextButton&&this.nextButton.addEventListener("click",function(){return e.next()})}},{key:"onResize",value:function(){this.updatePageSize(),this.renderAllPages(),this.updateButtons()}},{key:"getBreakpoint",value:function(){var e,t=window.innerWidth,n=Object.keys(this.options.responsiveness).map(function(e){return parseInt(e,10)}).sort(function(e,t){return e-t}),i=n[0],o=ke(n);try{for(o.s();!(e=o.n()).done;){var r=e.value;if(!(t>=r))break;i=r}}catch(e){o.e(e)}finally{o.f()}return i}},{key:"updatePageSize",value:function(){var e=this.getBreakpoint();for(var t in this.options.responsiveness)this.list.classList.remove("".concat(this.options.breakpointClassPrefix).concat(t));this.list.classList.add("".concat(this.options.breakpointClassPrefix).concat(e)),this.pageSize=this.options.responsiveness[e],this.totalPages=Math.ceil(this.totalItems/this.pageSize)}},{key:"debounce",value:function(){var e=this;this.busy=!0,clearTimeout(this.busyTimeout),this.busyTimeout=setTimeout(function(){e.busy=!1},this.options.debounceDelay)}},{key:"prev",value:function(){this.page>0&&!this.busy&&(this.debounce(),this.previousPage=this.page,this.page--,this.load(-1))}},{key:"next",value:function(){this.page<this.totalPages-1&&!this.busy&&(this.debounce(),this.previousPage=this.page,this.page++,this.load(1))}},{key:"shouldFetchMore",value:function(){return!this.endReached&&(this.page+1)*this.pageSize>this.items.length-this.pageSize&&this.items.length<this.totalItems}},{key:"load",value:function(){var e=this;this.updatePageSize();var t=Promise.resolve();if(this.shouldFetchMore()){this.list.dataset.displayState="loading",this.prevButton.disabled=!0,this.nextButton.disabled=!0;var n=Math.ceil(this.items.length/this.pageSize)+1;t=Promise.resolve(this.options.prepareFetch(this,this.options.api,this.page,this.pageSize,n)).then(function(t){if(t){t.length<e.pageSize&&(e.endReached=!0);for(var n=0;n<t.length;n++)e.hiddenList.appendChild(t[n]),e.items.push(t[n])}})}return t.then(function(){e.totalPages=Math.ceil(e.totalItems/e.pageSize),e.list.dataset.displayState="loaded",e.prevButton.disabled=!1,e.nextButton.disabled=!1,e.renderAllPages(),e.updateButtons(),e.options.onLoaded(e)})}},{key:"clearPages",value:function(){for(;this.list.firstChild;){for(var e=this.list.firstChild;e.firstChild;)this.hiddenList.appendChild(e.firstChild);this.list.removeChild(e)}this.visiblePages=[]}},{key:"createPageElement",value:function(e){var t=document.createElement("div");t.dataset.pageIndex=e;var n,i=ke(this.options.pageClasses);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.classList.add(o)}}catch(e){i.e(e)}finally{i.f()}if(Math.abs(e-this.page)<2){var r,a=ke(this.options.visiblePageClasses);try{for(a.s();!(r=a.n()).done;){var s=r.value;t.classList.add(s)}}catch(e){a.e(e)}finally{a.f()}}else if(Math.abs(e-this.page)>5)for(var l in this.options.hiddenPagesStyles)t.style[l]=this.options.hiddenPagesStyles[l];for(var c=e*this.pageSize,d=Math.min(c+this.pageSize,this.items.length),u=c;u<d;u++){var h=this.items[u];h.parentElement&&h.parentElement.removeChild(h),t.appendChild(h)}return t}},{key:"renderAllPages",value:function(){var e=this;this.clearPages();for(var t=Math.ceil(this.items.length/this.pageSize),n=0;n<t;n++){var i=this.createPageElement(n);this.list.appendChild(i),this.visiblePages.push(i)}(requestAnimationFrame||setTimeout)(function(){e.performScroll()})}},{key:"moveChildrenToHidden",value:function(e){for(;e.firstChild;)this.hiddenList.appendChild(e.firstChild)}},{key:"updateButtons",value:function(){this.prevButton&&(this.prevButton.disabled=this.page<=0,this.prevButton.style.display=this.page<=0?"none":""),this.nextButton&&(this.nextButton.disabled=this.page>=this.totalPages-1,this.nextButton.style.display=this.page>=this.totalPages-1?"none":"")}},{key:"performScroll",value:function(){var e=this.list.querySelector('[data-page-index="'.concat(this.page,'"]'));if(e){var t=this.list.getBoundingClientRect(),n=e.getBoundingClientRect().left-t.left;this.list.scrollLeft=this.list.scrollLeft+n}}}],t&&Ee(e.prototype,t),n&&Ee(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Ie=!1,Ae=!1,Pe="sensa_quiz_progress",qe=null,xe=[];function Be(){var e=document.querySelector(".w-sensa-quiz-widget");return e?e.getAttribute("data-quiz-id"):null}function _e(){try{var e=(0,M.Ri)(Pe);if(e)return JSON.parse(e)}catch(e){console.error("Error parsing quiz progress cookie:",e)}return{}}function Oe(e,t){var n=_e();n[e]=t,(0,M.TV)(Pe,JSON.stringify(n),0)}function je(e){var t=_e();delete t[e],(0,M.TV)(Pe,JSON.stringify(t),0)}function Ne(e){var t=document.querySelector(".sensa-quiz-progress"),n=document.querySelector(".quiz-progress-bar"),i=document.querySelector(".quiz-record-wrong .fab-label"),o=document.querySelector(".quiz-record-correct .fab-label");if(t&&n){t.style.display="";for(var r="",a=0;a<e;a++){var s=xe[a],l="quiz-progress-bar-fill";"correct"==s?l+=" correct":"wrong"==s&&(l+=" wrong"),r+='<div class="'+l+'" data-quiz-question="'+(a+1)+'"></div>'}n.innerHTML=r;for(var c=0,d=0,u=0;u<xe.length;u++)"correct"==xe[u]&&c++,"wrong"==xe[u]&&d++;i&&(i.textContent=d),o&&(o.textContent=c)}}function Me(e,t){var n=document.getElementById("w-sensa-quiz-cta");if(n){var i=n.querySelector(".quiz-arrow-btn .fab-label"),o=n.querySelector(".quiz-card-stats"),r=Be();if("backend"===e&&t)l(t);else if("backend"===e&&window.isUserLoggedIn)Fe(r,function(e){if(e)l({status:"completed",highestScore:e.highestScore,attempts:e.attempts,total:e.totalQuestions});else{var t=_e()[r];t&&"in_progress"===t.status?l(t):l(null)}});else{var a=_e()[r];window.isUserLoggedIn&&a&&"in_progress"===a.status||!window.isUserLoggedIn&&a?l(a):l(null)}}function s(e,t,n){return'<div class="quiz-stat-item"><div class="quiz-stat-label">'+e+'</div><div class="quiz-stat-value'+(n?" "+n:"")+'">'+t+"</div></div>"}function l(e){var t;if(o)if(e){var n=e.total||e.totalQuestions||0,r=e.highestScore,a=e.attempts||0,l=e.status||"completed",c=e.currentQuestion||0,d='<div class="quiz-stat-user">';if(d+=s("Your Highest Score",null!=r&&n>0?Math.round(r/n*100)+"%":"--"),"in_progress"===l)d+=s("Currently",c+"/"+n),i&&(i.textContent="Continue Quiz");else d+=s(1===a?"Attempt":"Attempts",a>0?(t=a)>=1e6?(t/1e6).toFixed(1).replace(/\.0$/,"")+"M":t>=1e3?(t/1e3).toFixed(1).replace(/\.0$/,"")+"K":t.toString():"--"),i&&(i.textContent="Review Results");d+="</div>",o.innerHTML=d}else{var u='<div class="quiz-stat-user">'+s("Your High Score","--")+s("Attempts","--")+"</div>";o.innerHTML=u,i&&(i.textContent="Start Quiz")}}}function Re(e,t){var n=document.querySelector(".sensa-widget-quiz-container"),i=document.getElementById("w-sensa-quiz-cta");if(!Ie){if(!t||e)He("Quiz Widget","Start Quiz",((s=document.getElementById("sensa-quiz-title"))?s.getAttribute("data-quiz-title"):"Quiz")+" ("+Be()+")");Ie=!0}if(i&&(i.style.display="none"),n.style.display="block",n.style.height="auto",!Ae||e){if(e){Ae=!1,xe=[];var o=document.querySelector(".sensa-quiz-progress");o&&(o.style.display="none");var r=document.querySelector(".quiz-record-wrong .fab-label"),a=document.querySelector(".quiz-record-correct .fab-label");r&&(r.textContent="0"),a&&(a.textContent="0")}var s,l,c,d,u=(s=document.getElementById("sensa-quiz-title"))?s.getAttribute("data-quiz-title"):null;l=window.articleId,c=function(n){if(!n||!n.length)return alert("No quiz available."),void window.closesensaQuiz();var i=null;t&&"in_progress"===t.status&&!e&&t.total===n.length&&(i=t),function(e,t,n){var i=document.querySelector("#sensa-quiz-container"),o=document.getElementById("sensa-quiz-title");if(i&&o){var r=n&&"number"==typeof n.currentQuestion?n.currentQuestion:0,a=n&&"number"==typeof n.score?n.score:0,s=["A","B","C","D","E","F","G","H"];for(xe=n&&Array.isArray(n.results)?n.results.slice():[];xe.length<e.length;)xe.push(null);var l=!1;if(qe={quiz:e,quizTitle:t,getCurrentQuestion:function(){return r},getScore:function(){return a},isCurrentAnswered:function(){return l}},o.textContent=t||"Challenge yourself with this quiz!",r>=e.length){for(var c=!0,d=0,u=0;u<e.length;u++){if("correct"!==xe[u]&&"wrong"!==xe[u]){c=!1;break}"correct"===xe[u]&&d++}if(c)return a=d,Ne(e.length),void m(n?{attempts:n.attempts||1,highestScore:n.highestScore||a,originalScore:n.originalScore}:null);r=0;for(var h=0;h<e.length;h++)if("correct"!==xe[h]&&"wrong"!==xe[h]){r=h;break}}f(r)}function f(n){var o=e[n],c=!1;i.innerHTML="";var d=document.getElementById("w-next-btn");d&&(d.innerHTML=""),Ne(e.length);var u=document.createElement("div");u.className="sensa-quiz-question container start",u.id="current-question";var h='<div class="quiz-difficulty">';if(o.difficulty){var p=o.difficulty.toLowerCase();h+='<div class="quiz-level '+("easy"===p?"easy-level":"medium"===p?"medium-level":"hard-level")+'">',h+='<span class="icon '+("easy"===p?"i-easy-level":"medium"===p?"i-medium-level":"i-hard-level")+'"></span>'+o.difficulty.charAt(0).toUpperCase()+o.difficulty.slice(1),h+="</div>"}h+='<div class="question-length">Question '+(n+1)+" of "+e.length+"</div>",h+="</div>",h+="<p>"+o.question+"</p>",u.innerHTML=h,i.appendChild(u);var v=document.createElement("div");v.className="sensa-quiz-answer-area";var g=document.createElement("div");g.className="answers-wrapper",g.id="answers-wrapper",v.appendChild(g),i.appendChild(v),l=!1;var y=o.options.slice().sort(function(){return Math.random()-.5}),w=[];function b(n,i,s){if(!c){c=!0,l=!0,w.forEach(function(e){e.btn.disabled=!0}),He("Quiz Widget","Answer Quiz Question",t+" ("+Be()+")");var d=n.isCorrect;d&&a++,xe[r]=d?"correct":"wrong",Ne(e.length);var u=_e()[Be()]||{};Oe(Be(),{status:"in_progress",currentQuestion:r+1,score:a,total:e.length,title:t||"Quiz",results:xe.slice(),originalScore:u.originalScore,highestScore:u.highestScore,attempts:u.attempts});var h=w.find(function(e){return e.opt.isCorrect});w.filter(function(e){return e.btn!==i&&e.btn!==h.btn}).forEach(function(e){e.btn.classList.add("fade-out")}),setTimeout(function(){p(h.btn),d?i.classList.add("correct"):(i.classList.add("incorrect"),h.btn.classList.add("correct"));var n=document.getElementById("w-next-btn");n.innerHTML="";var o=document.createElement("button");o.className="btn-fab primary__dark-only rounded medium icon-end next-btn";var s=document.createElement("div"),l=document.createElement("div");if(l.className="fab-label",r<e.length-1)s.className="icon i-long-arrow",l.textContent="Next Question",o.onclick=function(){f(++r)};else{var c=_e()[Be()]||{},u=(c.attempts||0)+1,v=c.originalScore,g=c.highestScore||0;null==v&&(v=a),a>g&&(g=a),window.isUserLoggedIn&&function(e,t,n,i,o,r){var a=new XMLHttpRequest;a.open("POST","/quiz-result-submit/",!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(200===a.status)try{var e=JSON.parse(a.responseText);r&&r(e)}catch(e){console.error("Error parsing quiz submit response:",e),r&&r(null)}else console.error("Quiz submit failed:",a.status),r&&r(null)},a.onerror=function(){console.error("Quiz submit network error"),r&&r(null)};var s="quizId="+encodeURIComponent(e)+"&articleId="+encodeURIComponent(t)+"&latestScore="+encodeURIComponent(n)+"&totalQuestions="+encodeURIComponent(i);o&&(s+="&quizDateUpdated="+encodeURIComponent(o)),a.send(s)}(Be(),window.articleId,a,e.length,window.quizDateUpdated||null,function(e){e&&"success"===e.status&&(console.log("Quiz result saved to backend:",e.data),je(Be()))}),window.isUserLoggedIn||Oe(Be(),{status:"completed",score:a,total:e.length,title:t||"Quiz Complete !",results:xe.slice(),originalScore:v,highestScore:g,attempts:u}),s.className="icon i-quiz-score",l.textContent="Show Score";var y={attempts:u,highestScore:g,originalScore:v};o.onclick=function(){He("Quiz Widget","Completed Quiz",t+" ("+Be()+")"),m(y)}}o.appendChild(s),o.appendChild(l),n.appendChild(o)},200)}function p(e){var t=document.createElement("div");t.className="answer-btn-rationale visible",o.rationale&&(t.innerHTML="<strong>Explanation</strong><p>"+o.rationale+"</p>"),e.appendChild(t)}}y.forEach(function(e,t){var n=document.createElement("button");n.className="quiz-answer-btn";var i=document.createElement("div");i.className="answer-btn-header",i.setAttribute("data-letter",s[t]),i.innerHTML='<span class="text">'+e.text+"</span>",n.appendChild(i),n.onclick=function(){b(e,n,t)},g.appendChild(n),w.push({btn:n,opt:e,letter:s[t]})})}function m(n){var o,r,s,l=document.getElementById("w-next-btn");if(l&&(l.innerHTML=""),n)o=n.attempts,r=n.highestScore,s=n.originalScore;else{var c=_e()[Be()]||{};o=(c.attempts||0)+1,r=Math.max(c.highestScore||0,a),s=c.originalScore}i.innerHTML=ze({score:a,total:e.length,attempts:o,highestScore:r,showBadge:!0}),qe=null,i.appendChild(De({attempts:o,highestScore:r,originalScore:s,total:e.length,title:t})),window.isUserLoggedIn||i.appendChild(Ue())}}(n,u,i),Ae=!0},(d=new XMLHttpRequest).open("GET","/fetch/sensatools/fetch-quiz/?articleId="+l,!0),d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.DONE)if(200===d.status)try{var e=JSON.parse(d.responseText);c(e.sensaQuiz||null)}catch(e){console.error("Error parsing quiz JSON:",e),c(null)}else console.error("Quiz fetch failed:",d.status),c(null)},d.onerror=function(){console.error("Quiz fetch network error"),c(null)},d.send()}}function ze(e){var t=e.score,n=e.total,i=e.attempts,o=e.highestScore,r=n>0?t/n:0,a="level-1",s="Nice try!";r>=.5&&(a="level-2",s="Congrats!");var l="";return i>=1&&null!==i&&(l+='<div class="quiz-score-pills quiz-score-pills--secondary"><span class="icon i-revert"></span>Attempt #'+i+"</div>"),o>=0&&null!==o&&(l+='<div class="quiz-score-pills quiz-score-pills--main"><span class="icon i-quiz-success"></span>Your Best: '+o+"/"+n+"</div>"),'<div class="quiz-score-screen"><h3>Your Score:</h3><div class="score-ring '+a+'"\n     role="progressbar"\n     aria-label="Quiz score"\n     aria-valuemin="0"\n     aria-valuemax="'+n+'"\n     aria-valuenow="'+t+'"\n     style="--value: '+r+'; --ring: 12px;">\n  <div class="score-ring__inner">\n'+(!1!==e.showBadge?'    <div class="score-ring__badge">'+s+"</div>\n":"")+'    <div class="score-ring__score">\n      <span class="score-ring__big">'+t+'</span><span class="score-ring__slash">/</span><span class="score-ring__small">'+n+'</span>\n    </div>\n  </div>\n</div><div class="w-quiz-score-pills">'+(l?" "+l+" ":"")+"</div></div>"}function Ve(e){var t=document.querySelector(".sensa-widget-quiz-container"),n=document.querySelector("#sensa-quiz-container"),i=document.getElementById("sensa-quiz-title"),o=document.getElementById("w-sensa-quiz-cta");if(t&&n&&i){if(o&&(o.style.display="none"),t.style.display="block",t.style.height="auto",Array.isArray(e.results))xe=e.results.slice();else{xe=[];for(var r=0;r<e.total;r++)xe.push(r<e.score?"correct":"wrong")}Ne(e.total);var a=document.getElementById("w-next-btn");a&&(a.innerHTML="");var s=i.getAttribute("data-quiz-title");i.textContent=e.title||s||"Quiz Complete!",n.innerHTML=ze({score:e.score,total:e.total,attempts:e.attempts,highestScore:e.highestScore,showBadge:!0}),n.appendChild(De({attempts:e.attempts,highestScore:e.highestScore,originalScore:e.originalScore,total:e.total,title:e.title})),window.isUserLoggedIn||n.appendChild(Ue())}}function De(e){var t=document.createElement("button");t.className="btn-fab restart-btn medium rounded icon-end";var n=document.createElement("div");n.className="main-icon icon i-restart";var i=document.createElement("div");return i.className="fab-label",i.textContent="Restart Quiz",t.appendChild(n),t.appendChild(i),t.onclick=function(){var t=e||{};Oe(Be(),{status:"restarting",score:0,total:t.total||0,title:t.title||"Quiz",results:[],originalScore:t.originalScore,highestScore:t.highestScore,attempts:t.attempts||0}),xe=[],He("Quiz Widget","Restarted Quiz",(t.title||"Quiz")+" ("+Be()+")"),window.showsensaQuiz(!0)},t}function Ue(){var e=document.createElement("button");e.className="btn-fab secondary__dark-only signin-btn medium rounded icon-end";var t=document.createElement("div");t.className="main-icon icon i-user";var n=document.createElement("div");return n.className="fab-label",n.textContent="Sign In to Save Progress",e.appendChild(t),e.appendChild(n),e.onclick=function(e){e.preventDefault();var t=_e()[Be()];if(window.ValnetLogin){var n={mode:"popup",idParent:null,className:"popup",triggeredFrom:"quiz",gaEventCategory:"quiz",showCloseButton:!0};t&&(n.valnetLoginAction={apiCallCallback:"window.mergeQuizProgressAfterLogin",apiCallCallbackOptions:{quizId:Be(),articleId:window.articleId,progress:t}});var i=new ValnetLogin(n);i.showLoginForm(i)}else window.location.href="/login/"},e}function Fe(e,t){var n=new XMLHttpRequest;n.open("GET","/quiz-progress/?quizId="+encodeURIComponent(e),!0),n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)if(200===n.status)try{var e=JSON.parse(n.responseText);"success"===e.status&&t?t(e.data):t&&t(null)}catch(e){console.error("Error parsing quiz progress response:",e),t&&t(null)}else console.error("Quiz progress fetch failed:",n.status),t&&t(null)},n.onerror=function(){console.error("Quiz progress network error"),t&&t(null)},n.send()}function He(e,t,n){try{window.websiteSentinel&&"function"==typeof window.websiteSentinel.sendEvent&&window.websiteSentinel.sendEvent(e,t,n)}catch(e){console.error("Sentinel event error:",e)}}function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function Qe(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Ge(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Xe(i.key),i)}}function Xe(e){var t=function(e,t){if("object"!=We(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=We(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==We(t)?t:t+""}window.showsensaQuiz=function(e){var t=document.querySelector(".sensa-widget-quiz-container"),n=document.getElementById("w-sensa-quiz-cta");if(t){var i=null,o=_e()[Be()];if(window.isUserLoggedIn?o&&"in_progress"===o.status&&(i=o):i=o,i&&!e){if("completed"===i.status)return Ae?(n&&(n.style.display="none"),t.style.display="block",void(t.style.height="auto")):(Ve(i),void(Ae=!0));"restarting"===i.status&&(e=!0)}!window.isUserLoggedIn||i||e?Re(e,i):Fe(Be(),function(i){if(i&&void 0!==i.latestScore){if(Ae)return n&&(n.style.display="none"),t.style.display="block",void(t.style.height="auto");Ve({status:"completed",score:i.latestScore,total:i.totalQuestions,attempts:i.attempts,highestScore:i.highestScore,originalScore:i.originalScore,results:null}),Ae=!0}else Re(e,null)})}},window.closesensaQuiz=function(){if(qe&&!qe.isCurrentAnswered()){var e=_e()[Be()]||{};Oe(Be(),{status:"in_progress",currentQuestion:qe.getCurrentQuestion(),score:qe.getScore(),total:qe.quiz.length,title:qe.quizTitle||"Quiz",results:xe.slice(),originalScore:e.originalScore,highestScore:e.highestScore,attempts:e.attempts}),Me("cookie")}var t=document.querySelector(".sensa-widget-quiz-container"),n=document.getElementById("w-sensa-quiz-cta");t&&(t.style.display="none",t.style.height="0"),n&&(n.style.display="flex")},window.mergeQuizProgressAfterLogin=function(e){e&&e.quizId&&e.articleId&&e.progress?e.articleId===window.articleId?function(e,t,n,i){var o=new XMLHttpRequest;o.open("POST","/quiz-progress-merge/",!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE)if(200===o.status)try{var t=JSON.parse(o.responseText);"success"===t.status&&i?(je(e),i(t.data)):i&&i(null)}catch(e){console.error("Error parsing quiz merge response:",e),i&&i(null)}else console.error("Quiz merge failed:",o.status),i&&i(null)},o.onerror=function(){console.error("Quiz merge network error"),i&&i(null)};var r="quizId="+encodeURIComponent(e)+"&articleId="+encodeURIComponent(t)+"&score="+encodeURIComponent(n.score||0)+"&totalQuestions="+encodeURIComponent(n.total||0)+"&originalScore="+encodeURIComponent(n.originalScore||n.score||0)+"&highestScore="+encodeURIComponent(n.highestScore||n.score||0)+"&attempts="+encodeURIComponent(n.attempts||1);n.quizDateUpdated&&(r+="&quizDateUpdated="+encodeURIComponent(n.quizDateUpdated)),o.send(r)}(e.quizId,e.articleId,e.progress,function(t){t?Me("backend",{status:"completed",highestScore:t.highestScore,attempts:t.attempts,total:e.progress.total||t.totalQuestions}):Me("backend")}):console.log("Article ID mismatch, skipping merge"):console.error("Invalid options for mergeQuizProgressAfterLogin")},function(){if(window.isUserLoggedIn){var e=window.localStorage.getItem("apiCallCallback"),t=window.localStorage.getItem("apiCallCallbackOptions");if("window.mergeQuizProgressAfterLogin"===e&&t)try{var n=JSON.parse(t);window.localStorage.removeItem("apiCallCallback"),window.localStorage.removeItem("apiCallCallbackOptions"),window.mergeQuizProgressAfterLogin(n)}catch(e){console.error("Error executing pending quiz merge:",e)}}}();var $e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,i=[{key:"push",value:function(t,n){var i=e._getObject(t),o=e._indexOf(i,n);-1!==o&&i.splice(o,1),i.push({val:n,cAt:Date.now()}),e._setObject(t,e._trimOldest(i))}},{key:"has",value:function(t,n){var i=e._getObject(t);return e._has(i,n)}},{key:"filterAlreadyIn",value:function(t,n){var i,o=e._getObject(t),r=[],a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Je(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;e._has(o,s)||r.push(s)}}catch(e){a.e(e)}finally{a.f()}return r}},{key:"_strFromVal",value:function(e){return e+""}},{key:"_has",value:function(t,n){return t.some(function(t){return e._strFromVal(t.val)===e._strFromVal(n)})}},{key:"_indexOf",value:function(t,n){return t.findIndex(function(t){return e._strFromVal(t.val)===e._strFromVal(n)})}},{key:"_trimOldest",value:function(t){return t.sort(function(e,t){return t.cAt-e.cAt}),t.splice(e.MAX_HISTORY,1/0),t.sort(function(e,t){return e.cAt-t.cAt})}},{key:"_getObject",value:function(t){return e._cachedArr[t]||(e._cachedArr[t]=JSON.parse(localStorage.getItem(t)||"[]")),e._cachedArr[t]}},{key:"_setObject",value:function(t,n){e._cachedArr[t]=n,localStorage.setItem(t,JSON.stringify(n))}},{key:"getAll",value:function(t){return e._getObject(t).map(function(e){return e.val})}},{key:"getMostRecent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return Qe(e._getObject(t)).sort(function(e,t){return t.cAt-e.cAt}).slice(0,n).map(function(e){return e.val})}}],(n=null)&&Ge(t.prototype,n),i&&Ge(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();function Ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=document.querySelector('script[src="'.concat(e,'"]'));if(i)return t.apply(i),i;var o=document.createElement("script");if(o.onload=t,o.src=e,n.defer&&(o.defer=!0),document.body)document.body.appendChild(o);else var r=setInterval(function(){o.parentElement&&clearInterval(r),document.body&&(clearInterval(r),document.body.appendChild(o))},1);return o}function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function et(e){return function(e){if(Array.isArray(e))return tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return tt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function nt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,it(i.key),i)}}function it(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Ze(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ze(t)?t:t+""}$e.MAX_HISTORY=1e3,$e._cachedArr={};var ot="shortVideoWatchHistory",rt=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.landingVideoId=t.currentVideoId||[],this.hasVideoHomepage=t.hasVideoHomepage||!1,this.zoneName=t.zoneName,this.renderMode=t.renderMode||"page",this.modalId=t.modalId||"",this.anchorTag=t.anchorTag||"",this.returnUrl=window.location.href,this.fetchBaseUrl="/fetch/vertical-short-article/",this.enableAdSlides=!1,this.videoIds=[],this.videos=[],this.currentIndex=0,this.currentPlayerId=null,this.loadedCount=0,this.batchSize=1,this.hasAutoUnmuted=!1,this.savedVolume=null,this.navUpButton=null,this.navDownButton=null,this.isDragging=!1,this.startY=0,this.currentTranslateY=0,this.dragThreshold=25,this.previewVideoElements={next:null,prev:null},this.transitionPreviewType=null,this.transitionOverlay=null,this.transitionedPreviewElement=null,this.isPageLoad=!0,this.permalinkToId=[],this.locationHash=document.location.hash||"",this.batchQueue=[],this.isFetching=!1,this.noMoreResults=!1,this.embedsCache=[],this.videoContainer=document.querySelector(".w-adsninja-video-player.featured-video")||null},t=[{key:"init",value:function(){var e=this;this.initSetup(),$e.push(ot,this.landingVideoId);var t=$e.getMostRecent(ot,50)||[];this.fetchKnnSimilarVideos(4,this.landingVideoId,t,!1).then(function(t){var n;t&&t.ids&&0!==t.ids.length||(e.noMoreResults=!0,e.batchQueue=[],e.isFetching=!1);var i=t.ids&&t.ids.length>0?t.ids:["end-slide"];e.videoIds.push(e.landingVideoId),(n=e.videoIds).push.apply(n,et(i)),e.updateNavigationButtons(),e.fetchInitialVideoArticles(),e.initAutoplayFirstVideo(),e.initAutoUnmute(),e.initVideoPlayerClassSync(),e.initHideVolumeControl(),e.initVolumeTracking(),e.initCloseButton(),e.initGoBackToVideosButton()})}},{key:"getCommonElements",value:function(){return{videoContainer:this.videoContainer,articleHeader:document.querySelector(".article-header"),articleBody:document.getElementById("article-body"),adContainer:document.getElementById("vertical-short-default"),endContainer:document.getElementById("vertical-short-end")}}},{key:"generateRandomId",value:function(){var e=Array.from({length:8},function(){return Math.floor(256*Math.random()).toString(16).padStart(2,"0")}).join("");return"emaki-video-player-".concat(e)}},{key:"storeVideoPosition",value:function(){var e=this.videoContainer;if(e){var t=e.getBoundingClientRect();this.originalVideoPosition={top:t.top,left:t.left,width:t.width,height:t.height}}}},{key:"resetAnimationWrapper",value:function(){this.animationWrapper&&(this.animationWrapper.style.transform=this.originalTransform||"")}},{key:"setElementsDisplay",value:function(e){var t=this.getCommonElements();void 0!==e.videoContainer&&t.videoContainer&&(t.videoContainer.style.display=e.videoContainer),void 0!==e.articleHeader&&t.articleHeader&&(t.articleHeader.style.display=e.articleHeader),void 0!==e.articleBody&&t.articleBody&&(t.articleBody.style.display=e.articleBody),void 0!==e.adContainer&&t.adContainer&&(t.adContainer.style.display=e.adContainer),void 0!==e.endContainer&&t.endContainer&&(t.endContainer.style.display=e.endContainer)}},{key:"resetVideoContainerPosition",value:function(e,t){e.style.transition="none",e.style.transform="",e.style.position="fixed",e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.width=t.width+"px",e.style.height=t.height+"px",requestAnimationFrame(function(){e.style.position="",e.style.top="",e.style.left="",e.style.width="",e.style.height=""})}},{key:"fadeOutContentElements",value:function(){[document.querySelector(".article-header-title"),document.querySelector(".content-block-regular"),document.querySelector(".article-header-data"),document.querySelector(".w-heading-options.secondtime"),document.querySelector("#article-body"),document.querySelector(".vertical-short-summary"),document.querySelector(".vertical-short-summary-gradient")].forEach(function(e){e&&(e.style.transition="opacity 0.1s ease-out",e.style.opacity="0")})}},{key:"fadeInContentElements",value:function(){[document.querySelector(".article-header-title"),document.querySelector(".content-block-regular"),document.querySelector(".article-header-data"),document.querySelector(".w-heading-options.secondtime"),document.querySelector("#article-body"),document.querySelector(".vs-nav"),document.querySelector(".vertical-short-summary"),document.querySelector(".vertical-short-summary-gradient")].forEach(function(e){e&&(e.style.opacity="1")})}},{key:"insertAdSlides",value:function(e){var t=[],n=e.length;if(!this.enableAdSlides)return t.push.apply(t,et(e)),t.push("end-slide"),t;if(n<4)return t.push.apply(t,et(e)),t.push("ad-slide-1"),t.push("end-slide"),t;for(var i=0;i<e.length;i++)t.push(e[i]),(i+1)%4==0&&t.push("ad-slide-"+Math.floor((i+1)/4));return n%4!=0&&t.push("ad-slide-"+(Math.floor(n/4)+1)),t.push("end-slide"),t}},{key:"initializeVideoPlayerContainer",value:function(){var e=this.videoContainer;if(e){var t=this.generateRandomId(),n="\n            <div class='an-ignore'>\n                <div class='adsninja-video-player emaki-video-player ".concat(t,"' id='").concat(t,"'>\n                </div>\n            </div>\n        ");e.innerHTML=n,this.initialPlayerId=t}else console.error("Video player container not found")}},{key:"initSetup",value:function(){var e=this;this.initPopupSetup(),this.initQuillEditor(),this.initUIInteractions(),this.initSwipeHandler(),this.cacheAndRemoveEmbeds(),this.navUpButton=document.querySelector(".vs-nav-up"),this.navDownButton=document.querySelector(".vs-nav-down"),document.body.classList.add("video-scroll-started"),this.navUpButton&&this.navDownButton?(this.navUpButton.addEventListener("click",function(){e.animatePreviewAndNavigate("up")}),this.navDownButton.addEventListener("click",function(){e.animatePreviewAndNavigate("down")}),window.addEventListener("AdsNinjaVideoPlayerSentinelEvent",function(t){if("VideoStart"==t.detail.type&&0==t.detail.data.isAdPlaying){var n=e.permalinkToId[t.detail.data.videoUrl];n&&$e.push(ot,n)}})):console.error("Navigation buttons not found")}},{key:"initPopupSetup",value:function(){"popup"==this.renderMode&&(this.injectHtmlAndCssForPopup(),this.initBrowserGoBack(),this.showPopup(),this.videoContainer=document.querySelector(".vs-video-modal .w-adsninja-video-player.featured-video"))}},{key:"initSwipeHandler",value:function(){this.initDragAnimation(),this.initWheelHandler(),this.boundKeyDown=this.handleKeyDown.bind(this),document.addEventListener("keydown",this.boundKeyDown)}},{key:"handleKeyDown",value:function(e){switch(e.key){case"ArrowDown":this.animatePreviewAndNavigate("down");break;case"ArrowUp":this.animatePreviewAndNavigate("up")}}},{key:"initDragAnimation",value:function(){this.animationWrapper=document.getElementById("vertical-short-animation-wrapper"),this.boundTouchStart=this.handleTouchStart.bind(this),this.boundTouchMove=this.handleTouchMove.bind(this),this.boundTouchEnd=this.handleTouchEnd.bind(this),document.body.addEventListener("touchstart",this.boundTouchStart,{passive:!0}),document.body.addEventListener("touchmove",this.boundTouchMove,{passive:!1}),document.body.addEventListener("touchend",this.boundTouchEnd,{passive:!0})}},{key:"handleTouchStart",value:function(e){var t=document.getElementById("footer-threads");if((!t||e.target!==t&&!t.contains(e.target))&&(this.isDragging=!0,this.startY=e.touches[0].clientY,this.currentTranslateY=0,this.storeVideoPosition(),this.animationWrapper)){var n=window.getComputedStyle(this.animationWrapper).transform;this.originalTransform="none"!==n?n:"",this.animationWrapper.style.transition="none"}}},{key:"handleTouchMove",value:function(e){if(this.isDragging&&this.animationWrapper){var t=e.touches[0].clientY-this.startY;this.currentTranslateY=.5*t,Math.abs(t)>10&&e.preventDefault()}}},{key:"handleTouchEnd",value:function(){var e=this;if(this.isDragging&&this.animationWrapper){this.isDragging=!1,this.animationWrapper.style.transition="transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)";var t=this.currentTranslateY;Math.abs(t)>this.dragThreshold&&(t<0?this.animatePreviewAndNavigate("down"):this.animatePreviewAndNavigate("up")),setTimeout(function(){e.resetAnimationWrapper()},10),this.currentTranslateY=0}}},{key:"initWheelHandler",value:function(){var e=this;this.animationWrapper||(this.animationWrapper=document.getElementById("vertical-short-animation-wrapper")),this.wheelAccumulator=0,this.isWheelScrolling=!1,this.wheelResetTimeout=null,this.wheelMomentumBlocked=!1,this.handleWheel=function(t){var n=document.getElementById("footer-threads");if((!n||t.target!==n&&!n.contains(t.target))&&(Math.abs(t.deltaY)>10&&t.preventDefault(),!e.isWheelScrolling&&e.animationWrapper)){if(e.wheelResetTimeout&&clearTimeout(e.wheelResetTimeout),0===e.wheelAccumulator){e.storeVideoPosition();var i=window.getComputedStyle(e.animationWrapper).transform;e.originalTransform="none"!==i?i:"",e.animationWrapper.style.transition="none"}var o=Math.abs(t.deltaY)<4,r=o?1:.5,a=o?1:8;e.wheelAccumulator+=t.deltaY*r*-1;var s=e.wheelAccumulator*a;e.animationWrapper.style.transform="translateY(".concat(s,"px)");var l=o?130:0;Math.abs(e.wheelAccumulator)>l?(e.isWheelScrolling=!0,e.animationWrapper.style.transition="transform 0.3s ease",e.animatePreviewAndNavigate(e.wheelAccumulator<0?"down":"up"),setTimeout(function(){e.resetAnimationWrapper(),e.wheelAccumulator=0},10),setTimeout(function(){e.isWheelScrolling=!1},1e3)):e.wheelResetTimeout=setTimeout(function(){document.body.classList.remove("video-scroll-started"),e.animationWrapper&&(e.animationWrapper.style.transition="transform 0.3s ease",e.animationWrapper.style.transform="");var t=e.videoContainer;t&&e.originalVideoPosition&&(t.style.transition="none",t.style.position="fixed",t.style.top="".concat(e.originalVideoPosition.top,"px"),t.style.left="".concat(e.originalVideoPosition.left,"px"),t.style.width="".concat(e.originalVideoPosition.width,"px"),t.style.height="".concat(e.originalVideoPosition.height,"px"),requestAnimationFrame(function(){t.style.position="",t.style.top="",t.style.left="",t.style.width="",t.style.height=""})),e.wheelAccumulator=0},800)}},document.addEventListener("wheel",this.handleWheel,{passive:!1})}},{key:"fetchInitialVideoArticles",value:function(){for(var e=Math.min(5,this.videoIds.length),t=0;t<e;t++){var n=this.videoIds[t];"string"==typeof n&&n.startsWith("ad-slide-")||this.fetchArticleContent(n)}this.loadedCount=e}},{key:"fetchArticleContent",value:function(e){var t=this;if(!this.videos[e]){var n=this.fetchBaseUrl+e;fetch(n,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()}).then(function(n){if(n.success&&n.data){t.videos[e]=n.data,t.preloadVideo(n.data);var i=t.videoIds[t.currentIndex+1],o=t.videoIds[t.currentIndex-1];e!==i&&e!==o||t.updatePreviewImages()}}).catch(function(e){console.error("Error fetching article content:",e)})}}},{key:"animatePreviewAndNavigate",value:function(e){var t=this;if("down"===e?this.currentIndex<this.videoIds.length-1:this.currentIndex>0){var n=document.getElementById("vertical-short-preview-next"),i=document.getElementById("vertical-short-preview-prev"),o=this.videoContainer,r=document.getElementById("vertical-short-default"),a=document.getElementById("vertical-short-end"),s=this.videoIds[this.currentIndex],l=o;if("end-slide"===s&&a&&"none"!==a.style.display?l=a:"string"==typeof s&&s.startsWith("ad-slide-")&&r&&"none"!==r.style.display&&(l=r),l){var c=l.getBoundingClientRect(),d={top:c.top,left:c.left,width:c.width,height:c.height};this.fadeOutContentElements();var u=window.matchMedia("(min-width: 768px)").matches,h="down"===e?this.currentIndex+1:this.currentIndex-1,f=this.videoIds[h];this.transitionPreviewType="down"===e?"next":"prev";var m=this.videos[f],p=this.isSpecialSlide(f),v=!1;if(!p&&m&&(this.preloadMainPlayer(m),v=!0),"down"===e&&this.currentIndex<this.videoIds.length-1){if(l.style.transition="transform 0.3s ease-out",l.style.transform="translateY(-100vh)",n){var g=n.getBoundingClientRect(),y=d.top-g.top;n.style.transition="transform 0.3s ease-out",n.style.transform=u?"translateX(-50%) translateY(".concat(y,"px)"):"translateY(".concat(y,"px)")}setTimeout(function(){v&&(t.promotePreviewToOverlay(t.transitionPreviewType),t.transitionedPreviewElement&&t.transitionedPreviewElement.play().catch(function(){})),t.navigateDown(v),t.resetVideoContainerPosition(l,d),n&&(n.style.transition="none",n.style.transform=""),t.fadeInContentElements()},300)}else if("up"===e&&this.currentIndex>0){if(l.style.transition="transform 0.3s ease-out",l.style.transform="translateY(100vh)",i){var w=i.getBoundingClientRect(),b=d.top-w.top;i.style.transition="transform 0.3s ease-out",i.style.transform=u?"translateX(-50%) translateY(".concat(b,"px)"):"translateY(".concat(b,"px)")}setTimeout(function(){v&&(t.promotePreviewToOverlay(t.transitionPreviewType),t.transitionedPreviewElement&&t.transitionedPreviewElement.play().catch(function(){})),t.navigateUp(v),t.resetVideoContainerPosition(l,d),i&&(i.style.transition="none",i.style.transform=""),t.fadeInContentElements()},300)}}}}},{key:"isSpecialSlide",value:function(e){if(!e)return!1;if("string"==typeof e){if("end-slide"===e)return!0;if(e.startsWith("ad-slide-"))return!0}return!1}},{key:"preloadMainPlayer",value:function(e){var t=this.getFeaturedVideoBlock(e);if(t){var n=this.buildPlaylist(e,t);window.player&&(window.player.pause(),window.player.reset(n,"vertical-short"))}}},{key:"navigateUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.currentIndex>0&&(this.currentIndex--,this.switchVideo(e),this.updateNavigationButtons())}},{key:"navigateDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.currentIndex<this.videoIds.length-1&&(this.currentIndex++,this.switchVideo(e),this.updateNavigationButtons(),this.preloadNextBatch())}},{key:"switchVideo",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=null===(e=window.adsNinja)||void 0===e?void 0:e.valstream,i=null!=n&&n.getVideoPlayers?n.getVideoPlayers():{},o=this.currentPlayerId?i[this.currentPlayerId]:null;o&&"function"==typeof o.pause&&o.pause(),this.hideCommentEditor();var r=this.videoIds[this.currentIndex],a=this.transitionPreviewType;if("end-slide"===r)return this.cancelTransitionOverlay(),this.showEndSlide(),this.updatePreviewImages(),void window.scrollTo({top:0,behavior:"smooth"});if("string"==typeof r&&r.startsWith("ad-slide-"))return this.cancelTransitionOverlay(),this.showAdSlide(),this.updatePreviewImages(),void window.scrollTo({top:0,behavior:"smooth"});var s=this.videos[r];s&&(t?(this.updateURL(s),this.hideAdSlide(),this.hideEndSlide(),window.player&&window.player.play(),this.restoreVolume(window.player),this.finishTransitionOverlay(window.player),$e.push(ot,s.id)):(this.promotePreviewToOverlay(a),this.updateURL(s),this.hideAdSlide(),this.hideEndSlide(),this.updateFeaturedVideo(s)),this.updateArticleTitle(s),this.updateArticleExcerpt(s),this.updateArticleBody(s),this.updateAuthorInfo(s),this.updatePublishDate(s),this.updateComments(s),this.updateSocialButtons(s),this.updatePinnedArticle(s),this.updatePreviewImages(),this.fireSentinelStats(r),this.resetClamp(),window.scrollTo({top:0,behavior:"smooth"}),console.log("Switched to video ".concat(this.currentIndex+1,": ").concat(r)))}},{key:"showAdSlide",value:function(){this.cancelTransitionOverlay();var e=this.getVideoElement();e&&e.pause(),this.setElementsDisplay({adContainer:"flex",endContainer:"none",videoContainer:"none",articleHeader:"none",articleBody:"none"})}},{key:"hideAdSlide",value:function(){this.setElementsDisplay({adContainer:"none",videoContainer:"",articleHeader:"",articleBody:""})}},{key:"showEndSlide",value:function(){this.cancelTransitionOverlay();var e=this.getVideoElement();e&&e.pause();var t=this.getCommonElements();if(t.endContainer){var n=t.endContainer.querySelector(".end-slide-message"),i=t.endContainer.querySelector(".end-slide-link");this.hasVideoHomepage?(n&&(n.textContent="Want to watch more videos?"),i&&(i.textContent="Browse Video Homepage",i.href="/videos/")):(n&&(n.textContent="Want to explore more content?"),i&&(i.textContent="Go to Homepage",i.href="/"))}[document.querySelector(".article-header-title"),document.querySelector(".article-header-data"),document.querySelector(".vertical-short-summary"),document.querySelector(".w-heading-options.secondtime")].forEach(function(e){e&&(e.style.display="none")}),this.setElementsDisplay({endContainer:"flex",adContainer:"none",videoContainer:"none",articleHeader:"none",articleBody:"none"})}},{key:"hideEndSlide",value:function(){[document.querySelector(".article-header-title"),document.querySelector(".article-header-data"),document.querySelector(".vertical-short-summary"),document.querySelector(".w-heading-options.secondtime")].forEach(function(e){e&&(e.style.display="")}),this.setElementsDisplay({endContainer:"none",videoContainer:"",articleHeader:"",articleBody:""})}},{key:"fireSentinelStats",value:function(e){var t,n=this.videos[e]||{};if(n){var i=n.customDimensions||{};if(i){void 0!==window.websiteSentinel&&void 0!==window.sentinelData&&window.sentinelSetup&&(window.sentinelSetup.dimensions={contentType:i.content_type||"",adsTemplate:i.template||"",intent:i.intent||"",articleType:i.article_template||"",segment:i.brand_segment||"",primaryTag:i.tags||"",primaryCategory:i.primary_category||"",networkCategory:i.network_category||"",publishDate:i.date_published||"",system:i.postPaymentCategorySystem||""},window.sentinelData.push(["initTimestamp",Date.now()]),window.websiteSentinel.spaPageview(window.sentinelSetup.dimensions));var o=null===(t=n.contentBlocks)||void 0===t?void 0:t.find(function(e){return"article_title"===e.type});o&&o.text&&(document.title=o.text)}}}},{key:"updateFeaturedVideo",value:function(e){if(e){var t=this.getFeaturedVideoBlock(e);if(t){var n=this.buildPlaylist(e,t);window.player?this.resetExistingPlayer(n,"vertical-short"):this.createNewPlayer(e,n),this.restoreVolume(window.player),this.finishTransitionOverlay(window.player),$e.push(ot,e.id)}}}},{key:"getFeaturedVideoBlock",value:function(e){return e.featuredVideo?e.featuredVideo:(null===(t=e.contentBlocks)||void 0===t?void 0:t.find(function(e){return"featured_video"===e.type}))||null;var t}},{key:"buildPlaylist",value:function(e,t){var n,i,o,r=[{title:(null===(n=e.contentBlocks)||void 0===n||null===(n=n.find(function(e){return"article_title"===e.type}))||void 0===n?void 0:n.text)||"",description:(null===(i=e.contentBlocks)||void 0===i||null===(i=i.find(function(e){return"article_excerpt"===e.type}))||void 0===i?void 0:i.text)||"",length:t.length||"",mimeType:"video/mp4",url:t.url,thumbnailLink:t.poster||""}];return null!==(o=t.videoSubtitles)&&void 0!==o&&o.length&&(r[0].textTracks=t.videoSubtitles.map(function(e){var t,n;return{kind:"subtitles",label:(null===(t=e.language)||void 0===t?void 0:t.name)||"English",language:(null===(n=e.language)||void 0===n?void 0:n.shortName)||"en",url:e.url,default:!1}})),r}},{key:"resetExistingPlayer",value:function(e,t){window.player.reset(e,t),window.player.play()}},{key:"createNewPlayer",value:function(e,t){var n=this.generateRandomId(),i=this.videoContainer;i.innerHTML="\n            <div class='an-ignore'>\n                <div class='adsninja-video-player emaki-video-player ".concat(n,"' id='").concat(n,"'></div>\n            </div>\n        "),this.transitionOverlay&&this.transitionOverlay.parentNode!==i&&i.appendChild(this.transitionOverlay);var o={playlist:JSON.parse(JSON.stringify(t)),trackingId:"vertical-short",allowAds:!1,soundOn:!1,autoplay:!1,allowAutoplay:!1},r={name:this.zoneName,groupName:"content"},a=(window.adsNinja.monetizeVideo(".".concat(n),r,o),Object.keys(window.adsNinja.valstream.getVideoPlayers()));this.currentPlayerId=a[a.length-1],window.player=window.adsNinja.valstream.getVideoPlayers()[this.currentPlayerId],window.player&&("popup"===this.renderMode&&window.player.unmute(),window.player.play())}},{key:"restoreVolume",value:function(e){null!==this.savedVolume&&e&&window.player.setVolume(100*this.savedVolume)}},{key:"updateArticleTitle",value:function(e){var t,n=null===(t=e.contentBlocks)||void 0===t?void 0:t.find(function(e){return"article_title"===e.type});n&&(document.querySelectorAll(".article-header-title").forEach(function(e){e.innerHTML=n.text}),document.title=n.text)}},{key:"updateArticleExcerpt",value:function(e){var t,n=null===(t=e.contentBlocks)||void 0===t?void 0:t.find(function(e){return"paragraph"===e.type});n&&(document.querySelector(".vertical-short-summary p").textContent=n.text)}},{key:"updateArticleBody",value:function(e){var t,n=null===(t=e.contentBlocks)||void 0===t?void 0:t.find(function(e){return"paragraph"===e.type});if(n){var i=document.querySelector(".content-block-regular p:nth-of-type(2)");i&&(i.innerHTML=n.text)}}},{key:"updateAuthorInfo",value:function(e){var t=e.displayAuthor;if(t){var n=document.getElementById("vertical-short-header");if(n){var i=t.niceName&&t.id?"/author/".concat(t.niceName,"/"):"/page/about/",o=n.querySelector(".article-header-author-img img");if(o){var r=t.image?"".concat(t.image,"?fit=crop&w=90&h=90"):"/public/build/images/default-user.png";o.src=r,o.alt=t.displayName||"Author"}var a=n.querySelector(".w-author-name .article-author");a&&(a.textContent=t.displayName||""),n.querySelectorAll(".article-header-author-img a, .article-author").forEach(function(e){return e.href=i}),n.classList.remove("is-hidden")}}}},{key:"updatePublishDate",value:function(e){if(e.datePublished){var t=document.getElementById("vertical-short-header");if(t){var n=t.querySelector(".article-date .pinned-article-date");if(n){var i=new Date(e.datePublished).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});n.textContent=i}}}}},{key:"updateComments",value:function(e){window.commentPage=1;var t=document.querySelector("#comments-number"),n=e.commentCount||0,i=document.querySelector("#commentInput span");i&&(0===n||null===n?(i.textContent="Be the first to post",t&&(t.innerHTML="",t.classList.add("is-hidden"))):(t.innerHTML=n,t.classList.remove("is-hidden"),i.textContent="Reply / Post")),"function"==typeof window.fetchArticleComments&&setTimeout(function(){window.fetchArticleComments("next",!0)},100)}},{key:"updateURL",value:function(e){if(e&&e.permalink){var t=window.location.protocol+"//"+window.location.hostname+e.permalink;window.adsNinjaHeaderBiddingManager.__videoList=[],window.adsNinjaHeaderBiddingManager.__logData.clientData.template=e.customDimensions.templateLayout,window.adsNinjaHeaderBiddingManager.__logData.clientData.url=t,window.history&&window.history.replaceState&&(window.history.replaceState({},"",e.permalink),window.articlePermalink=e.permalink,window.articleId=e.reference,window.articleIdEmaki=e.id,window.VALNET_GLOBAL_TLDRPERMALINK=e.permalink)}}},{key:"updateNavigationButtons",value:function(){this.navUpButton&&(this.navUpButton.disabled=0===this.currentIndex),this.navDownButton&&(this.navDownButton.disabled=this.currentIndex>=this.videoIds.length-1)}},{key:"preloadNextBatch",value:function(){var e=this;this.noMoreResults||(this.batchQueue.push(function(t){return e.fetchNextBatch(t)}),this.isFetching||this.processQueue())}},{key:"processQueue",value:function(){var e=this;0!==this.batchQueue.length?(this.isFetching=!0,this.batchQueue.shift()().then(function(){e.processQueue()})):this.isFetching=!1}},{key:"fetchNextBatch",value:function(e){var t=this;if(this.noMoreResults)return e();console.log("Preloading ".concat(this.batchSize," more videos"));var n=$e.getMostRecent(ot,50)||[];return n=n.concat(this.videoIds),this.fetchKnnSimilarVideos(this.batchSize,this.landingVideoId,n,!0).then(function(e){var n;e&&e.ids&&0!==e.ids.length||(t.noMoreResults=!0,t.batchQueue=[],t.isFetching=!1);var i=e.ids&&e.ids.length>0?e.ids:["end-slide"];(n=t.videoIds).push.apply(n,et(i)),e.videos.forEach(function(e){t.videos[e.id]=e,t.preloadVideo(e)})})}},{key:"preloadVideo",value:function(e){var t,n=null===(t=e.contentBlocks)||void 0===t?void 0:t.find(function(e){return"featured_video"===e.type});if(n&&n.url){var i=document.createElement("link");i.rel="prefetch",i.as="video",i.href=n.url,document.head.appendChild(i),this.permalinkToId[n.url]=e.id}}},{key:"updateFollowButtons",value:function(e,t){var n,i=t.querySelector(".w-follow-btn");if(i){var o=i.querySelectorAll('[data-is-follow-choice-button="true"]'),r=this.checkIfFollowing(e),a=null===(n=e.contentBlocks)||void 0===n?void 0:n.find(function(e){return"article_title"===e.type}),s=(null==a?void 0:a.text)||e.title||"";o.forEach(function(t){t.setAttribute("data-id",e.reference),t.setAttribute("data-title",s),t.setAttribute("data-permalink",e.permalink||"");var n="false"===t.getAttribute("data-is-followed-choice-button");r?n?t.classList.add("is-hidden"):t.classList.remove("is-hidden"):n?t.classList.remove("is-hidden"):t.classList.add("is-hidden"),t.removeEventListener("click",t._followClickHandler),t._followClickHandler=function(){var n="false"===t.getAttribute("data-is-followed-choice-button")?1:0;e.isFollow=n},t.addEventListener("click",t._followClickHandler),"function"==typeof window.handleFollowPage&&window.handleFollow()})}}},{key:"updateLikeButton",value:function(e,t){var n,i=t.querySelector('[data-action="like-article"]');if(i){i.classList.remove("inactive");var o=i.querySelector('[data-is-like-article-button="true"]');if(o){var r=this.checkIfLiked(e);o.setAttribute("data-id",(null===(n=e.like)||void 0===n?void 0:n.idItem)||e.reference);var a=o.querySelector('[data-is-icon="true"]'),s=o.querySelector('[data-is-text="true"]');if(a&&(a.classList.toggle("liked",r),a.classList.toggle("not-liked",!r)),s){var l=e.likeCount||0,c=s.querySelector(".number");c&&(l>=10?(c.textContent=this.formatCount(l),c.style.display=""):(c.textContent="",c.style.display="none"))}o.setAttribute("data-value",r?"1":"0"),o.setAttribute("data-like-count",e.likeCount||0),o.removeEventListener("click",o._likeClickHandler),o._likeClickHandler=function(){var t="1"===o.getAttribute("data-value")?0:1;e.isLike=t},o.addEventListener("click",o._likeClickHandler),m.getInstance().update()}}}},{key:"updateCommentThread",value:function(e,t){var n=t.querySelector(".disqus-load-btn"),i=t.querySelector(".disqus-load-btn .text");if(i)if("popup"!=this.renderMode){var o=e.commentCount||0,r=i.querySelector(".number");r&&(o>=1?(r.textContent=this.formatCount(o),r.style.display=""):(r.textContent="",r.style.display="none"))}else n.classList.add("is-hidden")}},{key:"updateSocialButtons",value:function(e){var t=document.getElementById("vertical-short-social-options");t&&(this.updateFollowButtons(e,t),this.updateLikeButton(e,t),this.updateCommentThread(e,t),document.dispatchEvent(new CustomEvent("verticalShortVideoChanged",{detail:{video:e,index:this.currentIndex}})),t.classList.contains("is-hidden")&&t.classList.remove("is-hidden"))}},{key:"updatePreviewImages",value:function(){var e=this;[{type:"next",indexOffset:1,containerId:"vertical-short-preview-next",mediaId:"vertical-short-preview-next-img"},{type:"prev",indexOffset:-1,containerId:"vertical-short-preview-prev",mediaId:"vertical-short-preview-prev-img"}].forEach(function(t){var n,i=t.type,o=t.indexOffset,r=t.containerId,a=t.mediaId,s=document.getElementById(r),l=e.ensurePreviewVideoElement(a);if(s&&l){e.previewVideoElements[i]=l;var c=e.currentIndex+o;if(c<0||c>=e.videoIds.length)e.resetPreviewVideo(s,l,!0);else{var d=e.videoIds[c];if(e.isPlayablePreviewVideo(d)){var u=e.videos[d];if(u){var h=u.featuredVideo?u.featuredVideo:null===(n=u.contentBlocks)||void 0===n?void 0:n.find(function(e){return"featured_video"===e.type});null!=h&&h.url?e.configurePreviewVideo(s,l,h,d,i):e.resetPreviewVideo(s,l)}else e.resetPreviewVideo(s,l)}else e.resetPreviewVideo(s,l)}}else e.previewVideoElements[i]=null})}},{key:"updatePinnedArticle",value:function(e){var t=e.pinnedArticle||null,n=document.getElementById("vertical-short-article-attached-url");t?n&&(n.href=t.permalink,n.style.display=""):n&&(n.href="",n.style.display="none")}},{key:"ensurePreviewVideoElement",value:function(e){var t=document.getElementById(e);if(!t)return null;if(t.tagName&&"video"===t.tagName.toLowerCase())return this.initializePreviewVideoElement(t);var n=document.createElement("video");return n.id=e,t.getAttribute("class")&&n.setAttribute("class",t.getAttribute("class")),t.getAttribute("style")&&n.setAttribute("style",t.getAttribute("style")),Array.from(t.attributes).forEach(function(e){e.name.startsWith("data-")&&n.setAttribute(e.name,e.value)}),t.parentNode&&t.parentNode.replaceChild(n,t),this.initializePreviewVideoElement(n)}},{key:"initializePreviewVideoElement",value:function(e){return e?(e.classList.add("vs-preview-video"),e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("muted",""),e.setAttribute("preload","metadata"),e.muted=!0,e.loop=!0,e.controls=!1,e.playsInline=!0,e.autoplay=!1,e.removeAttribute("crossorigin"),e):null}},{key:"resetPreviewVideo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&(t.pause(),t.src="",t.removeAttribute("src"),t.load(),t.removeAttribute("poster"),t.removeAttribute("data-preview-role"),delete t.dataset.videoId),e&&(e.style.display=n?"none":"block")}},{key:"configurePreviewVideo",value:function(e,t,n,i,o){if(e&&t){e.style.display="block",t.setAttribute("data-preview-role",o),t.setAttribute("muted",""),t.muted=!0,t.loop=!0,t.preload="auto";var r=String(i);if(t.dataset.videoId!==r){t.pause(),t.src="",t.removeAttribute("src"),t.load(),t.src=n.url,t.dataset.videoId=r,t.load();var a=function(){try{t.currentTime=0}catch(e){}};if(t.readyState>=1)a();else{var s=function(){a(),t.removeEventListener("loadedmetadata",s)};t.addEventListener("loadedmetadata",s,{once:!0})}}}}},{key:"isPlayablePreviewVideo",value:function(e){if(!e)return!1;if("string"==typeof e){if("end-slide"===e)return!1;if(e.startsWith("ad-slide-"))return!1}return!0}},{key:"promotePreviewToOverlay",value:function(e){var t;if(!e)return!1;var n={next:{containerId:"vertical-short-preview-next",mediaId:"vertical-short-preview-next-img"},prev:{containerId:"vertical-short-preview-prev",mediaId:"vertical-short-preview-prev-img"}}[e],i=document.getElementById(n.containerId),o=null===(t=this.previewVideoElements)||void 0===t?void 0:t[e];if(i&&o){var r=o.cloneNode(!1);r.removeAttribute("src"),r.removeAttribute("poster"),r.removeAttribute("data-preview-role"),delete r.dataset.videoId,r.load(),o.parentNode===i?i.insertBefore(r,o):i.appendChild(r),i.removeChild(o);var a=this.initializePreviewVideoElement(r);this.previewVideoElements[e]=a,this.resetPreviewVideo(i,a);var s=this.videoContainer;return this.transitionOverlay?this.transitionOverlay.innerHTML="":(this.transitionOverlay=document.createElement("div"),this.transitionOverlay.className="vs-transition-overlay"),o.classList.remove("vs-preview-video"),o.classList.add("vs-transition-video"),o.removeAttribute("id"),o.setAttribute("playsinline",""),o.setAttribute("webkit-playsinline",""),o.setAttribute("muted",""),o.muted=!0,o.loop=!1,o.controls=!1,o.playsInline=!0,this.transitionOverlay.appendChild(o),s.appendChild(this.transitionOverlay),this.transitionedPreviewElement=o,!0}}},{key:"finishTransitionOverlay",value:function(e){var t=this;if(this.transitionOverlay&&this.transitionedPreviewElement){var n=function(){var e;null!==(e=t.transitionOverlay)&&void 0!==e&&e.parentNode&&t.transitionOverlay.parentNode.removeChild(t.transitionOverlay),t.transitionOverlay=null,t.transitionedPreviewElement=null,t.transitionPreviewType=null,document.body.classList.remove("video-scroll-started")},i=function(){var e=t.getVideoElement();e&&e.readyState>=3?n():requestAnimationFrame(i)};i(),setTimeout(function(){var e;null!==(e=t.transitionOverlay)&&void 0!==e&&e.parentNode&&n()},2e3)}else setTimeout(function(){document.body.classList.remove("video-scroll-started")},800)}},{key:"cancelTransitionOverlay",value:function(){var e=this.transitionOverlay,t=this.transitionedPreviewElement;if(!e||!t)return this.transitionOverlay=null,this.transitionedPreviewElement=null,void(this.transitionPreviewType=null);t.pause(),t.removeAttribute("src"),t.load(),e.parentNode.removeChild(e),this.transitionOverlay=null,this.transitionedPreviewElement=null,this.transitionPreviewType=null}},{key:"checkIfFollowing",value:function(e){var t;return void 0!==e.isFollow?1===e.isFollow||"1"===e.isFollow:"1"===(null===(t=e.followPage)||void 0===t?void 0:t.isFollow)}},{key:"checkIfLiked",value:function(e){var t,n,i=this.getLikeFromLocalStorage(e.reference);return null!==i?i:void 0!==e.isLike?1===e.isLike||"1"===e.isLike:1===(null===(t=e.like)||void 0===t?void 0:t.isLike)||"1"===(null===(n=e.like)||void 0===n?void 0:n.isLike)}},{key:"getLikeFromLocalStorage",value:function(e){try{var t=localStorage.getItem("likeArticleList");if(!t)return null;var n=JSON.parse(t)[e];if(n)return 1===n.newValue||"1"===n.newValue}catch(e){console.error("Error reading like from localStorage:",e)}return null}},{key:"getVideoElement",value:function(){return document.querySelector(".adsninja-video-player video, .emaki-video-player video, .w-adsninja-video-player video")}},{key:"initAutoplayFirstVideo",value:function(){var e=this,t=0,n=function(){var i,o=e.videoIds[e.currentIndex],r=e.videos[o];r&&null!==(i=window.adsNinja)&&void 0!==i&&i.valstream?(window.articleId=r.reference,window.articleIdEmaki=r.id,e.initializeVideoPlayerContainer(r),e.updateFeaturedVideo(r),e.updateURL(r),e.updatePreviewImages(),e.updateSocialButtons(r),e.updateArticleBody(r),e.updateAuthorInfo(r),e.updatePublishDate(r),e.updateArticleExcerpt(r),e.updateComments(r),e.updatePinnedArticle(r)):t<1e5?(t++,setTimeout(n,100)):console.warn("Video element not found after maximum attempts")};n()}},{key:"initAutoUnmute",value:function(){var e=this;this.unmuteOnce||(this.unmuteOnce=function(t){var n;if(!e.hasAutoUnmuted){var i=null===(n=window.adsNinja)||void 0===n?void 0:n.valstream;if(i){var o=i.getVideoPlayers()[e.currentPlayerId];o&&(o.unmute(),e.hasAutoUnmuted=!0,document.removeEventListener("click",e.unmuteOnce,!0),document.removeEventListener("touchstart",e.unmuteOnce,!0),document.removeEventListener("keydown",e.unmuteOnce,!0),document.removeEventListener("scroll",e.unmuteOnce,!0))}}},document.addEventListener("click",this.unmuteOnce,!0),document.addEventListener("touchstart",this.unmuteOnce,!0),document.addEventListener("keydown",this.unmuteOnce,!0),document.addEventListener("scroll",this.unmuteOnce,!0))}},{key:"initUIInteractions",value:function(){var e=this,t=document.querySelector(".secondtime .option-btn.disqus-load-btn"),n=document.querySelector(".close-footer-threads"),i=document.querySelector(".article-footer"),o=document.querySelector(".vertical-short-summary p"),r=document.querySelector(".w-article.layout-vertical-short");"popup"===this.renderMode&&(r=document.getElementById(this.modalId)),t&&i&&r&&t.addEventListener("click",function(){i.classList.add("active"),r.classList.add("threads-open"),e.navUpButton.classList.add("is-showing"),e.navDownButton.classList.add("is-showing")}),n&&i&&r&&n.addEventListener("click",function(){i.classList.remove("active"),r.classList.remove("threads-open"),e.navUpButton.classList.remove("is-showing"),e.navDownButton.classList.remove("is-showing")}),o&&o.addEventListener("click",function(){o.classList.toggle("remove-clamp")}),this.initCommentClickOutside()}},{key:"initCommentClickOutside",value:function(){var e=this;"popup"!==this.renderMode&&document.addEventListener("click",function(t){var n=document.getElementById("commentInput"),i=document.getElementById("comment-form"),o=document.getElementById("commentTextEditor");n&&i&&o&&"none"!==o.style.display&&"none"!==window.getComputedStyle(o).display&&(i.contains(t.target)||e.hideCommentEditor())})}},{key:"hideCommentEditor",value:function(){if("popup"!==this.renderMode){var e=document.getElementById("commentInput"),t=document.getElementById("commentTextEditor"),n=document.getElementById("commentToolbar"),i=document.getElementById("btn-comment-submit"),o=document.getElementById("user-info-div"),r=document.getElementById("comment-submit-rules");t&&"none"!==t.style.display&&(e&&(e.style.display="flex"),t&&(t.style.display="none",window.quillEditor&&window.quillEditor.commentTextEditor&&(window.quillEditor.commentTextEditor.root.innerHTML="")),n&&(n.style.display="none"),i&&(i.style.display="none"),o&&(o.style.display="none"),r&&(r.style.display="none"))}}},{key:"resetClamp",value:function(){var e=document.querySelector(".vertical-short-summary p");e&&e.classList.remove("remove-clamp")}},{key:"exitShortApp",value:function(){if("popup"===this.renderMode)return this.closePopup(),this.scrollToAnchorTag(),history.replaceState(null,"",this.addAnchorTag(this.returnUrl)),void(history.state&&history.state.popupOpen&&history.back());var e=hasVideoHomepage?"/videos/":"/",t=document.referrer;if(t)try{var n=new URL(t);n.origin===window.location.origin&&(e=n.href)}catch(e){console.error("Invalid referrer URL:",e)}window.location.href=this.addAnchorTag(e)}},{key:"closePopup",value:function(){window.player&&(window.player.pause(),window.player=null),this.restoreEmbeds(),this.destroy();var e=document.getElementById(this.modalId);e&&e.remove()}},{key:"showPopup",value:function(){var e=document.getElementById(this.modalId);e&&"popup"==this.renderMode&&(e.classList.remove("is-hidden"),history.pushState({popupOpen:!0},""))}},{key:"initBrowserGoBack",value:function(){this.handlePopState=this.closePopup.bind(this),window.addEventListener("popstate",this.handlePopState,{once:!0})}},{key:"scrollToAnchorTag",value:function(){var e=document.getElementById(this.anchorTag);e&&e.scrollIntoView()}},{key:"addAnchorTag",value:function(e){if(e)return this.anchorTag&&!e.includes("#".concat(this.anchorTag))&&(e="".concat(e,"#").concat(this.anchorTag)),e}},{key:"formatCount",value:function(e){return e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}},{key:"initVideoPlayerClassSync",value:function(){var e=function(){var e=document.querySelector("div.video-js");e&&(e.classList.contains("vjs-user-active")?document.body.classList.add("vjs-progress-bar-active"):document.body.classList.remove("vjs-progress-bar-active"),e.classList.contains("vjs-user-inactive")?document.body.classList.add("vjs-progress-bar-inactive"):document.body.classList.remove("vjs-progress-bar-inactive"))};e();var t=new MutationObserver(function(){e()}),n=function(){var e=document.querySelector("div.video-js");e&&t.observe(e,{attributes:!0,attributeFilter:["class"]})};n(),document.addEventListener("verticalShortVideoChanged",function(){setTimeout(function(){n(),e()},100)})}},{key:"initHideVolumeControl",value:function(){if("mobile"!=window.device);else{var e=function(){var t=document.querySelector(".vjs-volume-control");t?(t.style.display="none",t.style.pointerEvents="none"):setTimeout(e,200)};e()}}},{key:"initVolumeTracking",value:function(){var e=this;window.addEventListener("click",function(t){var n=document.querySelector(".vjs-volume-panel");n&&n.contains(t.target)&&(console.log("Document click/touch detected for volume tracking"),setTimeout(function(){var t,n=null===(t=window.adsNinja)||void 0===t?void 0:t.valstream;if(n){var i=n.getVideoPlayers(),o=e.currentPlayerId?i[e.currentPlayerId]:null;if(o){console.log("Tracking volume for player ID:",e.currentPlayerId);var r=o.player.muted()?0:o.player.volume();null!=r&&(e.savedVolume=r)}}},100))},!0)}},{key:"initQuillEditor",value:function(){"popup"!=this.renderMode&&(window.addEventListener("valnet_ui_event:quill_injected",function(){window.quillEditor&&window.quillEditor.commentTextEditor||"function"==typeof window.initQuill&&window.initQuill("commentTextEditor","commentToolbar")},{once:!0}),function(){var e=!1;console.log("--- triggered injectQuill ---");try{window.Quill&&(e=!0)}catch(e){console.log("quill not found, loading...")}if(e)return console.log("%cEvent dispatched : valnet_ui_event:quill_injected","color: white; background-color: green; padding: 4px;"),void window.dispatchEvent(new Event("valnet_ui_event:quill_injected"));if(!window.valnet_is_quill_injection_started){window.valnet_is_quill_injection_started=!0;var t=null,n=null,i=null,o=function(){this.isLoaded=!0,t&&t.isLoaded&&n&&n.isLoaded&&i&&i.isLoaded&&setTimeout(function(){console.log("%cEvent dispatched : valnet_ui_event:quill_injected","color: white; background-color: green; padding: 4px;"),window.dispatchEvent(new Event("valnet_ui_event:quill_injected"))})};window.quillScriptLocation&&(t=Ke(window.quillScriptLocation,function(){this.isLoaded=!0;var e=setInterval(function(){var t=!1;try{window.Quill&&(t=!0)}catch(e){console.log("quill not found, loading...")}t&&(clearInterval(e),window.quillEmojiScriptLocation&&(n=Ke(window.quillEmojiScriptLocation,o,{defer:!0})),window.quillMentionScriptLocation&&(i=Ke(window.quillMentionScriptLocation,o,{defer:!0})),window.quillMagicUrlScriptLocation&&(i=Ke(window.quillMagicUrlScriptLocation,o,{defer:!0})))},1)},{defer:!0}))}}())}},{key:"postJson",value:function(e,t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.ok?e.json():e.text().then(function(t){throw new Error(t||"HTTP "+e.status)})})}},{key:"fetchKnnSimilarVideos",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t?(n=Array.from(new Set(n)),console.log("KNN Cached Video IDs:",n),this.postJson("/knn/video-articles/search/",{cachedVideos:n,idArticle:t,limit:e,includeContent:i}).then(function(e){return e.success&&e.data?(console.log("KNN Serched Video IDs:",e.data.ids),console.log("<<==== KNN next serach ====>>"),e.data||{}):(console.warn("No data returned or success=false:",e),{})}).catch(function(e){return console.error(e),{}})):[]}},{key:"injectHtmlAndCssForPopup",value:function(){if(window.valnetShortVideoPopupHtml&&!document.getElementById(this.modalId)){var e=window.valnetShortVideoPopupHtml.trim("&quot;");e=(e=(e=(e=(e=(e=e.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#39;/g,"'")).replace(/&amp;/g,"&")).replace(/(^"|"$)/g,"");var t=(0,M.CC)(e),n=t.getAttribute("data-style-path-url");(0,M.tW)(n,function(){t.removeAttribute("hidden")}),document.body.appendChild(t)}}},{key:"initCloseButton",value:function(){var e=this,t=document.querySelector(".back-to-previous.icon.i-close");t&&(setTimeout(function(){t.classList.remove("is-hidden")},700),this.onCloseClick=function(t){t.preventDefault(),t.stopPropagation(),e.exitShortApp()},t.removeEventListener("click",this.onCloseClick,!0),t.addEventListener("click",this.onCloseClick,!0))}},{key:"initGoBackToVideosButton",value:function(){var e=document.querySelector(".icon.i-video-home");e&&"false"!=window.hasVideoHomepage&&setTimeout(function(){e.classList.remove("is-hidden")},700)}},{key:"destroy",value:function(){document.body.removeEventListener("touchstart",this.boundTouchStart),document.body.removeEventListener("touchmove",this.boundTouchMove),document.body.removeEventListener("touchend",this.boundTouchEnd),document.removeEventListener("wheel",this.handleWheel),document.removeEventListener("keydown",this.boundKeyDown),window.removeEventListener("popstate",this.handlePopState)}},{key:"cacheAndRemoveEmbeds",value:function(){var e,t=this;try{e=document.querySelectorAll(".w-rich iframe")}catch(e){return void console.error("Error selecting iframes:",e)}e&&0!==e.length&&e.forEach(function(e){try{var n;if(!e||!e.parentNode)return;null!==(n=e.classList)&&void 0!==n&&n.contains("youtube-repalcing-image")&&e.src.includes("autoplay=1")&&(e.src=e.src.replace("autoplay=1",""));var i=document.createElement("div");i.style.width=(e.offsetWidth||0)+"px",i.style.height=(e.offsetHeight||0)+"px",e.parentNode.replaceChild(i,e),t.embedsCache.push({iframe:e,placeholder:i})}catch(e){console.warn("Error during embed caching for one iframe:",e)}})}},{key:"restoreEmbeds",value:function(){this.embedsCache&&0!==this.embedsCache.length&&(this.embedsCache.forEach(function(e){try{var t=e.iframe,n=e.placeholder;if(!t||!n||!n.parentNode)return;var i=t.src;t.src="",t.src=i,n.parentNode.replaceChild(t,n)}catch(e){console.warn("Error restoring one embed:",e)}}),this.embedsCache=[])}}],t&&nt(e.prototype,t),n&&nt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function at(e){console.log("initTimestampDecoding"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;try{var t=(e||document).querySelectorAll('[data-b64-ts]:not([data-b64-ts-rendered="1"])');if(!t.length)return;t.forEach(function(e){var t=e.getAttribute("data-b64-ts");if(t)try{var n=(0,M.Qb)(t);e.textContent=n||""}catch(t){e.setAttribute("data-b64-error","1")}finally{e.setAttribute("data-b64-ts-rendered","1")}})}catch(e){}}(e||document)}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,a,s=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||dt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e){return function(e){if(Array.isArray(e))return ut(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=dt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function dt(e,t){if(e){if("string"==typeof e)return ut(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ut(e,t):void 0}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return at()},{once:!0}):at(),document.addEventListener("valnet:timestamp:decode",function(e){at(e&&e.detail&&e.detail.root?e.detail.root:void 0)}),window.ValnetB64Ts=window.ValnetB64Ts||{init:at},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",me):me(),window.pixelName="strpixel.png",window.valnetLoadFooter=function(){if(document.getElementById("js-action-bar")&&(window.vn_scroll_handler={lastDir:"",distanceSinceLastScroll:0,lastPageYOffset:0,eventFired:!1},window.addEventListener("scroll",function(e){var t=window.scrollY||document.scrollingElement.scrollTop||window.pageYOffset,n=t-window.vn_scroll_handler.lastPageYOffset>0?"down":"up",i=n!=window.vn_scroll_handler.lastDir;if(window.vn_scroll_handler.distanceSinceLastScroll+=Math.abs(t-window.vn_scroll_handler.lastPageYOffset),window.vn_scroll_handler.lastDir=n,window.vn_scroll_handler.lastPageYOffset=t,i&&(window.vn_scroll_handler.distanceSinceLastScroll=0,window.vn_scroll_handler.eventFired=!1),!window.vn_scroll_handler.eventFired&&window.vn_scroll_handler.distanceSinceLastScroll>75){var o=document.querySelector("[data-is-secondary-header]");"down"==n?(document.getElementById("js-action-bar").classList.remove("is-showing"),o&&(o.classList.remove("is-sliding-in"),o.classList.add("is-sliding-out")),document.getElementById("js-action-bar")&&!document.getElementById("js-action-bar").className.includes("is-showing")&&document.querySelector("html").setAttribute("data-action-bar-is-showing","false")):(document.getElementById("js-action-bar").classList.add("is-showing"),o&&(o.classList.remove("is-sliding-out"),o.classList.add("is-sliding-in")),document.getElementById("js-action-bar")&&document.getElementById("js-action-bar").className.includes("is-showing")&&document.querySelector("html").setAttribute("data-action-bar-is-showing","true")),window.vn_scroll_handler.eventFired=!0}})),window.newsletterPopupVisibility&&new Waypoint({element:document.getElementById("js-header"),handler:function(e){"down"==e&&(window.injectNewletterPopup(),this.destroy())},offset:-350}),function(){if(!window.__qaOutsideCloseInit){window.__qaOutsideCloseInit=!0;var e=function(){return document.querySelector(".sensa-widget-container")},t=function(){return document.querySelector(".w-jump-links")},n=function(){var t=e();return!!t&&("true"===t.dataset.loaded||parseFloat(getComputedStyle(t).height||"0")>10)},i=function(){var e=t();return!!e&&"none"!==getComputedStyle(e).display},o=function(){var t=e();t&&(t.style.height="0",t.dataset.loaded="false")},r=function(){var e=t();e&&(e.style.display="none")};document.addEventListener("click",a,{passive:!0}),document.addEventListener("touchstart",a,{passive:!0}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(n()&&o(),i()&&r())})}function a(e){var t;(t=e.target).closest(".sensa-widget-container")||t.closest(".w-jump-links")||t.closest(".qa-quick-labels-btn")||t.closest(".qa-action-list")||t.closest(".qa-action-item")||t.closest(".qa-summary")||t.closest('[onclick*="toggleQAPanel"]')||(n()&&o(),i()&&r())}}(),window.fullCoverAdAvailable=!1,function(){var e=document.getElementById("js-header"),t=document.querySelector('[data-is-header-menu-submenu="true"]');document.querySelector('[data-is-dbsearch-drawer="true"]'),document.querySelector(".w-subheader-menu.default-menu.db-header");if(e||t){var n=window.scrollY,i=0,o=0,r=!1,a=!1,s=0;window.addEventListener("scroll",function(){a||(a=!0,requestAnimationFrame(c))},{passive:!0})}function l(e){window.fullCoverAdAvailable&&!0===e?window.fullCoverAdAvailable=!1:r!==e&&(r=e,s=performance.now(),[document.getElementById("js-header"),document.getElementById("js-secondary-header"),document.querySelector('[data-is-dbsearch-drawer="true"]'),document.querySelector(".w-subheader-menu.default-menu.db-header")].filter(Boolean).forEach(function(e){r?e.classList.add("is-out-of-view"):e.classList.remove("is-out-of-view")}))}function c(){var e=performance.now(),t=window.scrollY,c=t-n;Math.abs(c)<2||(c>0?(i+=c,o=0,!r&&i>=40&&e-s>5&&(l(!0),i=0)):(o+=-c,i=0,r&&o>=40&&e-s>5&&(l(!1),o=0)),n=t<=0?0:t),a=!1}}(),document.getElementById("home-waypoint")&&null!=window.infiniteScrollUrl&&null!=window.infiniteScrollMax&&null!=window.infiniteScrollArticlesRequested);else{var e=document.getElementById("waypointLoader");e&&(e.style.visibility="hidden")}var t=document.getElementById("newsletter-from");t&&t.addEventListener("click",function(e){var n=window.newsletterForm.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/^"|"$/g,"").trim(" ");if(void 0!==window.mailChimpAction){var i=t.querySelector(".btn-nf-container");i.querySelector(".btn-nf").remove();var o=t.querySelector("#mc_embed_signup"),r=t.querySelector("#mc-embedded-subscribe-form");o.style.display="",r.innerHTML=n,i.appendChild(o)}else t.innerHTML=n},{once:!0}),document.getElementById("non-premium-overlay")&&"true"==(0,M.Ri)("displayPremiumAd")&&(document.getElementById("non-premium-overlay").style.display="flex",console.log("HERE"),(0,M.TV)("displayPremiumAd","false",2));var n=document.querySelectorAll("li.profiles-item");if(n)for(var i=function(){var e=n[o],t=e.firstElementChild;if(t){t.addEventListener("click",function(){e.classList.contains("is-showing")?e.classList.remove("is-showing"):e.classList.add("is-showing")});var i=e.getElementsByTagName("form")[0],r=i.getElementsByTagName("button")[0];i.querySelectorAll("input,textarea").forEach(function(e){e.onchange=function(){"imageSamples[]"==e.name&&e.files&&e.files.length>3&&(alert("A maximum of 3 Files can be uploaded for Image samples!"),e.value=null);for(var t=0,n=i.querySelectorAll("[required]"),o=0;o<n.length;o++)""!=n[o].value&&t++;t==n.length?r.classList.add("is-enbable"):r.classList.remove("is-enbable")}})}},o=0;o<n.length;o++)i();if(window.propegateMavx=function(){return null!=window._carrickQueue&&window._carrickQueue.push(function(e){return e.refreshTracking()}),!1},null!=window.websiteUserEmail){var r=(0,M.Ri)("valnet-identity");(!r||r!=window.websiteUserEmailEncoded)&&(0,M.TV)("valnet-identity",window.websiteUserEmailEncoded,""),"object"==("undefined"==typeof ats?"undefined":ht(ats))&&(console.log("ATS call setData =============",window.websiteUserEmail),ats.setAdditionalData({type:"email",id:window.websiteUserEmail}))}var s=document.getElementById("js-action-bar");s&&new a(s).init();var l=document.querySelectorAll('[data-is-header-login-button="true"]');if(l)for(var c=0;c<l.length;c++){var d=l[c];d.alreadyAttached||(d.alreadyAttached=!0,d.addEventListener("click",function(e){e.preventDefault();var t=new ValnetLogin({mode:"popup",idParent:null,className:"popup",triggeredFrom:"header",gaEventCategory:"header",showCloseButton:!0});t.showLoginForm(t)}))}var u=document.getElementById("login-button-sidemenu");u&&u.addEventListener("click",function(e){e.preventDefault();var t=new ValnetLogin({mode:"popup",idParent:null,className:"popup",triggeredFrom:"burger_menu",gaEventCategory:"burger_menu",showCloseButton:!0});t.showLoginForm(t);var n=document.querySelector(".css-menu--checkbox");n&&(n.checked=!1)});var h=document.getElementById("login-button-article-sidebar");h&&h.addEventListener("click",function(e){e.preventDefault();var t=new ValnetLogin({mode:"popup",idParent:null,className:"popup",triggeredFrom:"article_top",gaEventCategory:"article_content",showCloseButton:!0});t.showLoginForm(t)});var f=document.getElementById("login-button-article-bottom");f&&f.addEventListener("click",function(e){e.preventDefault();var t=new ValnetLogin({mode:"popup",idParent:null,className:"popup",triggeredFrom:"article_bottom",gaEventCategory:"article_content",showCloseButton:!0});t.showLoginForm(t)});var m=document.getElementById("premium-article-blocker-login");if(m&&m.addEventListener("click",function(e){e.preventDefault();var t=new ValnetLogin({mode:"popup",idParent:null,className:"popup",triggeredFrom:"premium_blocker",gaEventCategory:"premium",showCloseButton:!0});t.showLoginForm(t)}),document.getElementById("static-login-page")){var p=new ValnetLogin({mode:"static",idParent:"static-login-page",className:"banner",triggeredFrom:"static",gaEventCategory:"static",showCloseButton:!1});p.showLoginForm(p)}if(document.getElementById("account-link-page")){var v=new ValnetLogin({mode:"static",idParent:"account-link-page",className:"banner",triggeredFrom:"static",gaEventCategory:"static",showCloseButton:!1});v.injectLinkingForm(v)}var g=document.querySelectorAll('[class^="login-popup btn-premium"]');g&&g.length>0&&g.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=new ValnetLogin({mode:"popup",idParent:null,className:"popup",triggeredFrom:"premium",gaEventCategory:"premium",showCloseButton:!0});t.showLoginForm(t)})});var y=document.getElementById("login-button-actionbar");y&&y.addEventListener("click",function(e){e.preventDefault();var t=new ValnetLogin({mode:"popup",idParent:null,className:"popup",triggeredFrom:"actionbar",gaEventCategory:"header",showCloseButton:!0});t.showLoginForm(t)});var w=document.querySelectorAll('[data-is-quick-action-login-button="true"]');if(w)for(var b=0;b<w.length;b++){var S=w[b];S.alreadyAttached||(S.alreadyAttached=!0,S.addEventListener("click",function(e){e.preventDefault();var t=new ValnetLogin({mode:"popup",idParent:null,className:"popup",triggeredFrom:"quick_action_sidebar",gaEventCategory:"quick_action_sidebar",showCloseButton:!0,sendSentinelLoginEvent:!0,sendSentinelRegistrationEvent:!0});t.showLoginForm(t)}))}window.isUserLoggedIn&&document.addEventListener("click",function(e){if(!e.target.classList.contains("missing-display-name-tooltip-btn")){var t,n=ct(document.querySelectorAll(".tooltip-box.is-show"));try{for(n.s();!(t=n.n()).done;)t.value.classList.remove("is-show")}catch(e){n.e(e)}finally{n.f()}}}),window.optimizeInp=function(){document.querySelectorAll(".on-load-show").forEach(function(e){e.classList.remove("on-load-show")})},window.optimizeInp(),window.addMyModulesLoginPopupEventListener=function(){var e=this,t=document.querySelectorAll(".add-to-my-modules, .add-to-list-interaction-tag");if(t&&!window.isUserLoggedIn){var n,i=ct(t);try{var o=function(){var t=n.value,i=t.dataset.idModule,o=t.dataset.idTag,r={mode:"popup",idParent:null,className:"popup",triggeredFrom:"my-modules",gaEventCategory:"tag_list",showCloseButton:!0},a={idModule:i,idTag:o};r.valnetLoginAction={apiCall:I.bind(e,a),apiCallCallback:"addToModuleInteractionTagAction",apiCallCallbackOptions:a};new ValnetLogin(r);t.onclick&&t.removeEventListener("click",t.onclick),t.addEventListener("click",function(e){e.preventDefault();var t=new ValnetLogin(r);t.showLoginForm(t)})};for(i.s();!(n=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}}},(0,M.jx)(window.addMyModulesLoginPopupEventListener),window.addToListModulesOptionsShowEventListener=function(){for(var e=function(e){return function(){var t,n,i;n=(t=e).querySelector("button"),i=t.querySelector(".options-dropdown"),n&&i&&i.classList.toggle("active")}},t=document.getElementsByClassName("member-interaction my-lists"),n=0;n<t.length;n++){var i=t[n];i.eventListener&&i.removeEventListener("click",i.eventListener),i.eventListener=e(i),i.addEventListener("click",i.eventListener)}},window.addToListModulesOptionsShowEventListener();var k,L;(k=document.querySelectorAll(".w-promotion-offer"))&&k.length>0&&k.forEach(function(e){var t=e.querySelector(".btn-close-promo-box"),n=e.getAttribute("data-popup");t&&t.addEventListener("click",function(t){t.preventDefault(),e.classList.add("is-hidden"),e.setAttribute("data-shown","false");try{document.dispatchEvent(new CustomEvent("promotionPopupHidden",{detail:{popup:e}}))}catch(e){}}),n&&"true"===n&&document.addEventListener("click",function(t){var n=e.querySelector(".promotion-offer-box");if(n&&!n.contains(t.target)){e.classList.add("is-hidden");try{document.dispatchEvent(new CustomEvent("promotionPopupHidden",{detail:{popup:e}}))}catch(e){}}});var i=e.querySelector("[data-style-path-url]"),o="";i&&(o=i.getAttribute("data-style-path-url")),(0,M.tW)(o,function(){e.classList.remove("is-hidden");try{document.dispatchEvent(new CustomEvent("promotionPopupShown",{detail:{popup:e}}))}catch(e){}})}),L=function(e,t){var n,i,o,r,a,s=(null===(n=e.detail)||void 0===n?void 0:n.popup)||null;if(s){var l="false"!==(null===(i=s.dataset)||void 0===i?void 0:i.sentinelTracking)&&"0"!==(null===(o=s.dataset)||void 0===o?void 0:o.sentinelTracking),c=(null===(r=s.dataset)||void 0===r?void 0:r.promotionZone)||null;if(c){var d=atob(c);if(console.log("%cPromotion popup ".concat(t,"! : Zone: ").concat(d),"background: linear-gradient(45deg, #ff6b6b, #4ecdc4); color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold; font-size: 12px;"),l&&d&&"function"==typeof(null===(a=window)||void 0===a||null===(a=a.websiteSentinel)||void 0===a?void 0:a.sendEvent)){var u=window.isInternalTraffic?"".concat(t," Page 2+"):"".concat(t," Landing Page");window.websiteSentinel.sendEvent("Promotion",d,u)}}}},document.addEventListener("promotionPopupHidden",function(e){return L(e,"Dismissed")}),document.addEventListener("promotionPopupShown",function(e){return L(e,"Loaded")});var E=document.querySelectorAll(".generic-display-card-on-collection");E&&E.length>0&&E.forEach(function(e){e.click()}),window.toggleQuickActions=function(e){var t=document.getElementById("qa-quick-ai-feature-checkbox"),n=document.getElementById("qa-quick-comp-checkbox"),i=document.getElementById("qa-quick-directory-checkbox"),o=document.querySelector(".qa-action-list.ai-features"),r=document.querySelector(".qa-action-list.complement-action"),a=document.querySelector(".directory-label-mobile");"ai"===e?t.checked&&(n.checked=!1,i.checked=!1):"comp"===e?n.checked&&(t.checked=!1,i.checked=!1):"directory"===e&&i.checked&&(t.checked=!1,n.checked=!1);var s=t.checked&&!n.checked&&!i.checked,l=n.checked&&!t.checked&&!i.checked,c=i.checked&&!t.checked&&!n.checked;o&&(s?o.style.removeProperty("display"):o.style.display="none"),r&&(l?r.style.removeProperty("display"):r.style.display="none"),a&&(c?a.style.removeProperty("display"):a.style.display="none")},window.toggleQAPanel=function(e){var t,n,i,o,r=document.querySelector(".w-jump-links"),a=document.querySelector(".sensa-widget-container"),s=document.querySelector(".w-sensa-widget"),l=function(){r&&(r.style.display="none")},c=function(){a&&(a.style.height="0",a.dataset.loaded="false")};return"jump"===e?(r&&(r.dataset.userToggled="1"),r&&"none"!==r.style.display?void l():(c(),void(r&&r.style.removeProperty("display")))):"summary"===e||"swc"===e?a&&"500px"===a.style.height?void c():(document&&document.body&&document.body.classList.contains("full-cover-ad-template")&&(window.fullCoverAdAvailable=!0),l(),void(a&&(window.quickActionBar&&(window.quickActionBar.show(),window.quickActionBar.suppressFor(800)),t=window.articleId,n=function(e){var t;if(e){a.style.height="500px",a.style.removeProperty("display"),a.dataset.loaded="true",s&&(s.style.height="500px",s.style.removeProperty("display"));var n=null===(t=a.getBoundingClientRect)||void 0===t?void 0:t.call(a);n&&(n.top<0||n.bottom>window.innerHeight)&&a.scrollIntoView({behavior:"smooth",block:"nearest"});var i=!0;Object.entries({factualSummary:"sensa-factual-summary",simpleSummary:"sensa-simple-summary",satiricalCommentary:"sensa-satirical-commentary"}).forEach(function(t){var n=st(t,2),o=n[0],r=n[1],a=e[o],s=document.getElementById(r),l=document.querySelector('button[data-target="#'.concat(r,'"]'));if(s){if(!a||(0,M.lS)(a))return s.style.display="none",void(l&&l.remove());l&&(l.style.removeProperty("display"),l.dataset.bound||(l.dataset.bound="1",l.addEventListener("click",function(){var e;window.quickActionBar&&window.quickActionBar.suppressFor(600),document.querySelectorAll(".sensa-summary").forEach(function(e){return e.style.display="none"}),document.querySelectorAll(".sensa-button").forEach(function(e){return e.style.removeProperty("display")}),s.style.removeProperty("display"),document.querySelectorAll(".sensa-summary-prompt").forEach(function(e){return e.style.display="flex"}),document.querySelectorAll('.sensa-summary-prompt[id$="-prompt"]').forEach(function(e){return e.style.display="none"}),document.querySelectorAll(".sensa-summary-footer").forEach(function(e){return e.style.maxHeight="0"});var t=document.querySelector("#".concat(r,"-prompt"));t&&(t.style.display="flex"),s.dataset.loaded||function(e,t){var n=(new DOMParser).parseFromString("<div>".concat(t,"</div>"),"text/html").body.firstChild,i=[];!function e(t){for(var n=0,o=lt(t.childNodes);n<o.length;n++){var r=o[n];if(r.nodeType===Node.TEXT_NODE){var a=document.createElement("span");a.className="blurred-full",a.textContent=r.textContent,t.replaceChild(a,r),t.className="blurred-full",i.push(a)}else r.nodeType===Node.ELEMENT_NODE&&e(r)}}(n),e.innerHTML="",e.appendChild(n);var o=0,r=0;!function e(){if(o>=i.length)document.querySelectorAll(".sensa-summary-footer").forEach(function(e){return e.style.maxHeight="250px"});else{var t=i[o],n=t.textContent,a=Math.ceil(n.length*(.01*Math.random()+.01));if(r>=n.length)return t.classList.remove("blurred-current","blurred-full"),t.textContent=n,o++,r=0,void e();t.parentNode.classList.remove("blurred-current","blurred-full");var s=n.slice(0,r+a),l=n.slice(r+a);t.innerHTML="<span>".concat(s,'</span><span class="blurred-full">').concat(l,"</span>"),t.className="",r+=a;var c=Math.max(8-1*o,1);o>.8*i.length&&(c=1),setTimeout(e,c)}}()}(s,a),l.style.display="none";var n="Generate Summary ".concat(o[0].toUpperCase()+o.slice(1));null===(e=window.websiteSentinel)||void 0===e||e.sendEvent("Click Interactions","Summary Widget",n)}))),i&&l&&(window.quickActionBar&&window.quickActionBar.suppressFor(800),l.click(),i=!1)}})}},i="/fetch/sensatools/fetch-summaries/?articleId=".concat(t),(o=new XMLHttpRequest).open("GET",i,!0),o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE){var e=o.status;if(200===e)try{var t=JSON.parse(o.responseText).sensaSummary||{};t.factualSummary&&t.factualSummary.trim()||t.simpleSummary&&t.simpleSummary.trim()||t.satiricalCommentary&&t.satiricalCommentary.trim()?(console.log("Summaries fetched:",t),n(t)):(console.info("Summaries are present but empty."),n(null))}catch(e){console.error("Error parsing JSON:",e),n(null)}else 404===e||400===e?(console.warn("No summaries or bad request (Status ".concat(e,")")),n(null)):(console.error("Unexpected error (Status ".concat(e,")")),n(null))}},o.onerror=function(){console.error("Network error during summary fetch."),n(null)},o.send()))):void 0};var C=document.querySelector("#w-sensa-top");C&&(C.style.display="flex")};var ft=new customCarousel({buttonNext:document.querySelector(".glider-prev"),buttonPrev:document.querySelector(".glider-next"),carouselContainer:document.querySelector(".glider-slides")});null!==ft.buttonNext&&null!==ft.buttonPrev&&null!==ft.carouselContainer&&ft.gliderCarousel();var mt=document.querySelectorAll(".js-newsletter-bottom-article, .js-menu-nav-link, .js-follow-us-links, .js-language-link, .js-subscription-link");if(mt)for(var pt=0;pt<mt.length;pt++)mt[pt].href&&mt[pt].addEventListener("click",function(){this.classList.contains("js-newsletter-bottom-article")&&gtag("event","click",{click_element:"Newsletter bottom of article",link:this.href}),this.classList.contains("js-follow-us-links")&&gtag("event","click",{click_element:"Follow Us clicks",link:this.href}),this.classList.contains("js-header-menu-nav-link")&&gtag("event","click",{click_element:"Header menu clicks",link:this.href}),this.classList.contains("js-sidebar-menu-nav-link")&&gtag("event","click",{click_element:"Sidebar menu clicks",link:this.href}),this.classList.contains("js-language-link")&&gtag("event","click",{click_element:"Language selector clicks",link:this.href}),this.classList.contains("js-subscription-link")&&gtag("event","click",{click_element:"Subscription link clicks",link:this.href})});var vt=document.getElementById("select_competition");vt&&vt.addEventListener("change",function(e){var t="/football/fixtures/?competition="+vt.value;window.location.href=t});var gt=document.getElementById("select_team");gt&&gt.addEventListener("change",function(e){var t="/football/fixtures/?competition="+vt.value+"&team="+gt.value;window.location.href=t});var yt=document.getElementById("teamFixtures"),wt=document.getElementById("teamResults");null!==yt&&null!==wt&&(yt.addEventListener("click",function(e){document.getElementById("teamFixturesGames").style.display="block",document.getElementById("teamResultsGames").style.display="none",document.getElementById("teamFixtures").classList.add("selected"),document.getElementById("teamResults").classList.remove("selected")}),wt.addEventListener("click",function(e){document.getElementById("teamFixturesGames").style.display="none",document.getElementById("teamResultsGames").style.display="block",document.getElementById("teamFixtures").classList.remove("selected"),document.getElementById("teamResults").classList.add("selected")}));var bt,St,kt=document.querySelector(".fixtures-schedule"),Lt=document.querySelector(".next-game-day");if(kt&&null!==Lt){var Et=kt.getBoundingClientRect(),Ct=Lt.getBoundingClientRect();kt.scrollLeft=Ct.left-Et.width/2}function Tt(e){e.children[1]&&e.children[1].classList.remove("active")}function It(){var e=document.querySelectorAll("[data-is-infinity-scroll-container]");e&&e.length>0&&e.forEach(function(e){var t=e.getAttribute("data-api-endpoint"),n=e.getAttribute("data-chunk-size"),i=e.getAttribute("data-api-custom-params"),o=e.getAttribute("data-nb-items-to-ignore"),r=e.getAttribute("data-nb-items-class-selector"),a=e.getAttribute("data-max-items"),s={};if(i)for(var l=i.split("&"),c=0;c<l.length;c++){var d=l[c].split("=");s[d[0]]=d[1]}new x(e,{apiEndpoint:t,chunkSize:+n,apiExtraParams:s,nbItemsToIgnore:o,nbItemsClassSelector:r,maxItems:a,onUpdated:function(e){window.initializeInteractives()},renderData:function(e,t){if(!t.html)return"";var n=document.createElement("div");return n.innerHTML=t.html,n.children[0].innerHTML},isEndReached:function(e,t){return!t||(!t.html||""==t.html.replace(/\s|\n|\r/gm,""))}})})}function At(){var e=window.location.hostname;if(e.includes("fextralife")){console.log("It is loading here");var t=new XMLHttpRequest,n=new Date;n.setTime(n.getTime()+31536e6),e.includes("qa")&&e.includes(".fextralife.com")?(t.open("GET","https://eldenring.qa3.fextralife.com/ws/page/checkbis?bg="+Date.now(),!0),document.cookie="fxchck=fxlogged; expires="+n.toUTCString()+"; path=/; domain=.qa3.fextralife.com",console.log("**ONE")):e.includes("fextralife.com.")||e.includes("fextralife.dev")?(t.open("GET","https://eldenring.wiki.fextralife.dev/ws/page/checkbis?bg="+Date.now(),!0),document.cookie="fxchck=fxlogged; expires="+n.toUTCString()+"; path=/; domain=.fextralife.dev",console.log("**TWO")):(t.open("GET","https://eldenring.wiki.fextralife.com/ws/page/checkbis?bg="+Date.now(),!0),document.cookie="fxchck=fxlogged; expires="+n.toUTCString()+"; path=/; domain=.fextralife.com",console.log("**THREE")),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.withCredentials=!0;var i=new URLSearchParams(window.location.search).get("loginRedirect");if(null!=i){console.log("Login redirect Footer",i);var o=new URL(i.replace(/ /g,"+"));return"/wiki"!=o.pathname.substring(0,5)&&"/ws"!=o.pathname.substring(0,3)?o.origin+"/ws/page/check"+o.pathname+"?ts="+Date.now():o.origin+o.pathname+"?ts="+Date.now()}}return window.self!==window.top&&(console.log("It is here!!"),window.parent.postMessage("loginSuccess","*")),null}window.sendClosingStickyVideoGaEvents=function(e){gtag("event","video",{event_action:"closeSticky",event_label:e})},window.attachGaEventToStickyContainerContent=function(){var e=document.querySelector(".ad-zone-size-container-content-outstream");if(e){e.addEventListener("click",function(e){Array.from(e.target.classList).some(function(e){return e.includes("an-close-btn")})&&window.sendClosingStickyVideoGaEvents("outstream")})}var t=document.querySelector(".ad-zone-size-container-content-below-first-paragraph");if(t){t.addEventListener("click",function(e){Array.from(e.target.classList).some(function(e){return e.includes("an-close-btn")})&&window.sendClosingStickyVideoGaEvents("companion")})}},window.convertSportTickerGameTimeToLocalTime=function(){var e=document.getElementById("sport-ticker");if(e){var t,n=e.getElementsByClassName("game"),i="CA"==e.dataset.userCountry||"US"==e.dataset.userCountry,o=ct(n);try{for(o.s();!(t=o.n()).done;){var r=t.value;if("inprogress"!=r.dataset.gameStatus&&"break"!=r.dataset.gameStatus&&"final"!=r.dataset.gameStatus&&"f/ot"!=r.dataset.gameStatus){var a=r.dataset.gameDateTime?new Date(r.dataset.gameDateTime):new Date,s=a.toLocaleDateString("en-us",{month:"2-digit",day:"2-digit"}),l=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!1});i&&(l=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}));var c=r.querySelector(".day-time-display");c&&(c.innerHTML='<span class="game-short-day">'.concat(s,'</span><span class="game-time"> ').concat(l,"</span>"),c.style.display="block")}}}catch(e){o.e(e)}finally{o.f()}}},window.ajaxCallOnSportTickerLeagueChange=function(){var e=document.querySelector("#league-selector");e&&e.addEventListener("change",function(e){var t=e.target.value,n=e.target.options[t].dataset.url,i=new XMLHttpRequest;i.open("GET",n),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var e=JSON.parse(i.response),t=document.querySelector("#league-games"),n=t.querySelector(".game");if(n){var o=4*n.offsetWidth;t.innerHTML=e.html,t.scrollBy({left:-o,behavior:"smooth"}),window.convertSportTickerGameTimeToLocalTime()}}},i.send()})},window.attachEventsOnSportTickerLeague=function(){var e=document.querySelector("#sport-ticker");if(e){var t=function(){var e=o.scrollLeft;0===e?(c.setAttribute("disabled","true"),d.removeAttribute("disabled")):e===l?(d.setAttribute("disabled","true"),c.removeAttribute("disabled")):(c.removeAttribute("disabled"),d.removeAttribute("disabled"))},n=e.querySelector("#ticker-close");n&&n.addEventListener("click",function(t){e.classList.contains("is-open")&&e.classList.remove("is-open"),e.classList.add("is-close")});var i=document.querySelector("#ticker-display");i&&i.addEventListener("click",function(t){e.classList.add("is-open")});var o=e.querySelector("#league-games"),r=o.querySelectorAll(".game"),a=(r.length,r.item(0).offsetWidth),s=4*a,l=o.scrollWidth-o.clientWidth,c=e.querySelector("#left-scroller"),d=e.querySelector("#right-scroller");o.addEventListener("scroll",t),window.addEventListener("resize",t),t(),c.addEventListener("click",function(){o.scrollBy({left:-s,behavior:"smooth"})}),d.addEventListener("click",function(){o.scrollBy({left:s,behavior:"smooth"})})}},window.fillContactPageEmails=function(){if(null!==document.getElementById("contact-emails")){!function(t){for(var n=0;n<t.length;n++){var i=Object.keys(t[n])[0],o=t[n][i];if(document.getElementById(i)){var r=o.endsWith(".com")?"":e(window.location.href),a="mailto:"+o+r;document.getElementById(i).setAttribute("href",a),document.getElementById(i).innerHTML=o+r}}}([{pr_emailLink:"pr@"},{info_emailLink:"info@"},{edit_emailLink:"editorial@"},{partner_emailLink:"partnerships@"},{admin_emailLink:"admin@"},{ad_emailLink:"advertising@valnetinc.com"},{legal_emailLink:"legal@valnetinc.com"}])}function e(e){var t=new URL(e).hostname.split(".").reverse(),n=t[1]+"."+t[0];return"uk"==t[0]&&t.length>2&&(n=t[2]+"."+n),n}},window.initializeAsyncStyles=function(){var e=document.querySelectorAll("[hidden][data-style-inject-onload]"),t=Array.from(e),n=t.map(function(e){return e.getAttribute("data-style-path-url")});(0,M.Gt)(n,function(){t.map(function(e){e.removeAttribute("hidden")})})},window.initializeMiscInteractives=function(){(0,M.jx)(window.attachGaEventToStickyContainerContent),(0,M.jx)(window.ajaxCallOnSportTickerLeagueChange),(0,M.jx)(window.attachEventsOnSportTickerLeague),(0,M.jx)(window.convertSportTickerGameTimeToLocalTime),(0,M.jx)(window.fillContactPageEmails),(0,M.jx)(window.initializeAsyncStyles)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){window.initializeMiscInteractives()}):window.initializeMiscInteractives(),window.unlinkPlatform=function(e){var t=new XMLHttpRequest;t.open("POST","/unlink-platform/",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4==t.readyState){JSON.parse(t.response);window.location.reload()}},t.send("platform=".concat(e))},window.handleAmazonLogin=function(){var e={scope:"profile",scope_data:{profile:{essential:!1}}};return amazon.Login.authorize(e,function(e){if(e.error)alert("oauth error "+e.error);else if(e.access_token){var t=new XMLHttpRequest;t.open("POST","/amazon-login/",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4==t.readyState){var e=JSON.parse(t.response);e.success&&(window.getLoginFormEventCategoryOpening()&&(gtag("event",window.getLoginFormEventCategoryOpening(),{event_action:e.isUserExists?"login":"registration",event_label:window.location.pathname}),window.resetLoginFormEventCategoryOpening()),e.isUserExists?"/page/newsletter/"==location.pathname?window.location.href="/profile/account/":location.reload():window.showNewsletterPreferencesPopup(null,null))}},t.send("token="+e.access_token)}}),!1},window.onAmazonLoginReady=function(){amazon.Login.setClientId(window.amazonClientId)},window.tickerJs=function(){var e=document.querySelector("#league-games");if(e){var t,n,i,o,r=!1;e.addEventListener("mousedown",function(a){r=!0,e.classList.add("active"),t=a.pageX-e.offsetLeft,n=a.pageY-e.offsetTop,i=e.scrollLeft,o=e.scrollTop}),e.addEventListener("mouseleave",function(){r=!1,e.classList.remove("active")}),e.addEventListener("mouseup",function(){r=!1,e.classList.remove("active")}),e.addEventListener("mousemove",function(a){if(r){a.preventDefault();var s=a.pageX-e.offsetLeft,l=a.pageY-e.offsetTop,c=2*(s-t),d=2*(l-n);e.scrollLeft=i-c,e.scrollTop=o-d}})}},tickerJs(),window.matchPageJs=function(){if(document.getElementById("match-page-tabs")){var e=function(e){t.forEach(function(e){return e.classList.remove("is-active")}),e.classList.add("is-active");var n=e.getAttribute("data-tab"),i=document.getElementById("match-page");if(i)for(var o=i.children,r=0;r<o.length;r++){var a=o[r];a.id===n?a.style.display="block":a.style.display="none"}},t=document.querySelectorAll("[data-tab]");t.forEach(function(t){t.addEventListener("click",function(){e(t)})}),e(t[0]);var n=document.querySelectorAll(".teams-lineup-player");n&&n.forEach(function(e){var t=e.getAttribute("data-horizontal")+"%",n=e.getAttribute("data-vertical")+"%";e.style.setProperty("--horizontal-position",t),e.style.setProperty("--vertical-position",n)})}},window.matchPageJs(),window.getLoginFormEventCategoryOpening=function(){return sessionStorage.getItem("loginFormEventCategoryOpening")},window.setLoginFormEventCategoryOpening=function(e){e&&sessionStorage.setItem("loginFormEventCategoryOpening",e)},window.resetLoginFormEventCategoryOpening=function(){sessionStorage.removeItem("loginFormEventCategoryOpening")},window.createUserCards=function(){var e=document.querySelectorAll(".w-thread-author-usercards"),t=null;e&&e.length>0&&e.forEach(function(n){var i=n.querySelector(".user-img"),o=n.querySelector(".js-profile-card"),r=n.querySelector(".user-profile-card");function a(n){n.hasEventListeners||("ontouchstart"in window?n.addEventListener("click",function(e){if(t!==n){if(t)t.closest(".w-thread-author-usercards").querySelector(".user-profile-card").classList.remove("active");r.classList.add("active"),t=n,e.stopPropagation()}}):n.addEventListener("mouseenter",function(t){t.preventDefault(),bt&&clearTimeout(bt),e.forEach(function(e){var t=e.querySelector(".user-profile-card");t&&t.classList.remove("active")}),St=null,r&&r.classList.add("active")}),"ontouchstart"in window?document.addEventListener("click",function(e){r.contains(e.target)||n.contains(e.target)||(r.classList.remove("active"),t=null)}):n.addEventListener("mouseleave",function(e){e.preventDefault(),St=n,bt=setTimeout(function(){return r.classList.remove("active")},150)}),n.hasEventListeners=!0)}i&&o&&r&&(a(o),a(i))});var n=document.querySelectorAll(".user-name");n&&n.length>0&&n.forEach(function(e){e.hasEventListeners||(bt=null,St=null,e.addEventListener("mouseenter",function(t){t.preventDefault(),bt&&clearTimeout(bt),St&&St!=e&&Tt(St),St=null,e.children[1]&&e.children[1].classList.add("active")}),e.addEventListener("mouseleave",function(t){t.preventDefault(),St=e,bt=setTimeout(function(){return Tt(e)},150)}),e.hasEventListeners=!0)})},window.toggleMissingDisplayNameTooltip=function(e){e.nextElementSibling.classList.contains("is-show")?e.nextElementSibling.classList.remove("is-show"):e.nextElementSibling.classList.add("is-show")},window.toggleQuizReportErrorTooltip=function(e){var t=e.closest(".w-tooltip").querySelector(".tooltip-box"),n=e.closest(".w-tooltip").querySelector(".tooltip-btn");t&&(t.classList.contains("is-show")?t.classList.remove("is-show"):t.classList.add("is-show"),n.classList.contains("has-box-open")?n.classList.remove("has-box-open"):n.classList.add("has-box-open"))},window.forceRedirectToWiki=function(e){console.log("FORCE REDIRECT"),console.log("urlComingFromDiscord",e);var t=At();if(console.log("FORCE REDIRECT",t),t)return console.log("**Redirecting to",t),void(window.location.href=t)},window.handleValnetAfterLoginCall=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.localStorage.removeItem("valnetLoginActionCall"),window.localStorage.removeItem("apiCallCallback"),window.localStorage.removeItem("apiCallCallbackOptions"),e&&e.apiCallCallback&&ht(e.apiCallCallbackOptions)){var n=e.apiCallCallback,i=e.apiCallCallbackOptions;"string"==typeof i&&(i=JSON.parse(i));var o=i,r=window,a=n.split(".");"window"==a[0]?r=window:"LikeTag"==a[0]?r=b.getInstance():"LikeMod"==a[0]?r=T.getInstance():"LikeArticle"==a[0]?r=m.getInstance():"addToModuleInteractionTagAction"==a[0]&&(r=I);var s=a[1];!r||"function"!=typeof r[s]&&"function"!=typeof r||("function"==typeof r[s]?r[s](o):"function"==typeof r&&r(o))}var l=At();if(l)return console.log("**Redirecting to",l),void(window.location.href=l);if(t)if(console.log("inside reload"),window.callbackUrl){var c=new URL(window.callbackUrl);c.searchParams.delete("discordLogin"),window.location.href=c.toString()}else{var d=new URL(window.location.href);d.searchParams.get("discordLogin")?(d.searchParams.delete("discordLogin"),window.location.href=d.toString()):window.location.reload()}},document.querySelectorAll(".tip-btn").forEach(function(e){e.addEventListener("click",function(e){var t=e.currentTarget.dataset.tipLink;t.startsWith("http")?window.open(t,"_blank"):window.open("https://"+t,"_blank")})}),window.addEventListener("valnet_ui_event:post_load_init",function(){(0,M.jx)(window.createUserCards),(0,M.jx)(function(){m.getInstance().initialize()}),(0,M.jx)(function(){b.getInstance().initialize()}),(0,M.jx)(function(){T.getInstance().initialize()}),(0,M.jx)(It),(0,M.jx)(N),(0,M.jx)(window.checkDiscordLogin)}),(0,M.jx)(function(){m.getInstance().initialize()}),(0,M.jx)(function(){b.getInstance().initialize()}),(0,M.jx)(function(){T.getInstance().initialize()}),console.log("%cEvent dispatched : valnet_ui_event:post_load_init","color: green; font-weight: bold;"),window.dispatchEvent(new Event("valnet_ui_event:post_load_init")),window.overrideVerifyUser=function(e,t){return(0,s.verifyUser)(e,t)},window.overrideAccountVerification=function(){(new l.A).handleVerifyAccount()},window.interactionTagRatingJs=function(){document.querySelectorAll('[data-is-tag-interaction-rating-block="true"]').forEach(function(e){e.querySelectorAll(".w-user-rating input[checked]").forEach(function(e){e.checked=!0})})},window.interactionTagRatingJs(),window.attachTagInteractionShortMenus=function(){for(var e=document.querySelectorAll('[data-is-tag-ctx-ct-short="true"]'),t=function(){var t=e[n],i=t.querySelector('[data-is-tag-ctx-ct-short-toggle="true"]'),o=t.querySelector('[data-is-tag-ctx-ct-short-drawer="true"]'),r=t.parentElement.querySelectorAll('[data-masked-for-tag-interaction-menu="true"][data-is-cta-button="true"]');if(!i||!o||!r)return 1;new W({toggleButton:i,drawer:o,alternateButtons:r,insideContainer:t,openClass:"is-open",onToggle:function(e,n){if(e.options.customData.html)e.toggle(n);else{var r=t.getAttribute("data-tag-id"),a="true"==t.getAttribute("data-is-tag-ctx-ct-short-with-image"),s="1"==t.getAttribute("data-skip-interaction-drawer-rating");i.classList.add("is-loading");var l=new URLSearchParams;l.append("currentPath",encodeURIComponent(window.location.pathname)),l.append("skipRating",s),a&&l.append("info","true"),fetch("/tag/interaction-card/".concat(r,"?").concat(l.toString())).then(function(e){return e.json()}).then(function(t){t.success&&(e.options.customData.html=t.html,o.innerHTML=t.html,e.toggle(n))}).catch(function(e){console.error(e)}).finally(function(){i.classList.remove("is-loading"),window.initializeInteractives()})}}})},n=0;n<e.length;n++)t()},(0,M.jx)(attachTagInteractionShortMenus),window.initializeInteractives=function(){(0,M.jx)(window.enableRatingCardPagination),(0,M.jx)(window.enableRateNowStarButtons),(0,M.jx)(window.enableExistingUserRatingButtons),(0,M.jx)(window.enableRatingCardRatingLinks),(0,M.jx)(window.enableQuickRatingCardJumpTo),(0,M.jx)(window.createUserCards),(0,M.jx)(window.attachTagInteractionShortMenus),(0,M.jx)(window.addToListModulesOptionsShowEventListener),(0,M.jx)(window.handleFollow),(0,M.jx)(window.threadSuggestionAttachShowThreadSuggestionDialogButtons),(0,M.jx)(window.threadSuggestionAttachLoginButtons),(0,M.jx)(window.addUpvoteEventListeners),(0,M.jx)(N),(0,M.jx)(function(){m.getInstance().update()}),(0,M.jx)(function(){b.getInstance().update()}),(0,M.jx)(function(){T.getInstance().update()}),function(){try{new window.MyModules}catch(e){(0,M.jx)(window.addMyModulesLoginPopupEventListener)}}(),(0,M.jx)(window.optimizeInp)},window.addEventListener("vn_ui:initialize_interactives",window.initializeInteractives.bind(window)),window.enableRatingCardPagination=function(){var e,t=document.querySelectorAll('[data-is-quick-rating-widget="true"]:not([data-is-flex-section="true"])'),n=ct(document.querySelectorAll('[data-is-quick-rating-widget="true"][data-is-flex-section="true"]'));try{var i,o=function(){var t=e.value;if(t._flexPaginatedSection)return{v:void 0};var n=t.querySelector(".w-slide-list"),i=JSON.parse(decodeURIComponent(n.getAttribute("data-responsiveness")||"{}")),o=Array.from(n.querySelectorAll(".display-card.dc-quick-rating")),r=+n.getAttribute("data-items-count"),a=n.getAttribute("data-endpoint");t._flexPaginatedSection=new Te(t,{responsiveness:i,api:a,totalItems:r,currentItems:o,prepareFetch:function(e,t,n,i,o){var r=new URLSearchParams;r.append("page",o),r.append("pageSize",i);var a="".concat(t,"?").concat(r.toString());return fetch(a).then(function(e){return e.json()}).then(function(e){var t=(0,M.CC)("".concat(e.html||""));return t?Array.from(t.children):[]})},onLoaded:function(){window.initializeInteractives()}}),new D(t,{onSwipeLeft:function(){t._flexPaginatedSection.next()},onSwipeRight:function(){t._flexPaginatedSection.prev()}})};for(n.s();!(e=n.n()).done;)if(i=o())return i.v}catch(e){n.e(e)}finally{n.f()}var r,a=ct(t);try{var s=function(){var e=r.value;if(e.isAlreadAttached)return 1;var t=e.querySelector(".w-slide-list");if("true"!=t.getAttribute("data-no-container")||t.oneFocusQuickReviewCarouselInstance){var n={useSwipe:!0,contentId:".w-slide-list",prevButtonId:".slide-prev",nextButtonId:".slide-next",sliderId:".w-content-slider-pagination",pageItemId:".slide-list-page",hideButtons:!0,disablingDelay:200,scrollTimeout:null,apiExtraParams:{useMyModulesInsteadOfTagInteraction:!!e.getAttribute("data-use-my-modules-instead-of-tag-interaction")},onSpecificInit:function(e){console.log("Specific initialization")},onSpecificAfterResponse:function(e){window.initializeInteractives()}};new re(e,n).init()}else{var i=e.closest(".promotion-offer-box"),o=e.querySelector(".slide-prev"),a=e.querySelector(".slide-next"),s="",l=[];if(l.push(e.getAttribute("data-style-path-url")),i){var c=i.querySelector("[data-user-name-tag-for]");c&&(s=c.outerHTML),l.push(i.getAttribute("data-style-path-url"))}var d={firstElementsOffset:null,firstElements:[(0,M.CC)('\n                        <div class="display-card dc-quick-rating">\n                            <div class="quick-rating-start empty-state">\n                            </div>\n                        </div>\n                    ')],lastElementsOffset:1,lastElements:[(0,M.CC)('\n                        <div class="display-card dc-quick-rating">\n                            <div class="quick-rating-end">\n                                '.concat(s,'\n                                <h3 style="user-select: none; text-align: left;">Continue rating and adding items to the lists on your profile.</h3>\n                                <a href="/profile/mylists/?ref=middle" id="non-premium-prompt-continue-btn" class="btn-premium primary icon icon-end i-arrow">Build Your Lists</a>\n                            </div>\n                        </div>\n                    ')),(0,M.CC)('\n                        <div class="display-card dc-quick-rating  bob-is-your-uncle">\n                            <div class="quick-rating-end empty-state">\n                            </div>\n                        </div>\n                    ')],hiddenClass:"not-in-sight",focusChild:+(t.getAttribute("data-already-rated-count")||0),pageSize:t.getAttribute("data-page-size")||1,nextPageThreshold:3,beforeLoad:function(e,t,n){var i=n.querySelectorAll(".user-rating-score[data-id-tag]"),o=i[i.length-1];o&&t.set("refIdTag",o.getAttribute("data-id-tag"))},apiExtraParams:{no_container:!!t.getAttribute("data-no-container"),useMyModulesInsteadOfTagInteraction:!!e.getAttribute("data-use-my-modules-instead-of-tag-interaction")},apiEndpoint:t.getAttribute("data-endpoint"),onLoaded:function(e,t){window.initializeInteractives()},onShifted:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.isAtEnd?a.style.display="none":a.style.display="",t.isAtBeginning?o.style.display="none":o.style.display=""}};(0,M.Gt)(l,function(){var n=new ce(t,d);e.removeAttribute("hidden"),t.addEventListener("vn_ui:rated",function(e){n.next()}),t.addEventListener("vn_ui:jump_to",function(e){n.jumpTo(e.target)}),a.addEventListener("click",function(){n.next()}),o.addEventListener("click",function(){n.prev()}),new D(e,{onSwipeLeft:function(){n.next()},onSwipeRight:function(){n.prev()}})})}e.isAlreadAttached=!0};for(a.s();!(r=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}},window.addEventListener("valnet_ui_event:post_load_init",function(){(0,M.jx)(window.enableRatingCardPagination)}),(0,M.jx)(window.enableRatingCardPagination),window.scrollToElement=function(e){if(e){var t=document.querySelector("header").offsetHeight;e.scrollIntoView({behavior:"auto",block:"start"}),window.scrollBy(0,-t)}},window.focusQuillEditor=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=document;t&&(i=t,window.scrollToElement(t)),window.addEventListener("valnet_ui_event:quill_attached",function(){n&&"function"==typeof n&&n();var t=i.querySelector(e);t&&t.focus()})},window.handleQuillLoginAction=function(){var e=document.querySelector("div#thread-comment-container");window.focusQuillEditor('.ql-editor[contenteditable="true"]',e)},window.handleRedirectThenReplyAction=function(e){var t={action:"reply",data:e};localStorage.setItem("valnetLoginAction",JSON.stringify(t));var n=new URL(window.location);n.searchParams.set("post",e.editorContainer),window.location.href=n},window.handleReplyLoginAction=function(e){var t=document.querySelector("#threads");t&&window.scrollToElement(t);var n=document.querySelector('button[data-id-comment="'.concat(e.idComment,'"][data-editor-container="').concat(e.editorContainer,'"]'));n&&(window.quillEditor?window.replyToComment(n):window.addEventListener("valnet_ui_event:quill_attached",function(){window.replyToComment(n)}),window.scrollToElement(n))},window.handleValnetLoginAction=function(){var e=window.localStorage.getItem("valnetLoginAction");if(e){window.localStorage.removeItem("valnetLoginAction");var t=(e=JSON.parse(e)).action,n=e.data;switch(history.scrollRestoration&&["quill","reply","vote"].includes(t)&&(history.scrollRestoration="manual"),t){case"quill":var i=document.querySelector("div#commentInput");"none"!==i.style.display&&i.click(),setTimeout(function(){window.handleQuillLoginAction()},0);break;case"redirectThenReply":n&&window.handleRedirectThenReplyAction(n);break;case"reply":n&&window.handleReplyLoginAction(n)}}},(0,M.jx)(window.handleValnetLoginAction),window.attachTabContainers=function(){document.querySelectorAll('[data-is-tab-container="true"]').forEach(function(e){new be(e)})},(0,M.jx)(window.attachTabContainers),window.attachSidebarTabSwitcher=function(){},(0,M.jx)(window.attachSidebarTabSwitcher),document.querySelectorAll(".mod-upload-button").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=window.websiteUser||null;(0,s.verifyUser)(t)&&(window.location.href="/profile/mod/create/")})}),window.onbeforeunload=function(){if(!0===window.val_form_dirty_flag)return"Are you sure you want to exit? Your changes will not be saved."},"complete"!==document.readyState?document.addEventListener("readystatechange",function(e){"complete"===e.target.readyState&&window.valnetLoadFooter()}):window.valnetLoadFooter(),function(){try{var e,t=function(){var e=document.querySelector(".w-jump-links");e&&"1"!==e.dataset.userToggled&&(window.innerWidth>=n?e.style.removeProperty("display"):e.style.display="none")},n=1700;i=t,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i,{once:!0}):i(),window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(t,200)})}catch(e){console.error(e),console.error("Error initializing auto-expand jump links")}var i}(),function(){try{var e=function(){var e,t,n="loadedPage2+",i=(e=s,2===(t=("; "+document.cookie).split("; "+e+"=")).length?t.pop().split(";").shift():null);if(i)try{var o=JSON.parse(decodeURIComponent(i));o&&o.came_from_homepage&&(n="loadedPage2+_homepage")}catch(e){console&&console.warn&&console.warn('[Premium Blocker][Event Tracker] Error parsing "'+s+'":',e)}return window.isInternalTraffic&&n?n:"loadedLandingPage"},t=function(){return!(!window.websiteSentinel||"function"!=typeof window.websiteSentinel.sendEvent)},n=function(e){if(!window.__premiumBlockerSentinelSent&&t())try{window.websiteSentinel.sendEvent(r,e,""),window.__premiumBlockerSentinelSent=!0,window.__premiumBlockerSentinelTimer&&(clearInterval(window.__premiumBlockerSentinelTimer),window.__premiumBlockerSentinelTimer=null)}catch(e){console&&console.error&&console.error("[Premium Blocker] Failed to send sentinel event:",e)}},i=function(){return!!window.__premiumBlockerSentinelSent||!!document.querySelector(a)&&(function(){if(!window.__premiumBlockerSentinelSent){var i=e();if(t())n(i);else if(!window.__premiumBlockerSentinelQueued){window.__premiumBlockerSentinelQueued=!0;var o=0;window.__premiumBlockerSentinelTimer=setInterval(function(){if(window.__premiumBlockerSentinelSent)return clearInterval(window.__premiumBlockerSentinelTimer),void(window.__premiumBlockerSentinelTimer=null);o++,t()?n(i):o>=100&&(clearInterval(window.__premiumBlockerSentinelTimer),window.__premiumBlockerSentinelTimer=null,console&&console.warn&&console.warn("[Premium Blocker][Event Tracker] Sentinel is not defined (timed out)"))},100)}}}(),!0)},o=function(){if(!i())try{var e=0,t=setInterval(function(){e++,(i()||e>=150)&&clearInterval(t)},100)}catch(e){console.warn("[Premium Blocker] failed:",e)}},r="article_limit_premium",a=".w-premium-box.article-blocker",s="articlesLimitDepth";"complete"===document.readyState||"interactive"===document.readyState?o():document.addEventListener("DOMContentLoaded",o,{once:!0})}catch(e){console.error("[Premium Blocker] Tracker init error:",e)}}(),window.showShortVideoPreview=function(){var e=null,t=null,n=null,i=new WeakMap,o=function(){t&&(t.pause(),t.style.display="none"),t=null,e=null};document.querySelectorAll(".display-card.short-video").forEach(function(r){var a=r.getAttribute("data-preview-url");if(a&&""!==a.trim()){var s=r.querySelector(".dc-img");if(s){var l=s.querySelector("img");if(l){var c=a.includes(".m3u8");r.addEventListener("mouseenter",function(){n&&(clearTimeout(n),n=null),n=setTimeout(function(){e&&e!==r&&o();var n=i.get(r);if(n&&n.video)return n.video.style.display="block",n.video.currentTime=0,n.video.play().catch(function(e){console.warn("Video play failed:",e)}),t=n.video,void(e=r);var d=l.offsetWidth,u=l.offsetHeight,h=document.createElement("video");h.muted=!0,h.playsInline=!0,h.autoplay=!0,h.loop=!0,h.setAttribute("playsinline",""),h.setAttribute("webkit-playsinline",""),h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.width=d+"px",h.style.height=u+"px",h.style.objectFit="cover",h.style.zIndex="1",h.style.pointerEvents="none";var f=s.style.position,m=s.style.overflow;f&&"static"!==f||(s.style.position="relative"),s.style.overflow="hidden",s._originalPosition=f,s._originalOverflow=m,h.addEventListener("timeupdate",function(){h.currentTime>=5&&(h.currentTime=0)}),h.addEventListener("ended",function(){h.currentTime=0,h.play().catch(function(){})}),h.addEventListener("error",function(){console.warn("Short video preview failed to load:",a),o()}),s.appendChild(h),t=h,e=r;var p=null;if(c&&window.Hls&&window.Hls.isSupported())(p=new window.Hls({enableWorker:!1,lowLatencyMode:!0})).loadSource(a),p.attachMedia(h),p.on(window.Hls.Events.MANIFEST_PARSED,function(){h.play().catch(function(e){console.warn("Video autoplay failed:",e)})}),p.on(window.Hls.Events.ERROR,function(e,t){t.fatal&&(console.warn("HLS error:",t),o())});else if(c&&h.canPlayType("application/vnd.apple.mpegurl"))h.src=a,h.play().catch(function(e){console.warn("Video autoplay failed:",e)});else{if(c)return console.warn("HLS playback not supported. Include hls.js for cross-browser support."),void o();h.src=a,h.play().catch(function(e){console.warn("Video autoplay failed:",e)})}i.set(r,{video:h,hls:p})},150)}),r.addEventListener("mouseleave",function(){n&&(clearTimeout(n),n=null),e===r&&o()})}}}})},window.showShortVideoPreview(),window.attachShortVideoPopup=function(){document.querySelectorAll(".display-card.short-video").forEach(function(e){var t=e.getAttribute("data-content-id"),n=e.getAttribute("data-anchor-tag-id"),i=e.getAttribute("data-is-popup-enabled");e.addEventListener("click",function(){"true"==i&&new rt({currentVideoId:t,hasVideoHomepage:window.hasVideoHomepage,zoneName:"Instream-Popup",renderMode:"popup",modalId:"vertical-short-video-modal",anchorTag:n}).init()})})},window.attachShortVideoPopup()},6244(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var i=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=Object.assign({},this.defaults,t),this.trackedWindow=null,this.redirectUri=this.options.redirectUri,this.platformEmailCreationUri=this.options.platformEmailCreationUri,this.elementResponseId=this.options.elementResponseId,this.windowFeatures=this.options.windowFeatures||"width=500,height=600,scrollbars=yes,resizable=yes",this.authButton=this.options.authButton},(n=[{key:"defaults",get:function(){return{redirectUri:window.location.origin,platformEmailCreationUri:window.location.origin,elementResponseId:"auth-platform-user-check",windowFeatures:"width=500,height=600,scrollbars=yes,resizable=yes",pollInterval:500,timeout:3e5,onPathChange:function(e,t){console.info("Path changed: Default implementation")},onTargetReached:function(e,t,n){console.info("Target reached: Default implementation")},onClosed:function(e){console.info("Window closed: Default implementation"),window.focus()},onTimeout:function(e){console.info("Timeout reached: Default implementation"),window.focus(),e.closeWindow()}}}},{key:"getAuthUrl",value:function(){var e=new URLSearchParams({"openid.ns":"http://specs.openid.net/auth/2.0","openid.mode":"checkid_setup","openid.return_to":this.redirectUri,"openid.realm":window.location.origin,"openid.identity":"http://specs.openid.net/auth/2.0/identifier_select","openid.claimed_id":"http://specs.openid.net/auth/2.0/identifier_select"});return"https://steamcommunity.com/openid/login?".concat(e.toString())}},{key:"auth",value:function(){var e=window.screenX+(window.outerWidth-500)/2,t=window.screenY+(window.outerHeight-600)/2,n="".concat(this.windowFeatures,",left=").concat(e,",top=").concat(t),i=this.getAuthUrl();return this.trackedWindow=window.open(i,"steamAuth",n),this.trackWindowProxy()}},{key:"closeWindow",value:function(){this.hasWindow()&&(this.getWindow().close(),this.trackedWindow=null)}},{key:"getWindow",value:function(){return this.trackedWindow}},{key:"hasWindow",value:function(){return null!==this.trackedWindow}},{key:"isWindowClosed",value:function(){return!this.hasWindow()||this.getWindow().closed}},{key:"updatePlatformUserEmailAndLogin",value:function(e,t,n){var i=new URLSearchParams;return i.append("platformEmail",e),i.append("platformUserId",t),i.append("platformName",n),fetch(this.platformEmailCreationUri,{method:"POST",body:i})}},{key:"extractSteamId",value:function(e){var t=e.match(/\/id\/(\d+)$/);return t?t[1]:""}},{key:"getSteamId",value:function(){var e=new URLSearchParams(this.trackedWindow.location.search);return this.extractSteamId(e.get("openid.identity"))}},{key:"trackWindowProxy",value:function(){if(this.hasWindow()){var e=null,t=Date.now(),n=this,i=setInterval(function(){try{if(n.isWindowClosed())return clearInterval(i),void n.options.onClosed(n);if(Date.now()-t>n.options.timeout)return clearInterval(i),window.focus(),n.closeWindow(),void n.options.onTimeout(n);var o=n.trackedWindow.location.href,r=n.trackedWindow.location.pathname;if(r!==e&&(e=r,n.options.onPathChange(n,{href:o,pathname:r})),r===n.redirectUri||o.includes(n.redirectUri)){clearInterval(i);var a=n.checkPopupStatus(),s=n.getSteamId();n.closeWindow(),n.options.onTargetReached(n,s,a)}}catch(e){console.error("Error tracking window:",e)}},this.options.pollInterval);return{stop:function(){return clearInterval(i)},timerId:i}}}},{key:"checkPopupStatus",value:function(){try{var e=JSON.parse(this.trackedWindow.document.getElementById("steam-auth-data").dataset.response);return e?e.success?{status:200,message:"success",isUserExists:e.isUserExists}:{status:e.code,message:e.message}:{status:500,message:"error"}}catch(e){return{status:"cross-origin",message:"Cannot access popup content"}}}},{key:"sendSentinelEventFromResponseData",value:function(e){if(e){var t={name:window.getLoginFormEventCategoryOpening(),action:e.isUserExists?"login":"registration"};this.sendWebsiteSentinelEvent(t)}}},{key:"sendWebsiteSentinelEvent",value:function(e){window.websiteSentinel&&(console.info("steam event sent ->",e),window.websiteSentinel.sendEvent(e.name,e.action,"steam"))}},{key:"validateEmail",value:function(e){return(e=e.trim())?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?e.length>254?{valid:!1,message:"Email address is too long."}:{valid:!0,message:""}:{valid:!1,message:"Please enter a valid email address."}:{valid:!1,message:"Email is required."}}},{key:"findContainerAndMode",value:function(e){for(var t=this.authButton.parentElement;t&&!t.matches(e);)t=t.parentElement;var n=null;if(!t)throw new Error("Could not find parent container");switch(t.id){case"login-form-popup":n="popup";break;case"login-form-static":n="static";break;case"login-form-drawer":n="drawer"}return{container:t,mode:n}}}])&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();window.handleSteamLogin=function(e){try{var t={redirectUri:"".concat(window.location.origin,"/steam-login/"),platformEmailCreationUri:"".concat(window.location.origin,"/update-auth-platform-user-and-login/"),elementResponseId:"auth-platform-user-check",windowFeatures:"width=500,height=600,scrollbars=yes,resizable=yes",authButton:e,onTargetReached:function(e,t,n){if("404"===n.status||404===n.status){var i=e.findContainerAndMode(".w-valnet-login"),o=i.container,r=i.mode,a=o.querySelector("#login-title-"+r);a&&a.classList.add("is-hidden");var s=o.querySelector("#closeLoginPopupButton-"+r);s&&s.classList.add("from-plaftorm-creation"),ValnetLogin.showPlatformEmailCreationForm("platform-email-creation-container-"+r);var l=o.querySelector("#disclaimer-block-"+r);l&&(l.style.display="block");var c=o.querySelector('[name="platform-user-id"]'),d=o.querySelector('[name="platform-name"]');c.value=t,d.value="steam";var u=o.querySelector("#platform-email-form-error-msg-"+r);o.querySelector('[name="platform-email-button"]').addEventListener("click",function(){var t=o.querySelector('[name="platform-email"]').value,n=e.validateEmail(t);if(!n.valid)return u.textContent=n.message,void u.classList.remove("is-hidden");u.classList.add("is-hidden");var i=o.querySelector('[name="platform-user-id"]').value,r=o.querySelector('[name="platform-name"]').value;e.updatePlatformUserEmailAndLogin(t,i,r).then(function(e){return e.json()}).then(function(t){if(t.success){var n={name:window.getLoginFormEventCategoryOpening(),action:t.isUserExists?"login":"registration"};e.sendWebsiteSentinelEvent(n),window.resetLoginFormEventCategoryOpening(),window.location.reload()}else u.textContent=t.message,u.classList.remove("is-hidden")}).catch(function(e){console.error("Error creating platform email:",e),u.textContent="Error logging in",u.classList.remove("is-hidden")})})}else"200"===n.status||200===n.status?(e.sendSentinelEventFromResponseData(n),window.resetLoginFormEventCategoryOpening(),window.location.reload()):window.location.reload()}};new i(t).auth()}catch(e){console.error("Twitch authorization failed:",e)}}},7158(){window.handleDiscordLogin=function(){var e=window.discordClientId,t=encodeURIComponent(window.location.origin+"/discord-callback/"),n=encodeURIComponent(window.location.href),i=encodeURIComponent("identify email");window.location.href="https://discord.com/api/oauth2/authorize?client_id=".concat(e,"&redirect_uri=").concat(t,"&prompt=none&response_type=code&scope=").concat(i,"&state=").concat(n)},window.checkDiscordLogin=function(){var e=new URLSearchParams(window.location.search),t=e.get("discordLogin")||null;if(t&&window.getLoginFormEventCategoryOpening())if(console.log("discordLogin 1"),"complete"===document.readyState&&window.websiteSentinel){if("login"==t){var n=window.getLoginFormEventCategoryOpening()||"login";window.websiteSentinel&&window.websiteSentinel.sendEvent(n,"login","discord"),console.log("discordLogin 2"),gtag("event",n,{event_action:"login",event_label:window.location.pathname}),window.resetLoginFormEventCategoryOpening(),console.log("discordLogin 3")}else{console.log("discordLogin 4");var i=window.getLoginFormEventCategoryOpening()||"registration";window.websiteSentinel&&window.websiteSentinel.sendEvent(i,"registration","discord"),console.log("discordLogin 5"),gtag("event",i,{event_action:"registration",event_label:window.location.pathname}),window.resetLoginFormEventCategoryOpening(),console.log("discordLogin 6")}if(apiCallCallback=window.localStorage.getItem("apiCallCallback"),apiCallCallbackOptions=window.localStorage.getItem("apiCallCallbackOptions"),console.log("discordLogin 7"),apiCallCallback&&apiCallCallbackOptions)console.log("discordLogin 8"),valnetLoginAction={apiCallCallback,apiCallCallbackOptions},window.handleValnetAfterLoginCall(window.valnetLoginAction,!0);else{console.log("loginRedirectDiscord",e.get("loginRedirect"));var o=e.get("loginRedirect");window.forceRedirectToWiki(o)}}else{console.log("discordLogin 9");var r=setInterval(function(){if("complete"===document.readyState&&window.websiteSentinel){if(clearInterval(r),console.log("discordLogin 10"),"login"==t){var n=window.getLoginFormEventCategoryOpening()||"login";window.websiteSentinel&&window.websiteSentinel.sendEvent(n,"login","discord"),gtag("event",n,{event_action:"login",event_label:window.location.pathname}),window.resetLoginFormEventCategoryOpening(),console.log("discordLogin 11")}else{console.log("discordLogin 12");var i=window.getLoginFormEventCategoryOpening()||"registration";window.websiteSentinel&&window.websiteSentinel.sendEvent(i,"registration","discord"),gtag("event",i,{event_action:"registration",event_label:window.location.pathname}),window.resetLoginFormEventCategoryOpening()}if(apiCallCallback=window.localStorage.getItem("apiCallCallback"),apiCallCallbackOptions=window.localStorage.getItem("apiCallCallbackOptions"),console.log("discordLogin 13"),apiCallCallback&&apiCallCallbackOptions)valnetLoginAction={apiCallCallback,apiCallCallbackOptions},window.handleValnetAfterLoginCall(window.valnetLoginAction,!0),console.log("discordLogin 14");else{console.log("loginRedirectDiscord",e.get("loginRedirect"));var o=e.get("loginRedirect");window.forceRedirectToWiki(o)}}},100)}};var e=new CustomEvent("vn_ui:provider:loaded",{bubbles:!0,detail:{provider:"discord"}});window.dispatchEvent(e)},8089(e,t,n){"use strict";n.r(t),n.d(t,{verifyUser:()=>l});var i=n(925);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"thread",o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(r=a(a({},{mode:"popup",idParent:null,className:"popup",triggeredFrom:"thread",gaEventCategory:"thread",showCloseButton:!0}),r),!e){if(window.dispatchEvent(new CustomEvent("valnet_ui_event:user_not_logged_in")),t){if(!window.ValnetLogin)return console.error("ValnetLogin is not defined."),!1;var c=new ValnetLogin(r);c.showLoginForm(c),o&&(location.hash=n)}return"function"==typeof s&&s(),!1}if(!e.isVerified){if(window.dispatchEvent(new CustomEvent("valnet_ui_event:user_not_verified")),t)(new i.A).showAccountVerificationPopup();return"function"==typeof l&&l(),!1}return!0}},8341(){window.initGoogleLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(window.googleClientId&&void 0!==window.google){window.google.accounts.id.initialize({client_id:window.googleClientId,callback:function(t){window.handleCredentialResponse(t,e)}});var t=function(){var e=document.createElement("div");e.style.display="none",document.body.appendChild(e),window.google.accounts.id.renderButton(e,{type:"icon",width:"200"});var t=e.querySelector("div[role=button]");return{click:function(){t.click()}}}();window.handleGoogleLogin=function(){t.click()}}},window.handleCredentialResponse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;console.log("Encoded JWT ID token: "+e.credential),window.handleGoogleLoginResponse(e.credential,t)},window.handleGoogleLoginResponse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=new XMLHttpRequest;n.open("POST","/google-login/",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var i=new URLSearchParams(window.location.search);n.onreadystatechange=function(){if(4==n.readyState){var e=JSON.parse(n.response);if(e.success){if(void 0!==t?(console.log("%cSending Sentinel Event on google login: %c"+(e.isUserExists?"Login":"Registration"),"color: white; background-color: #007bff; padding: 2px 4px; border-radius: 2px;","color: #007bff; background-color: #e9ecef; padding: 2px 4px; border-radius: 2px;"),t.sendWebsiteSentinelEvent(window.getLoginFormEventCategoryOpening(),e.isUserExists?"login":"registration","google")):window.websiteSentinel&&window.websiteSentinel.sendEvent(window.getLoginFormEventCategoryOpening(),e.isUserExists?"login":"registration","google"),window.resetLoginFormEventCategoryOpening(),e.isUserExists)void 0!==t?t.handleAfterLogin():(console.log("Reload 001"),location.reload());else{console.log("Reload 002"),window.showNewsletterPreferencesPopup(),console.log("Reload 003");var o=i.get("loginRedirect");window.forceRedirectToWiki(o)}window.hidePopups()}}},n.send("token="+JSON.stringify(e))},window.hidePopups=function(e){var t=document.getElementById("login-popup-container");t&&t.classList.remove("is-visible");var n=document.getElementById("register-popup-container");n&&n.classList.remove("is-visible");var i=document.getElementById("login-form-container");i&&i.classList.remove("is-visible");var o=document.getElementById("register-form-container");o&&o.classList.remove("is-visible");var r=document.getElementById("article-limit-container");r&&r.classList.remove("is-visible")}},9405(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var i=function(){"use strict";return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ajaxUrl=t.ajaxUrl,this.waypointElement=t.waypointElement,this.divSection=t.divSection,this.totalNumClips=t.totalNumClips,this.animLoadinId=t.animLoadinId,this.archivePath=t.archivePath,this.excludedIds=t.excludedIds,this.numClipsRequested=t.numClipsRequested,this.divClassName=t.divClassName,t.hasOwnProperty("showMoreButton")?this.showMoreButton=t.showMoreButton:this.showMoreButton=!1,t.hasOwnProperty("tagInfo")?this.tagInfo=t.tagInfo:this.tagInfo=!1,t.hasOwnProperty("showMorePermalink")?this.showMorePermalink=t.showMorePermalink:this.showMorePermalink="",this.triggerWayPointHandler=!0},(n=[{key:"getAjaxRequest",value:function(){var e=new XMLHttpRequest;return e.open("POST",this.ajaxUrl,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e}},{key:"addLink",value:function(e){var t=document.createElement("a");t.className="infinite-btn-next";var n=document.createTextNode("Next");return t.appendChild(n),t.href=this.archivePath+e+"/",t}},{key:"addNextText",value:function(){var e=document.getElementsByClassName("infinite-btn-next")[0];e.innerHTML="";var t=document.createTextNode("Next");return e.appendChild(t),e}},{key:"updateLink",value:function(e){var t=document.getElementsByClassName("infinite-btn-next")[0];return""!=this.showMorePermalink?t.href=this.showMorePermalink:t.href=this.archivePath+(e+1)+"/",t}},{key:"hideLink",value:function(){var e=document.getElementsByClassName("infinite-btn-next")[0];return e.setAttribute("display","none"),e}},{key:"showLink",value:function(){var e=document.getElementsByClassName("infinite-btn-next")[0];return e.removeAttribute("style"),e}},{key:"hideFooter",value:function(){var e=document.getElementById("w-footer wrapper");e&&(e.style.display="none")}},{key:"showFooter",value:function(){var e=document.getElementById("w-footer wrapper");e&&e.removeAttribute("style")}},{key:"hideSidebar",value:function(){var e=document.getElementById("secondary");e&&(e.style.display="none")}},{key:"showSidebar",value:function(){var e=document.getElementById("secondary");e&&e.removeAttribute("style")}},{key:"showLoader",value:function(){var e=document.getElementById("waypointLoader");e&&(e.style.visibility="visible")}},{key:"hideLoader",value:function(){var e=document.getElementById("waypointLoader");e&&(e.style.visibility="hidden")}},{key:"removeNextLink",value:function(){if(1==this.showMoreButton){var e=document.getElementsByClassName("infinite-btn-next");if(e[0])for(var t=0;t<e.length;t++)this.divSection.removeChild(e[t])}}},{key:"loadingAnim",value:function(e){1==e?this.showLoader():this.hideLoader()}},{key:"setAjaxUrl",value:function(e){this.ajaxUrl=e}},{key:"setDivClassName",value:function(e){this.divClassName=e}},{key:"setTriggerWayPointHandler",value:function(e){this.triggerWayPointHandler=e}},{key:"setExcludedIds",value:function(e){this.excludedIds=e}},{key:"setArchivePath",value:function(e){this.archivePath=e}},{key:"setShowMorePermalink",value:function(e){this.showMorePermalink=e}},{key:"waypointHandler",value:function(){this.showLoader();var e=this.getAjaxRequest(),t=this,n=function(e,t){return e*t},i=this.divSection.getElementsByClassName(this.divClassName).length,o=n(i,this.numClipsRequested);if(e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var r=""!==e.response?JSON.parse(e.response):[];if(""!==r.html){t.excludedIds=r.excludedIds;var a=document.createElement("div");a.innerHTML=r.html;var s=t.waypointElement.parentNode;t.hideLoader(),s.insertBefore(a,t.waypointElement),new valnet_sentinel("pageView",null),i=t.divSection.getElementsByClassName(t.divClassName).length,o=n(i,t.numClipsRequested),null!=window.disqusEnable&&1==window.disqusEnable&&null!=window.disqusCommentCountOnBrowseClipEnable&&1==window.disqusCommentCountOnBrowseClipEnable&&DISQUSWIDGETS.getCount({reset:!0}),t.updateLink(i),o==t.totalNumClips&&1==t.showMoreButton?(t.triggerWayPointHandler=!1,t.hideLoader(),t.showLink(),t.showFooter(),"mobile"==window.device&&t.showSidebar(),t.addNextText()):(t.hideLink(),t.hideFooter(),"mobile"==window.device&&t.hideSidebar()),document.getElementById("non-premium-overlay")&&"true"==function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}("displayPremiumAd")&&(document.getElementById("non-premium-overlay").style.display="flex",function(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var o="expires="+i.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"}("displayPremiumAd","false",2)),r.newsletterPopupVisibility&&window.showNewsletterPopup()}else t.hideLoader(),t.showFooter(),"mobile"==window.device&&t.showSidebar(),t.triggerWayPointHandler=!1;setTimeout(function(){t.wayPointTrigger()},1e3)}},o<this.totalNumClips&&1==this.triggerWayPointHandler){this.showLoader();var r="clipInfo="+encodeURIComponent(JSON.stringify({currentNoClips:o,excludedIds:this.excludedIds,tagInfo:this.tagInfo}));e.send(r)}else t.triggerWayPointHandler=!1,this.hideLoader()}},{key:"wayPointTrigger",value:function(){this.waypointObject&&this.waypointObject.destroy();var e=this;this.waypointObject=new Waypoint({element:this.waypointElement,handler:function(t){"down"==t&&e.waypointHandler()},offset:"bottom-in-view"})}}])&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();window.LatestBrowseClip=i}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(3474),n(3575),n(9405),n(2586),n(2751),n(8341),n(7158),n(6244),n(2870),n(925);n(6241)})();