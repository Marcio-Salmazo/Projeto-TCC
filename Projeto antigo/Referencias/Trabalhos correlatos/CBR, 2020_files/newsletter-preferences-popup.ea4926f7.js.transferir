(()=>{function e(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}window.showNewsletterPreferencesPopup=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n&&n.preventDefault();var a=document.getElementById("newsletter-preferences-container"),i=document.getElementById("article-limit-drawer");if(!window.newsletterPreferencesPopupInjected&&!a){var s=new XMLHttpRequest;s.open("GET","/newsletter-preferences-popup/?showVerifyMessage="+encodeURIComponent(o),!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var n=s.responseText;if(i&&"banner"==r){n=n.replaceAll("w-login-popup"," w-login-banner");var o=document.createElement("div");o.innerHTML=n;var a=o.children[0];i.replaceWith(a)}else document.body.insertAdjacentHTML("beforeend",n);window.newsletterPreferencesPopupInjected=!0;document.getElementById("newsletter-preferences-container");var l=document.getElementById("newsletterPreferencesPopup"),c=document.getElementById("newsletter-preferences-section");c&&(c.style.display=t?"none":"block"),l.onsubmit=function(n){n.preventDefault();var t,r=new FormData(n.target),o=new URLSearchParams,a=e(r.entries());try{for(a.s();!(t=a.n()).done;){var i=t.value;o.append(i[0],i[1])}}catch(e){a.e(e)}finally{a.f()}var s=new XMLHttpRequest;s.open("POST","/popup-newsletter-preferences/",!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var l=document.getElementById("newsletter-preferences-error-msg");l&&l.classList.add("is-hidden"),s.onreadystatechange=function(){if(4==s.readyState){var e=JSON.parse(s.response);if(e.success&&(window.websiteSentinel&&window.websiteSentinel.sendEvent("registration_form","newsletter_subscription",e.defaultMailingListId),window.callbackUrl?window.location.href=window.callbackUrl:(history.pushState({},"",window.location.pathname+window.location.search),location.reload())),e.error){var n=document.getElementById("newsletter-preferences-error-msg");n&&(n.innerHTML=e.error,n.classList.remove("is-hidden"))}}},s.send(o.toString())}}},s.send()}}})();