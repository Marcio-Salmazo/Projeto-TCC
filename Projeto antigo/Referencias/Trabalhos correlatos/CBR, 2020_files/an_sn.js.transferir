/*! For license information please see an_sn.js.LICENSE.txt */
!function(){function e(e,n=null,t,i=null,o=null,r="all"){if(this.plUrl=e,t&&(this.naMode=t),this.pageLevelDefinition=i,void 0!==i.engagementContainer?this.engagementContainer=i.engagementContainer:this.engagementContainer="article.w-article",this.uuid=this.generateUUID(),this.connectionSpeed=this.getConnectionSpeed(),"init"===r)return!0;if("visit"===r)this.plUrl&&this.sendPl();else if("markers"===r){if(this.plUrl){if("article"==n){var a=document.body;(s=document.querySelectorAll(this.engagementContainer)).length>0&&(a=s[s.length-1]),this.createPageDepthMarkers(a)}null!==o&&(this.infiniteScrollEvent=o,this.listenForInfiniteScroll(o)),this.createEngagedPageTimers()}}else if(this.plUrl){var s;if(this.sendPl(),"article"==n)a=document.body,(s=document.querySelectorAll(this.engagementContainer)).length>0&&(a=s[s.length-1]),this.createPageDepthMarkers(a);null!==o&&(this.infiniteScrollEvent=o,this.listenForInfiniteScroll(o)),this.createEngagedPageTimers()}}e.prototype.setMarkers=function(){if(this.plUrl){if("article"==elementName){var e=document.body,n=document.querySelectorAll(this.engagementContainer);n.length>0&&(e=n[n.length-1]),this.createPageDepthMarkers(e)}null!==infiniteScrollEvent&&(this.infiniteScrollEvent=infiniteScrollEvent,this.listenForInfiniteScroll(infiniteScrollEvent)),this.createEngagedPageTimers()}},e.prototype.sendPl=function(e=null,n=null){var t=this.plUrl,i=document.referrer,o=new XMLHttpRequest,r=window.location.hostname;r.startsWith("www.")||(r="www."+r);var a="https://sentinelbi.com/"+r+"/"+t+"?time="+Date.now();if(a=a+"&permalink=/"+window.location.pathname.replace(/(^\/+|\/+$)/g,"")+"/",i&&(a=a+"&referrer="+i),sessionStorage&&sessionStorage.getItem("sn_ssTr")?a=a+"&isActiveSession="+sessionStorage.getItem("sn_ssTr"):a+="&isActiveSession=0",this.connectionSpeed&&(a=a+"&connSpeed="+this.connectionSpeed),this.naMode&&(a=a+"&naMode="+this.naMode),this.pageLevelDefinition&&(this.pageLevelDefinition.intent&&(a=a+"&intent="+encodeURIComponent(this.pageLevelDefinition.intent)),this.pageLevelDefinition.contentType&&(a=a+"&contentType="+encodeURIComponent(this.pageLevelDefinition.contentType)),this.pageLevelDefinition.primaryTag&&(a=a+"&primaryTag="+encodeURIComponent(this.pageLevelDefinition.primaryTag)),this.pageLevelDefinition.primaryCategory&&(a=a+"&primaryCategory="+encodeURIComponent(this.pageLevelDefinition.primaryCategory)),this.pageLevelDefinition.networkCategory&&(a=a+"&networkCategory="+encodeURIComponent(this.pageLevelDefinition.networkCategory)),this.pageLevelDefinition.adsTemplate&&(a=a+"&template="+encodeURIComponent(this.pageLevelDefinition.adsTemplate)),this.pageLevelDefinition.articleType&&(a=a+"&articleType="+encodeURIComponent(this.pageLevelDefinition.articleType)),void 0!==this.pageLevelDefinition.userRef&&(a=a+"&userRef="+encodeURIComponent(this.pageLevelDefinition.userRef)),void 0!==this.pageLevelDefinition.loggedIn&&(a=a+"&loggedIn="+encodeURIComponent(this.pageLevelDefinition.loggedIn)),void 0!==this.pageLevelDefinition.plan&&(a=a+"&plan="+encodeURIComponent(this.pageLevelDefinition.plan)),this.pageLevelDefinition.referrerOverride&&(a=a+"&referrerOverride="+encodeURIComponent(this.pageLevelDefinition.referrerOverride))),!e&&(e="pageVisit",i&&""!==i.trim())){var s=window.location.hostname,l=null;i&&(l=new URL(i).hostname),e=l===s?"pageView":"pageVisit"}a=a+"&type="+e,null!==n&&(a=a+"&typeValue="+n),a=a+"&uuid="+this.uuid,o.open("GET",a,!0),o.send()},e.prototype.sendVideoPl=function(e,n,t,i=null,o=null,r=null){var a=this.plUrl,s=document.referrer,l=new XMLHttpRequest,p=window.location.hostname;p.startsWith("www.")||(p="www."+p);var c="https://telemetry.adsninja.ca/"+p+"/video/"+a+"?time="+Date.now();c=(c=c+"&referrer="+s)+"&isActiveSession="+(sessionStorage.getItem("sn_ssTr")??0),this.connectionSpeed&&(c=c+"&connSpeed="+this.connectionSpeed),this.naMode&&(c=c+"&naMode="+this.naMode),this.pageLevelDefinition&&(this.pageLevelDefinition.intent&&(c=c+"&intent="+encodeURIComponent(this.pageLevelDefinition.intent)),this.pageLevelDefinition.contentType&&(c=c+"&contentType="+encodeURIComponent(this.pageLevelDefinition.contentType)),this.pageLevelDefinition.primaryTag&&(c=c+"&primaryTag="+encodeURIComponent(this.pageLevelDefinition.primaryTag)),this.pageLevelDefinition.primaryCategory&&(c=c+"&primaryCategory="+encodeURIComponent(this.pageLevelDefinition.primaryCategory)),this.pageLevelDefinition.networkCategory&&(c=c+"&networkCategory="+encodeURIComponent(this.pageLevelDefinition.networkCategory))),c=(c=c+"&type="+n)+"&placement="+e,r&&void 0!==r.videoUrl&&(c=c+"&fileName="+r.videoUrl),r&&void 0!==r.isAutoplay&&(c=c+"&isAutoPlay="+(r.isAutoplay?"1":"0")),t.clientData&&void 0!==t.clientData.url&&(c=c+"&permalink=/"+t.clientData.url.replace(/(^\/+|\/+$)/g,"")+"/"),t.clientData&&void 0!==t.clientData.template&&(c=c+"&template="+t.clientData.template),t.clientData&&void 0!==t.clientData.source&&(c=c+"&source="+t.clientData.source),c=c+"&uuid="+this.uuid,l.open("GET",c,!0),l.send()},e.prototype.createPageDepthMarkers=function(e){var n=e.getBoundingClientRect().top+document.documentElement.scrollTop,t=e.offsetHeight,i=this;[0,20,40,60,80,100].forEach(function(e){!function(e,n,t,i){var o=t*i/100+n;function r(){window.scrollY+window.innerHeight>o&&(e.percentMarkerHandler(i),window.removeEventListener("scroll",r))}window.addEventListener("scroll",r)}(i,n,t,e)})},e.prototype.percentMarkerHandler=function(e){this.sendPl("engagedDepth",e)},e.prototype.createEngagedPageTimers=function(){var e,n=0,t=0,i=[5e3,1e4,15e3,25e3,35e3,45e3,65e3,85e3,105e3,145e3,185e3,225e3,305e3,385e3,465e3,625e3,785e3,945e3,1265e3,1585e3,1905e3],o=this,r=!1;function a(){n>18e5||(e=setTimeout(a,i[t]-n),r||(n>0&&o.engagedTimeHandler(i[t-1]/1e3),n=i[t],t+=1))}document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState?(clearTimeout(e),r=!0):(a(),r=!1)}),a()},e.prototype.engagedTimeHandler=function(e){this.sendPl("engagedSeconds",e)},e.prototype.getConnectionSpeed=function(){var e=null;return navigator.connection&&(e=navigator.connection.downlink),e},e.prototype.generateUUID=function(){return"function"==typeof crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})},e.prototype.listenForInfiniteScroll=function(e){window.addEventListener(e,e=>{this.sendPl("pageView")})},window.senp=e}(),function(){window.an_sn=window.an_sn||{},window.an_sn.queue=window.an_sn.queue||[],window.an_sn.__sn=null;var e=!0;window.an_sn.init=function(e,n="all"){var t=0;if((null==e.mode_A||void 0!==e.mode_A&&2===e.mode_A)&&(t=1),window.senp&&e.hasOwnProperty("an_sn_e")&&e.an_sn_e){var i=null;void 0!==e.pageLevelDefinition&&(i=e.pageLevelDefinition);var o=null;void 0!==e.infiniteScrollEvent&&(o=e.infiniteScrollEvent),window.an_sn.__sn=new senp("senp.png","article",t,i,o,n)}},window.an_sn.setMarkers=function(e){var n=0;if((null==e.mode_A||void 0!==e.mode_A&&2===e.mode_A)&&(n=1),window.senp&&e.hasOwnProperty("an_sn_e")&&e.an_sn_e){var t=null;void 0!==e.pageLevelDefinition&&(t=e.pageLevelDefinition);var i=null;void 0!==e.infiniteScrollEvent&&(i=e.infiniteScrollEvent),new senp("senp.png","article",n,t,i,"markers")}},window.an_sn.processQueue=function(){for(;window.an_sn.queue.length>0;){var n=window.an_sn.queue.shift();try{n()}catch(e){console.error("Error encountered while processing queue.",{error:e,closure:n})}}e&&(window.an_sn.queue.push=function(){Array.prototype.push.apply(this,arguments),window.an_sn.processQueue()},window.an_sn.queue.unshift=function(){Array.prototype.unshift.apply(this,arguments),window.an_sn.processQueue()},e=!1)},"complete"!==document.readyState?document.addEventListener("readystatechange",function(e){"complete"===e.target.readyState&&window.an_sn.processQueue()}):window.an_sn.processQueue()}();
//# sourceMappingURL=an_sn-7aaaddb3f56cca7e0b6d.js.map