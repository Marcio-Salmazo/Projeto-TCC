(()=>{var __webpack_modules__={399(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}n.d(t,{I:()=>r});var r=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video=t,this.isPlaying=!1,this.options=Object.assign({},this.defaultOptions,n),this.setupEventListeners()},(t=[{key:"defaultOptions",get:function(){var e=this;return{openOnFullscreen:!0,autoPlay:!0,pauseOnExit:!1,replayOnExit:!1,replayOnEnd:!0,stateButton:null,onPlay:function(t){e.isPlaying=!0},onPause:function(t){e.isPlaying=!1},onEnded:function(t){e.isPlaying=!1},onExit:function(t){console.log("Video exited"),t.options.pauseOnExit&&e.video.pause(),t.options.replayOnExit&&(e.video.currentTime=0)}}}},{key:"setupEventListeners",value:function(){var e=this;this.video.addEventListener("play",function(){e.isPlaying=!0,e.video.controls=!0,e.onPlay()}),this.video.addEventListener("pause",function(){e.isPlaying=!1,e.onPause()}),this.video.addEventListener("ended",function(){e.isPlaying=!1,e.onEnded()})}},{key:"onPlay",value:function(){this.options.onPlay(this)}},{key:"onPause",value:function(){this.options.onPause(this)}},{key:"onEnded",value:function(){this.options.onEnded(this)}},{key:"onExit",value:function(){var e=this,t=this,n=function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||(t.options.onExit(e),document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n),document.removeEventListener("msfullscreenchange",n),document.removeEventListener("mozfullscreenchange",n))};document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("msfullscreenchange",n),document.addEventListener("mozfullscreenchange",n)}},{key:"getCurrentState",value:function(){return{isPlaying:this.isPlaying,currentTime:this.video.currentTime,duration:this.video.duration,paused:this.video.paused,ended:this.video.ended}}},{key:"playVideo",value:function(){this.options.openOnFullscreen?this.playVideoFullScreen():this.video.play()}},{key:"requestFullscreenForVideo",value:function(){return this.video.requestFullscreen?this.video.requestFullscreen():this.video.webkitRequestFullscreen?this.video.webkitRequestFullscreen():this.video.msRequestFullscreen?this.video.msRequestFullscreen():this.video.mozRequestFullScreen?this.video.mozRequestFullScreen():void 0}},{key:"playVideoFullScreen",value:function(){var e=this;if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))this.options.autoPlay&&this.video.play(),void 0!==playPromise?playPromise.then(function(){e.requestFullscreenForVideo()}).catch(function(t){console.warn("Safari autoplay failed:",t),e.requestFullscreenForVideo()}):(this.options.autoPlay&&this.video.play(),this.requestFullscreenForVideo());else{var t=this.requestFullscreenForVideo();t&&t.then?t.then(function(){e.options.autoPlay&&e.video.play()}).catch(function(t){console.warn("Fullscreen request failed:",t),e.options.autoPlay&&e.video.play()}):this.options.autoPlay&&this.video.play()}this.onExit(),this.video.addEventListener("ended",this.onEnded)}}])&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},443(e,t,n){"use strict";n.d(t,{R:()=>v});var i=n(3768),o=n(6374),a=n(906),r=n(7243);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,u(i.key),i)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var m="shortVideoWatchHistory",v=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.landingVideoId=t.currentVideoId||[],this.hasVideoHomepage=t.hasVideoHomepage||!1,this.zoneName=t.zoneName,this.renderMode=t.renderMode||"page",this.modalId=t.modalId||"",this.anchorTag=t.anchorTag||"",this.returnUrl=window.location.href,this.fetchBaseUrl="/fetch/vertical-short-article/",this.enableAdSlides=!1,this.videoIds=[],this.videos=[],this.currentIndex=0,this.currentPlayerId=null,this.loadedCount=0,this.batchSize=1,this.hasAutoUnmuted=!1,this.savedVolume=null,this.navUpButton=null,this.navDownButton=null,this.isDragging=!1,this.startY=0,this.currentTranslateY=0,this.dragThreshold=25,this.previewVideoElements={next:null,prev:null},this.transitionPreviewType=null,this.transitionOverlay=null,this.transitionedPreviewElement=null,this.isPageLoad=!0,this.permalinkToId=[],this.locationHash=document.location.hash||"",this.batchQueue=[],this.isFetching=!1,this.noMoreResults=!1,this.embedsCache=[],this.videoContainer=document.querySelector(".w-adsninja-video-player.featured-video")||null},t=[{key:"init",value:function(){var e=this;this.initSetup(),o.m.push(m,this.landingVideoId);var t=o.m.getMostRecent(m,50)||[];this.fetchKnnSimilarVideos(4,this.landingVideoId,t,!1).then(function(t){var n;t&&t.ids&&0!==t.ids.length||(e.noMoreResults=!0,e.batchQueue=[],e.isFetching=!1);var i=t.ids&&t.ids.length>0?t.ids:["end-slide"];e.videoIds.push(e.landingVideoId),(n=e.videoIds).push.apply(n,s(i)),e.updateNavigationButtons(),e.fetchInitialVideoArticles(),e.initAutoplayFirstVideo(),e.initAutoUnmute(),e.initVideoPlayerClassSync(),e.initHideVolumeControl(),e.initVolumeTracking(),e.initCloseButton(),e.initGoBackToVideosButton()})}},{key:"getCommonElements",value:function(){return{videoContainer:this.videoContainer,articleHeader:document.querySelector(".article-header"),articleBody:document.getElementById("article-body"),adContainer:document.getElementById("vertical-short-default"),endContainer:document.getElementById("vertical-short-end")}}},{key:"generateRandomId",value:function(){var e=Array.from({length:8},function(){return Math.floor(256*Math.random()).toString(16).padStart(2,"0")}).join("");return"emaki-video-player-".concat(e)}},{key:"storeVideoPosition",value:function(){var e=this.videoContainer;if(e){var t=e.getBoundingClientRect();this.originalVideoPosition={top:t.top,left:t.left,width:t.width,height:t.height}}}},{key:"resetAnimationWrapper",value:function(){this.animationWrapper&&(this.animationWrapper.style.transform=this.originalTransform||"")}},{key:"setElementsDisplay",value:function(e){var t=this.getCommonElements();void 0!==e.videoContainer&&t.videoContainer&&(t.videoContainer.style.display=e.videoContainer),void 0!==e.articleHeader&&t.articleHeader&&(t.articleHeader.style.display=e.articleHeader),void 0!==e.articleBody&&t.articleBody&&(t.articleBody.style.display=e.articleBody),void 0!==e.adContainer&&t.adContainer&&(t.adContainer.style.display=e.adContainer),void 0!==e.endContainer&&t.endContainer&&(t.endContainer.style.display=e.endContainer)}},{key:"resetVideoContainerPosition",value:function(e,t){e.style.transition="none",e.style.transform="",e.style.position="fixed",e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.width=t.width+"px",e.style.height=t.height+"px",requestAnimationFrame(function(){e.style.position="",e.style.top="",e.style.left="",e.style.width="",e.style.height=""})}},{key:"fadeOutContentElements",value:function(){[document.querySelector(".article-header-title"),document.querySelector(".content-block-regular"),document.querySelector(".article-header-data"),document.querySelector(".w-heading-options.secondtime"),document.querySelector("#article-body"),document.querySelector(".vertical-short-summary"),document.querySelector(".vertical-short-summary-gradient")].forEach(function(e){e&&(e.style.transition="opacity 0.1s ease-out",e.style.opacity="0")})}},{key:"fadeInContentElements",value:function(){[document.querySelector(".article-header-title"),document.querySelector(".content-block-regular"),document.querySelector(".article-header-data"),document.querySelector(".w-heading-options.secondtime"),document.querySelector("#article-body"),document.querySelector(".vs-nav"),document.querySelector(".vertical-short-summary"),document.querySelector(".vertical-short-summary-gradient")].forEach(function(e){e&&(e.style.opacity="1")})}},{key:"insertAdSlides",value:function(e){var t=[],n=e.length;if(!this.enableAdSlides)return t.push.apply(t,s(e)),t.push("end-slide"),t;if(n<4)return t.push.apply(t,s(e)),t.push("ad-slide-1"),t.push("end-slide"),t;for(var i=0;i<e.length;i++)t.push(e[i]),(i+1)%4==0&&t.push("ad-slide-"+Math.floor((i+1)/4));return n%4!=0&&t.push("ad-slide-"+(Math.floor(n/4)+1)),t.push("end-slide"),t}},{key:"initializeVideoPlayerContainer",value:function(){var e=this.videoContainer;if(e){var t=this.generateRandomId(),n="\n            <div class='an-ignore'>\n                <div class='adsninja-video-player emaki-video-player ".concat(t,"' id='").concat(t,"'>\n                </div>\n            </div>\n        ");e.innerHTML=n,this.initialPlayerId=t}else console.error("Video player container not found")}},{key:"initSetup",value:function(){var e=this;this.initPopupSetup(),this.initQuillEditor(),this.initUIInteractions(),this.initSwipeHandler(),this.cacheAndRemoveEmbeds(),this.navUpButton=document.querySelector(".vs-nav-up"),this.navDownButton=document.querySelector(".vs-nav-down"),document.body.classList.add("video-scroll-started"),this.navUpButton&&this.navDownButton?(this.navUpButton.addEventListener("click",function(){e.animatePreviewAndNavigate("up")}),this.navDownButton.addEventListener("click",function(){e.animatePreviewAndNavigate("down")}),window.addEventListener("AdsNinjaVideoPlayerSentinelEvent",function(t){if("VideoStart"==t.detail.type&&0==t.detail.data.isAdPlaying){var n=e.permalinkToId[t.detail.data.videoUrl];n&&o.m.push(m,n)}})):console.error("Navigation buttons not found")}},{key:"initPopupSetup",value:function(){"popup"==this.renderMode&&(this.injectHtmlAndCssForPopup(),this.initBrowserGoBack(),this.showPopup(),this.videoContainer=document.querySelector(".vs-video-modal .w-adsninja-video-player.featured-video"))}},{key:"initSwipeHandler",value:function(){this.initDragAnimation(),this.initWheelHandler(),this.boundKeyDown=this.handleKeyDown.bind(this),document.addEventListener("keydown",this.boundKeyDown)}},{key:"handleKeyDown",value:function(e){switch(e.key){case"ArrowDown":this.animatePreviewAndNavigate("down");break;case"ArrowUp":this.animatePreviewAndNavigate("up")}}},{key:"initDragAnimation",value:function(){this.animationWrapper=document.getElementById("vertical-short-animation-wrapper"),this.boundTouchStart=this.handleTouchStart.bind(this),this.boundTouchMove=this.handleTouchMove.bind(this),this.boundTouchEnd=this.handleTouchEnd.bind(this),document.body.addEventListener("touchstart",this.boundTouchStart,{passive:!0}),document.body.addEventListener("touchmove",this.boundTouchMove,{passive:!1}),document.body.addEventListener("touchend",this.boundTouchEnd,{passive:!0})}},{key:"handleTouchStart",value:function(e){var t=document.getElementById("footer-threads");if((!t||e.target!==t&&!t.contains(e.target))&&(this.isDragging=!0,this.startY=e.touches[0].clientY,this.currentTranslateY=0,this.storeVideoPosition(),this.animationWrapper)){var n=window.getComputedStyle(this.animationWrapper).transform;this.originalTransform="none"!==n?n:"",this.animationWrapper.style.transition="none"}}},{key:"handleTouchMove",value:function(e){if(this.isDragging&&this.animationWrapper){var t=e.touches[0].clientY-this.startY;this.currentTranslateY=.5*t,Math.abs(t)>10&&e.preventDefault()}}},{key:"handleTouchEnd",value:function(){var e=this;if(this.isDragging&&this.animationWrapper){this.isDragging=!1,this.animationWrapper.style.transition="transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)";var t=this.currentTranslateY;Math.abs(t)>this.dragThreshold&&(t<0?this.animatePreviewAndNavigate("down"):this.animatePreviewAndNavigate("up")),setTimeout(function(){e.resetAnimationWrapper()},10),this.currentTranslateY=0}}},{key:"initWheelHandler",value:function(){var e=this;this.animationWrapper||(this.animationWrapper=document.getElementById("vertical-short-animation-wrapper")),this.wheelAccumulator=0,this.isWheelScrolling=!1,this.wheelResetTimeout=null,this.wheelMomentumBlocked=!1,this.handleWheel=function(t){var n=document.getElementById("footer-threads");if((!n||t.target!==n&&!n.contains(t.target))&&(Math.abs(t.deltaY)>10&&t.preventDefault(),!e.isWheelScrolling&&e.animationWrapper)){if(e.wheelResetTimeout&&clearTimeout(e.wheelResetTimeout),0===e.wheelAccumulator){e.storeVideoPosition();var i=window.getComputedStyle(e.animationWrapper).transform;e.originalTransform="none"!==i?i:"",e.animationWrapper.style.transition="none"}var o=Math.abs(t.deltaY)<4,a=o?1:.5,r=o?1:8;e.wheelAccumulator+=t.deltaY*a*-1;var l=e.wheelAccumulator*r;e.animationWrapper.style.transform="translateY(".concat(l,"px)");var s=o?130:0;Math.abs(e.wheelAccumulator)>s?(e.isWheelScrolling=!0,e.animationWrapper.style.transition="transform 0.3s ease",e.animatePreviewAndNavigate(e.wheelAccumulator<0?"down":"up"),setTimeout(function(){e.resetAnimationWrapper(),e.wheelAccumulator=0},10),setTimeout(function(){e.isWheelScrolling=!1},1e3)):e.wheelResetTimeout=setTimeout(function(){document.body.classList.remove("video-scroll-started"),e.animationWrapper&&(e.animationWrapper.style.transition="transform 0.3s ease",e.animationWrapper.style.transform="");var t=e.videoContainer;t&&e.originalVideoPosition&&(t.style.transition="none",t.style.position="fixed",t.style.top="".concat(e.originalVideoPosition.top,"px"),t.style.left="".concat(e.originalVideoPosition.left,"px"),t.style.width="".concat(e.originalVideoPosition.width,"px"),t.style.height="".concat(e.originalVideoPosition.height,"px"),requestAnimationFrame(function(){t.style.position="",t.style.top="",t.style.left="",t.style.width="",t.style.height=""})),e.wheelAccumulator=0},800)}},document.addEventListener("wheel",this.handleWheel,{passive:!1})}},{key:"fetchInitialVideoArticles",value:function(){for(var e=Math.min(5,this.videoIds.length),t=0;t<e;t++){var n=this.videoIds[t];"string"==typeof n&&n.startsWith("ad-slide-")||this.fetchArticleContent(n)}this.loadedCount=e}},{key:"fetchArticleContent",value:function(e){var t=this;if(!this.videos[e]){var n=this.fetchBaseUrl+e;fetch(n,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()}).then(function(n){if(n.success&&n.data){t.videos[e]=n.data,t.preloadVideo(n.data);var i=t.videoIds[t.currentIndex+1],o=t.videoIds[t.currentIndex-1];e!==i&&e!==o||t.updatePreviewImages()}}).catch(function(e){console.error("Error fetching article content:",e)})}}},{key:"animatePreviewAndNavigate",value:function(e){var t=this;if("down"===e?this.currentIndex<this.videoIds.length-1:this.currentIndex>0){var n=document.getElementById("vertical-short-preview-next"),i=document.getElementById("vertical-short-preview-prev"),o=this.videoContainer,a=document.getElementById("vertical-short-default"),r=document.getElementById("vertical-short-end"),l=this.videoIds[this.currentIndex],s=o;if("end-slide"===l&&r&&"none"!==r.style.display?s=r:"string"==typeof l&&l.startsWith("ad-slide-")&&a&&"none"!==a.style.display&&(s=a),s){var d=s.getBoundingClientRect(),c={top:d.top,left:d.left,width:d.width,height:d.height};this.fadeOutContentElements();var u=window.matchMedia("(min-width: 768px)").matches,m="down"===e?this.currentIndex+1:this.currentIndex-1,v=this.videoIds[m];this.transitionPreviewType="down"===e?"next":"prev";var p=this.videos[v],h=this.isSpecialSlide(v),f=!1;if(!h&&p&&(this.preloadMainPlayer(p),f=!0),"down"===e&&this.currentIndex<this.videoIds.length-1){if(s.style.transition="transform 0.3s ease-out",s.style.transform="translateY(-100vh)",n){var y=n.getBoundingClientRect(),g=c.top-y.top;n.style.transition="transform 0.3s ease-out",n.style.transform=u?"translateX(-50%) translateY(".concat(g,"px)"):"translateY(".concat(g,"px)")}setTimeout(function(){f&&(t.promotePreviewToOverlay(t.transitionPreviewType),t.transitionedPreviewElement&&t.transitionedPreviewElement.play().catch(function(){})),t.navigateDown(f),t.resetVideoContainerPosition(s,c),n&&(n.style.transition="none",n.style.transform=""),t.fadeInContentElements()},300)}else if("up"===e&&this.currentIndex>0){if(s.style.transition="transform 0.3s ease-out",s.style.transform="translateY(100vh)",i){var w=i.getBoundingClientRect(),b=c.top-w.top;i.style.transition="transform 0.3s ease-out",i.style.transform=u?"translateX(-50%) translateY(".concat(b,"px)"):"translateY(".concat(b,"px)")}setTimeout(function(){f&&(t.promotePreviewToOverlay(t.transitionPreviewType),t.transitionedPreviewElement&&t.transitionedPreviewElement.play().catch(function(){})),t.navigateUp(f),t.resetVideoContainerPosition(s,c),i&&(i.style.transition="none",i.style.transform=""),t.fadeInContentElements()},300)}}}}},{key:"isSpecialSlide",value:function(e){if(!e)return!1;if("string"==typeof e){if("end-slide"===e)return!0;if(e.startsWith("ad-slide-"))return!0}return!1}},{key:"preloadMainPlayer",value:function(e){var t=this.getFeaturedVideoBlock(e);if(t){var n=this.buildPlaylist(e,t);window.player&&(window.player.pause(),window.player.reset(n,"vertical-short"))}}},{key:"navigateUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.currentIndex>0&&(this.currentIndex--,this.switchVideo(e),this.updateNavigationButtons())}},{key:"navigateDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.currentIndex<this.videoIds.length-1&&(this.currentIndex++,this.switchVideo(e),this.updateNavigationButtons(),this.preloadNextBatch())}},{key:"switchVideo",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=null===(e=window.adsNinja)||void 0===e?void 0:e.valstream,i=null!=n&&n.getVideoPlayers?n.getVideoPlayers():{},a=this.currentPlayerId?i[this.currentPlayerId]:null;a&&"function"==typeof a.pause&&a.pause(),this.hideCommentEditor();var r=this.videoIds[this.currentIndex],l=this.transitionPreviewType;if("end-slide"===r)return this.cancelTransitionOverlay(),this.showEndSlide(),this.updatePreviewImages(),void window.scrollTo({top:0,behavior:"smooth"});if("string"==typeof r&&r.startsWith("ad-slide-"))return this.cancelTransitionOverlay(),this.showAdSlide(),this.updatePreviewImages(),void window.scrollTo({top:0,behavior:"smooth"});var s=this.videos[r];s&&(t?(this.updateURL(s),this.hideAdSlide(),this.hideEndSlide(),window.player&&window.player.play(),this.restoreVolume(window.player),this.finishTransitionOverlay(window.player),o.m.push(m,s.id)):(this.promotePreviewToOverlay(l),this.updateURL(s),this.hideAdSlide(),this.hideEndSlide(),this.updateFeaturedVideo(s)),this.updateArticleTitle(s),this.updateArticleExcerpt(s),this.updateArticleBody(s),this.updateAuthorInfo(s),this.updatePublishDate(s),this.updateComments(s),this.updateSocialButtons(s),this.updatePinnedArticle(s),this.updatePreviewImages(),this.fireSentinelStats(r),this.resetClamp(),window.scrollTo({top:0,behavior:"smooth"}),console.log("Switched to video ".concat(this.currentIndex+1,": ").concat(r)))}},{key:"showAdSlide",value:function(){this.cancelTransitionOverlay();var e=this.getVideoElement();e&&e.pause(),this.setElementsDisplay({adContainer:"flex",endContainer:"none",videoContainer:"none",articleHeader:"none",articleBody:"none"})}},{key:"hideAdSlide",value:function(){this.setElementsDisplay({adContainer:"none",videoContainer:"",articleHeader:"",articleBody:""})}},{key:"showEndSlide",value:function(){this.cancelTransitionOverlay();var e=this.getVideoElement();e&&e.pause();var t=this.getCommonElements();if(t.endContainer){var n=t.endContainer.querySelector(".end-slide-message"),i=t.endContainer.querySelector(".end-slide-link");this.hasVideoHomepage?(n&&(n.textContent="Want to watch more videos?"),i&&(i.textContent="Browse Video Homepage",i.href="/videos/")):(n&&(n.textContent="Want to explore more content?"),i&&(i.textContent="Go to Homepage",i.href="/"))}[document.querySelector(".article-header-title"),document.querySelector(".article-header-data"),document.querySelector(".vertical-short-summary"),document.querySelector(".w-heading-options.secondtime")].forEach(function(e){e&&(e.style.display="none")}),this.setElementsDisplay({endContainer:"flex",adContainer:"none",videoContainer:"none",articleHeader:"none",articleBody:"none"})}},{key:"hideEndSlide",value:function(){[document.querySelector(".article-header-title"),document.querySelector(".article-header-data"),document.querySelector(".vertical-short-summary"),document.querySelector(".w-heading-options.secondtime")].forEach(function(e){e&&(e.style.display="")}),this.setElementsDisplay({endContainer:"none",videoContainer:"",articleHeader:"",articleBody:""})}},{key:"fireSentinelStats",value:function(e){var t,n=this.videos[e]||{};if(n){var i=n.customDimensions||{};if(i){void 0!==window.websiteSentinel&&void 0!==window.sentinelData&&window.sentinelSetup&&(window.sentinelSetup.dimensions={contentType:i.content_type||"",adsTemplate:i.template||"",intent:i.intent||"",articleType:i.article_template||"",segment:i.brand_segment||"",primaryTag:i.tags||"",primaryCategory:i.primary_category||"",networkCategory:i.network_category||"",publishDate:i.date_published||"",system:i.postPaymentCategorySystem||""},window.sentinelData.push(["initTimestamp",Date.now()]),window.websiteSentinel.spaPageview(window.sentinelSetup.dimensions));var o=null===(t=n.contentBlocks)||void 0===t?void 0:t.find(function(e){return"article_title"===e.type});o&&o.text&&(document.title=o.text)}}}},{key:"updateFeaturedVideo",value:function(e){if(e){var t=this.getFeaturedVideoBlock(e);if(t){var n=this.buildPlaylist(e,t);window.player?this.resetExistingPlayer(n,"vertical-short"):this.createNewPlayer(e,n),this.restoreVolume(window.player),this.finishTransitionOverlay(window.player),o.m.push(m,e.id)}}}},{key:"getFeaturedVideoBlock",value:function(e){return e.featuredVideo?e.featuredVideo:(null===(t=e.contentBlocks)||void 0===t?void 0:t.find(function(e){return"featured_video"===e.type}))||null;var t}},{key:"buildPlaylist",value:function(e,t){var n,i,o,a=[{title:(null===(n=e.contentBlocks)||void 0===n||null===(n=n.find(function(e){return"article_title"===e.type}))||void 0===n?void 0:n.text)||"",description:(null===(i=e.contentBlocks)||void 0===i||null===(i=i.find(function(e){return"article_excerpt"===e.type}))||void 0===i?void 0:i.text)||"",length:t.length||"",mimeType:"video/mp4",url:t.url,thumbnailLink:t.poster||""}];return null!==(o=t.videoSubtitles)&&void 0!==o&&o.length&&(a[0].textTracks=t.videoSubtitles.map(function(e){var t,n;return{kind:"subtitles",label:(null===(t=e.language)||void 0===t?void 0:t.name)||"English",language:(null===(n=e.language)||void 0===n?void 0:n.shortName)||"en",url:e.url,default:!1}})),a}},{key:"resetExistingPlayer",value:function(e,t){window.player.reset(e,t),window.player.play()}},{key:"createNewPlayer",value:function(e,t){var n=this.generateRandomId(),i=this.videoContainer;i.innerHTML="\n            <div class='an-ignore'>\n                <div class='adsninja-video-player emaki-video-player ".concat(n,"' id='").concat(n,"'></div>\n            </div>\n        "),this.transitionOverlay&&this.transitionOverlay.parentNode!==i&&i.appendChild(this.transitionOverlay);var o={playlist:JSON.parse(JSON.stringify(t)),trackingId:"vertical-short",allowAds:!1,soundOn:!1,autoplay:!1,allowAutoplay:!1},a={name:this.zoneName,groupName:"content"},r=(window.adsNinja.monetizeVideo(".".concat(n),a,o),Object.keys(window.adsNinja.valstream.getVideoPlayers()));this.currentPlayerId=r[r.length-1],window.player=window.adsNinja.valstream.getVideoPlayers()[this.currentPlayerId],window.player&&("popup"===this.renderMode&&window.player.unmute(),window.player.play())}},{key:"restoreVolume",value:function(e){null!==this.savedVolume&&e&&window.player.setVolume(100*this.savedVolume)}},{key:"updateArticleTitle",value:function(e){var t,n=null===(t=e.contentBlocks)||void 0===t?void 0:t.find(function(e){return"article_title"===e.type});n&&(document.querySelectorAll(".article-header-title").forEach(function(e){e.innerHTML=n.text}),document.title=n.text)}},{key:"updateArticleExcerpt",value:function(e){var t,n=null===(t=e.contentBlocks)||void 0===t?void 0:t.find(function(e){return"paragraph"===e.type});n&&(document.querySelector(".vertical-short-summary p").textContent=n.text)}},{key:"updateArticleBody",value:function(e){var t,n=null===(t=e.contentBlocks)||void 0===t?void 0:t.find(function(e){return"paragraph"===e.type});if(n){var i=document.querySelector(".content-block-regular p:nth-of-type(2)");i&&(i.innerHTML=n.text)}}},{key:"updateAuthorInfo",value:function(e){var t=e.displayAuthor;if(t){var n=document.getElementById("vertical-short-header");if(n){var i=t.niceName&&t.id?"/author/".concat(t.niceName,"/"):"/page/about/",o=n.querySelector(".article-header-author-img img");if(o){var a=t.image?"".concat(t.image,"?fit=crop&w=90&h=90"):"/public/build/images/default-user.png";o.src=a,o.alt=t.displayName||"Author"}var r=n.querySelector(".w-author-name .article-author");r&&(r.textContent=t.displayName||""),n.querySelectorAll(".article-header-author-img a, .article-author").forEach(function(e){return e.href=i}),n.classList.remove("is-hidden")}}}},{key:"updatePublishDate",value:function(e){if(e.datePublished){var t=document.getElementById("vertical-short-header");if(t){var n=t.querySelector(".article-date .pinned-article-date");if(n){var i=new Date(e.datePublished).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});n.textContent=i}}}}},{key:"updateComments",value:function(e){window.commentPage=1;var t=document.querySelector("#comments-number"),n=e.commentCount||0,i=document.querySelector("#commentInput span");i&&(0===n||null===n?(i.textContent="Be the first to post",t&&(t.innerHTML="",t.classList.add("is-hidden"))):(t.innerHTML=n,t.classList.remove("is-hidden"),i.textContent="Reply / Post")),"function"==typeof window.fetchArticleComments&&setTimeout(function(){window.fetchArticleComments("next",!0)},100)}},{key:"updateURL",value:function(e){if(e&&e.permalink){var t=window.location.protocol+"//"+window.location.hostname+e.permalink;window.adsNinjaHeaderBiddingManager.__videoList=[],window.adsNinjaHeaderBiddingManager.__logData.clientData.template=e.customDimensions.templateLayout,window.adsNinjaHeaderBiddingManager.__logData.clientData.url=t,window.history&&window.history.replaceState&&(window.history.replaceState({},"",e.permalink),window.articlePermalink=e.permalink,window.articleId=e.reference,window.articleIdEmaki=e.id,window.VALNET_GLOBAL_TLDRPERMALINK=e.permalink)}}},{key:"updateNavigationButtons",value:function(){this.navUpButton&&(this.navUpButton.disabled=0===this.currentIndex),this.navDownButton&&(this.navDownButton.disabled=this.currentIndex>=this.videoIds.length-1)}},{key:"preloadNextBatch",value:function(){var e=this;this.noMoreResults||(this.batchQueue.push(function(t){return e.fetchNextBatch(t)}),this.isFetching||this.processQueue())}},{key:"processQueue",value:function(){var e=this;0!==this.batchQueue.length?(this.isFetching=!0,this.batchQueue.shift()().then(function(){e.processQueue()})):this.isFetching=!1}},{key:"fetchNextBatch",value:function(e){var t=this;if(this.noMoreResults)return e();console.log("Preloading ".concat(this.batchSize," more videos"));var n=o.m.getMostRecent(m,50)||[];return n=n.concat(this.videoIds),this.fetchKnnSimilarVideos(this.batchSize,this.landingVideoId,n,!0).then(function(e){var n;e&&e.ids&&0!==e.ids.length||(t.noMoreResults=!0,t.batchQueue=[],t.isFetching=!1);var i=e.ids&&e.ids.length>0?e.ids:["end-slide"];(n=t.videoIds).push.apply(n,s(i)),e.videos.forEach(function(e){t.videos[e.id]=e,t.preloadVideo(e)})})}},{key:"preloadVideo",value:function(e){var t,n=null===(t=e.contentBlocks)||void 0===t?void 0:t.find(function(e){return"featured_video"===e.type});if(n&&n.url){var i=document.createElement("link");i.rel="prefetch",i.as="video",i.href=n.url,document.head.appendChild(i),this.permalinkToId[n.url]=e.id}}},{key:"updateFollowButtons",value:function(e,t){var n,i=t.querySelector(".w-follow-btn");if(i){var o=i.querySelectorAll('[data-is-follow-choice-button="true"]'),a=this.checkIfFollowing(e),r=null===(n=e.contentBlocks)||void 0===n?void 0:n.find(function(e){return"article_title"===e.type}),l=(null==r?void 0:r.text)||e.title||"";o.forEach(function(t){t.setAttribute("data-id",e.reference),t.setAttribute("data-title",l),t.setAttribute("data-permalink",e.permalink||"");var n="false"===t.getAttribute("data-is-followed-choice-button");a?n?t.classList.add("is-hidden"):t.classList.remove("is-hidden"):n?t.classList.remove("is-hidden"):t.classList.add("is-hidden"),t.removeEventListener("click",t._followClickHandler),t._followClickHandler=function(){var n="false"===t.getAttribute("data-is-followed-choice-button")?1:0;e.isFollow=n},t.addEventListener("click",t._followClickHandler),"function"==typeof window.handleFollowPage&&window.handleFollow()})}}},{key:"updateLikeButton",value:function(e,t){var n,i=t.querySelector('[data-action="like-article"]');if(i){i.classList.remove("inactive");var o=i.querySelector('[data-is-like-article-button="true"]');if(o){var a=this.checkIfLiked(e);o.setAttribute("data-id",(null===(n=e.like)||void 0===n?void 0:n.idItem)||e.reference);var l=o.querySelector('[data-is-icon="true"]'),s=o.querySelector('[data-is-text="true"]');if(l&&(l.classList.toggle("liked",a),l.classList.toggle("not-liked",!a)),s){var d=e.likeCount||0,c=s.querySelector(".number");c&&(d>=10?(c.textContent=this.formatCount(d),c.style.display=""):(c.textContent="",c.style.display="none"))}o.setAttribute("data-value",a?"1":"0"),o.setAttribute("data-like-count",e.likeCount||0),o.removeEventListener("click",o._likeClickHandler),o._likeClickHandler=function(){var t="1"===o.getAttribute("data-value")?0:1;e.isLike=t},o.addEventListener("click",o._likeClickHandler),r.Q.getInstance().update()}}}},{key:"updateCommentThread",value:function(e,t){var n=t.querySelector(".disqus-load-btn"),i=t.querySelector(".disqus-load-btn .text");if(i)if("popup"!=this.renderMode){var o=e.commentCount||0,a=i.querySelector(".number");a&&(o>=1?(a.textContent=this.formatCount(o),a.style.display=""):(a.textContent="",a.style.display="none"))}else n.classList.add("is-hidden")}},{key:"updateSocialButtons",value:function(e){var t=document.getElementById("vertical-short-social-options");t&&(this.updateFollowButtons(e,t),this.updateLikeButton(e,t),this.updateCommentThread(e,t),document.dispatchEvent(new CustomEvent("verticalShortVideoChanged",{detail:{video:e,index:this.currentIndex}})),t.classList.contains("is-hidden")&&t.classList.remove("is-hidden"))}},{key:"updatePreviewImages",value:function(){var e=this;[{type:"next",indexOffset:1,containerId:"vertical-short-preview-next",mediaId:"vertical-short-preview-next-img"},{type:"prev",indexOffset:-1,containerId:"vertical-short-preview-prev",mediaId:"vertical-short-preview-prev-img"}].forEach(function(t){var n,i=t.type,o=t.indexOffset,a=t.containerId,r=t.mediaId,l=document.getElementById(a),s=e.ensurePreviewVideoElement(r);if(l&&s){e.previewVideoElements[i]=s;var d=e.currentIndex+o;if(d<0||d>=e.videoIds.length)e.resetPreviewVideo(l,s,!0);else{var c=e.videoIds[d];if(e.isPlayablePreviewVideo(c)){var u=e.videos[c];if(u){var m=u.featuredVideo?u.featuredVideo:null===(n=u.contentBlocks)||void 0===n?void 0:n.find(function(e){return"featured_video"===e.type});null!=m&&m.url?e.configurePreviewVideo(l,s,m,c,i):e.resetPreviewVideo(l,s)}else e.resetPreviewVideo(l,s)}else e.resetPreviewVideo(l,s)}}else e.previewVideoElements[i]=null})}},{key:"updatePinnedArticle",value:function(e){var t=e.pinnedArticle||null,n=document.getElementById("vertical-short-article-attached-url");t?n&&(n.href=t.permalink,n.style.display=""):n&&(n.href="",n.style.display="none")}},{key:"ensurePreviewVideoElement",value:function(e){var t=document.getElementById(e);if(!t)return null;if(t.tagName&&"video"===t.tagName.toLowerCase())return this.initializePreviewVideoElement(t);var n=document.createElement("video");return n.id=e,t.getAttribute("class")&&n.setAttribute("class",t.getAttribute("class")),t.getAttribute("style")&&n.setAttribute("style",t.getAttribute("style")),Array.from(t.attributes).forEach(function(e){e.name.startsWith("data-")&&n.setAttribute(e.name,e.value)}),t.parentNode&&t.parentNode.replaceChild(n,t),this.initializePreviewVideoElement(n)}},{key:"initializePreviewVideoElement",value:function(e){return e?(e.classList.add("vs-preview-video"),e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("muted",""),e.setAttribute("preload","metadata"),e.muted=!0,e.loop=!0,e.controls=!1,e.playsInline=!0,e.autoplay=!1,e.removeAttribute("crossorigin"),e):null}},{key:"resetPreviewVideo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&(t.pause(),t.src="",t.removeAttribute("src"),t.load(),t.removeAttribute("poster"),t.removeAttribute("data-preview-role"),delete t.dataset.videoId),e&&(e.style.display=n?"none":"block")}},{key:"configurePreviewVideo",value:function(e,t,n,i,o){if(e&&t){e.style.display="block",t.setAttribute("data-preview-role",o),t.setAttribute("muted",""),t.muted=!0,t.loop=!0,t.preload="auto";var a=String(i);if(t.dataset.videoId!==a){t.pause(),t.src="",t.removeAttribute("src"),t.load(),t.src=n.url,t.dataset.videoId=a,t.load();var r=function(){try{t.currentTime=0}catch(e){}};if(t.readyState>=1)r();else{var l=function(){r(),t.removeEventListener("loadedmetadata",l)};t.addEventListener("loadedmetadata",l,{once:!0})}}}}},{key:"isPlayablePreviewVideo",value:function(e){if(!e)return!1;if("string"==typeof e){if("end-slide"===e)return!1;if(e.startsWith("ad-slide-"))return!1}return!0}},{key:"promotePreviewToOverlay",value:function(e){var t;if(!e)return!1;var n={next:{containerId:"vertical-short-preview-next",mediaId:"vertical-short-preview-next-img"},prev:{containerId:"vertical-short-preview-prev",mediaId:"vertical-short-preview-prev-img"}}[e],i=document.getElementById(n.containerId),o=null===(t=this.previewVideoElements)||void 0===t?void 0:t[e];if(i&&o){var a=o.cloneNode(!1);a.removeAttribute("src"),a.removeAttribute("poster"),a.removeAttribute("data-preview-role"),delete a.dataset.videoId,a.load(),o.parentNode===i?i.insertBefore(a,o):i.appendChild(a),i.removeChild(o);var r=this.initializePreviewVideoElement(a);this.previewVideoElements[e]=r,this.resetPreviewVideo(i,r);var l=this.videoContainer;return this.transitionOverlay?this.transitionOverlay.innerHTML="":(this.transitionOverlay=document.createElement("div"),this.transitionOverlay.className="vs-transition-overlay"),o.classList.remove("vs-preview-video"),o.classList.add("vs-transition-video"),o.removeAttribute("id"),o.setAttribute("playsinline",""),o.setAttribute("webkit-playsinline",""),o.setAttribute("muted",""),o.muted=!0,o.loop=!1,o.controls=!1,o.playsInline=!0,this.transitionOverlay.appendChild(o),l.appendChild(this.transitionOverlay),this.transitionedPreviewElement=o,!0}}},{key:"finishTransitionOverlay",value:function(e){var t=this;if(this.transitionOverlay&&this.transitionedPreviewElement){var n=function(){var e;null!==(e=t.transitionOverlay)&&void 0!==e&&e.parentNode&&t.transitionOverlay.parentNode.removeChild(t.transitionOverlay),t.transitionOverlay=null,t.transitionedPreviewElement=null,t.transitionPreviewType=null,document.body.classList.remove("video-scroll-started")},i=function(){var e=t.getVideoElement();e&&e.readyState>=3?n():requestAnimationFrame(i)};i(),setTimeout(function(){var e;null!==(e=t.transitionOverlay)&&void 0!==e&&e.parentNode&&n()},2e3)}else setTimeout(function(){document.body.classList.remove("video-scroll-started")},800)}},{key:"cancelTransitionOverlay",value:function(){var e=this.transitionOverlay,t=this.transitionedPreviewElement;if(!e||!t)return this.transitionOverlay=null,this.transitionedPreviewElement=null,void(this.transitionPreviewType=null);t.pause(),t.removeAttribute("src"),t.load(),e.parentNode.removeChild(e),this.transitionOverlay=null,this.transitionedPreviewElement=null,this.transitionPreviewType=null}},{key:"checkIfFollowing",value:function(e){var t;return void 0!==e.isFollow?1===e.isFollow||"1"===e.isFollow:"1"===(null===(t=e.followPage)||void 0===t?void 0:t.isFollow)}},{key:"checkIfLiked",value:function(e){var t,n,i=this.getLikeFromLocalStorage(e.reference);return null!==i?i:void 0!==e.isLike?1===e.isLike||"1"===e.isLike:1===(null===(t=e.like)||void 0===t?void 0:t.isLike)||"1"===(null===(n=e.like)||void 0===n?void 0:n.isLike)}},{key:"getLikeFromLocalStorage",value:function(e){try{var t=localStorage.getItem("likeArticleList");if(!t)return null;var n=JSON.parse(t)[e];if(n)return 1===n.newValue||"1"===n.newValue}catch(e){console.error("Error reading like from localStorage:",e)}return null}},{key:"getVideoElement",value:function(){return document.querySelector(".adsninja-video-player video, .emaki-video-player video, .w-adsninja-video-player video")}},{key:"initAutoplayFirstVideo",value:function(){var e=this,t=0,n=function(){var i,o=e.videoIds[e.currentIndex],a=e.videos[o];a&&null!==(i=window.adsNinja)&&void 0!==i&&i.valstream?(window.articleId=a.reference,window.articleIdEmaki=a.id,e.initializeVideoPlayerContainer(a),e.updateFeaturedVideo(a),e.updateURL(a),e.updatePreviewImages(),e.updateSocialButtons(a),e.updateArticleBody(a),e.updateAuthorInfo(a),e.updatePublishDate(a),e.updateArticleExcerpt(a),e.updateComments(a),e.updatePinnedArticle(a)):t<1e5?(t++,setTimeout(n,100)):console.warn("Video element not found after maximum attempts")};n()}},{key:"initAutoUnmute",value:function(){var e=this;this.unmuteOnce||(this.unmuteOnce=function(t){var n;if(!e.hasAutoUnmuted){var i=null===(n=window.adsNinja)||void 0===n?void 0:n.valstream;if(i){var o=i.getVideoPlayers()[e.currentPlayerId];o&&(o.unmute(),e.hasAutoUnmuted=!0,document.removeEventListener("click",e.unmuteOnce,!0),document.removeEventListener("touchstart",e.unmuteOnce,!0),document.removeEventListener("keydown",e.unmuteOnce,!0),document.removeEventListener("scroll",e.unmuteOnce,!0))}}},document.addEventListener("click",this.unmuteOnce,!0),document.addEventListener("touchstart",this.unmuteOnce,!0),document.addEventListener("keydown",this.unmuteOnce,!0),document.addEventListener("scroll",this.unmuteOnce,!0))}},{key:"initUIInteractions",value:function(){var e=this,t=document.querySelector(".secondtime .option-btn.disqus-load-btn"),n=document.querySelector(".close-footer-threads"),i=document.querySelector(".article-footer"),o=document.querySelector(".vertical-short-summary p"),a=document.querySelector(".w-article.layout-vertical-short");"popup"===this.renderMode&&(a=document.getElementById(this.modalId)),t&&i&&a&&t.addEventListener("click",function(){i.classList.add("active"),a.classList.add("threads-open"),e.navUpButton.classList.add("is-showing"),e.navDownButton.classList.add("is-showing")}),n&&i&&a&&n.addEventListener("click",function(){i.classList.remove("active"),a.classList.remove("threads-open"),e.navUpButton.classList.remove("is-showing"),e.navDownButton.classList.remove("is-showing")}),o&&o.addEventListener("click",function(){o.classList.toggle("remove-clamp")}),this.initCommentClickOutside()}},{key:"initCommentClickOutside",value:function(){var e=this;"popup"!==this.renderMode&&document.addEventListener("click",function(t){var n=document.getElementById("commentInput"),i=document.getElementById("comment-form"),o=document.getElementById("commentTextEditor");n&&i&&o&&"none"!==o.style.display&&"none"!==window.getComputedStyle(o).display&&(i.contains(t.target)||e.hideCommentEditor())})}},{key:"hideCommentEditor",value:function(){if("popup"!==this.renderMode){var e=document.getElementById("commentInput"),t=document.getElementById("commentTextEditor"),n=document.getElementById("commentToolbar"),i=document.getElementById("btn-comment-submit"),o=document.getElementById("user-info-div"),a=document.getElementById("comment-submit-rules");t&&"none"!==t.style.display&&(e&&(e.style.display="flex"),t&&(t.style.display="none",window.quillEditor&&window.quillEditor.commentTextEditor&&(window.quillEditor.commentTextEditor.root.innerHTML="")),n&&(n.style.display="none"),i&&(i.style.display="none"),o&&(o.style.display="none"),a&&(a.style.display="none"))}}},{key:"resetClamp",value:function(){var e=document.querySelector(".vertical-short-summary p");e&&e.classList.remove("remove-clamp")}},{key:"exitShortApp",value:function(){if("popup"===this.renderMode)return this.closePopup(),this.scrollToAnchorTag(),history.replaceState(null,"",this.addAnchorTag(this.returnUrl)),void(history.state&&history.state.popupOpen&&history.back());var e=hasVideoHomepage?"/videos/":"/",t=document.referrer;if(t)try{var n=new URL(t);n.origin===window.location.origin&&(e=n.href)}catch(e){console.error("Invalid referrer URL:",e)}window.location.href=this.addAnchorTag(e)}},{key:"closePopup",value:function(){window.player&&(window.player.pause(),window.player=null),this.restoreEmbeds(),this.destroy();var e=document.getElementById(this.modalId);e&&e.remove()}},{key:"showPopup",value:function(){var e=document.getElementById(this.modalId);e&&"popup"==this.renderMode&&(e.classList.remove("is-hidden"),history.pushState({popupOpen:!0},""))}},{key:"initBrowserGoBack",value:function(){this.handlePopState=this.closePopup.bind(this),window.addEventListener("popstate",this.handlePopState,{once:!0})}},{key:"scrollToAnchorTag",value:function(){var e=document.getElementById(this.anchorTag);e&&e.scrollIntoView()}},{key:"addAnchorTag",value:function(e){if(e)return this.anchorTag&&!e.includes("#".concat(this.anchorTag))&&(e="".concat(e,"#").concat(this.anchorTag)),e}},{key:"formatCount",value:function(e){return e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}},{key:"initVideoPlayerClassSync",value:function(){var e=function(){var e=document.querySelector("div.video-js");e&&(e.classList.contains("vjs-user-active")?document.body.classList.add("vjs-progress-bar-active"):document.body.classList.remove("vjs-progress-bar-active"),e.classList.contains("vjs-user-inactive")?document.body.classList.add("vjs-progress-bar-inactive"):document.body.classList.remove("vjs-progress-bar-inactive"))};e();var t=new MutationObserver(function(){e()}),n=function(){var e=document.querySelector("div.video-js");e&&t.observe(e,{attributes:!0,attributeFilter:["class"]})};n(),document.addEventListener("verticalShortVideoChanged",function(){setTimeout(function(){n(),e()},100)})}},{key:"initHideVolumeControl",value:function(){if("mobile"!=window.device);else{var e=function(){var t=document.querySelector(".vjs-volume-control");t?(t.style.display="none",t.style.pointerEvents="none"):setTimeout(e,200)};e()}}},{key:"initVolumeTracking",value:function(){var e=this;window.addEventListener("click",function(t){var n=document.querySelector(".vjs-volume-panel");n&&n.contains(t.target)&&(console.log("Document click/touch detected for volume tracking"),setTimeout(function(){var t,n=null===(t=window.adsNinja)||void 0===t?void 0:t.valstream;if(n){var i=n.getVideoPlayers(),o=e.currentPlayerId?i[e.currentPlayerId]:null;if(o){console.log("Tracking volume for player ID:",e.currentPlayerId);var a=o.player.muted()?0:o.player.volume();null!=a&&(e.savedVolume=a)}}},100))},!0)}},{key:"initQuillEditor",value:function(){"popup"!=this.renderMode&&(window.addEventListener("valnet_ui_event:quill_injected",function(){window.quillEditor&&window.quillEditor.commentTextEditor||"function"==typeof window.initQuill&&window.initQuill("commentTextEditor","commentToolbar")},{once:!0}),(0,a.L)())}},{key:"postJson",value:function(e,t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.ok?e.json():e.text().then(function(t){throw new Error(t||"HTTP "+e.status)})})}},{key:"fetchKnnSimilarVideos",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t?(n=Array.from(new Set(n)),console.log("KNN Cached Video IDs:",n),this.postJson("/knn/video-articles/search/",{cachedVideos:n,idArticle:t,limit:e,includeContent:i}).then(function(e){return e.success&&e.data?(console.log("KNN Serched Video IDs:",e.data.ids),console.log("<<==== KNN next serach ====>>"),e.data||{}):(console.warn("No data returned or success=false:",e),{})}).catch(function(e){return console.error(e),{}})):[]}},{key:"injectHtmlAndCssForPopup",value:function(){if(window.valnetShortVideoPopupHtml&&!document.getElementById(this.modalId)){var e=window.valnetShortVideoPopupHtml.trim("&quot;");e=(e=(e=(e=(e=(e=e.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#39;/g,"'")).replace(/&amp;/g,"&")).replace(/(^"|"$)/g,"");var t=(0,i.CC)(e),n=t.getAttribute("data-style-path-url");(0,i.tW)(n,function(){t.removeAttribute("hidden")}),document.body.appendChild(t)}}},{key:"initCloseButton",value:function(){var e=this,t=document.querySelector(".back-to-previous.icon.i-close");t&&(setTimeout(function(){t.classList.remove("is-hidden")},700),this.onCloseClick=function(t){t.preventDefault(),t.stopPropagation(),e.exitShortApp()},t.removeEventListener("click",this.onCloseClick,!0),t.addEventListener("click",this.onCloseClick,!0))}},{key:"initGoBackToVideosButton",value:function(){var e=document.querySelector(".icon.i-video-home");e&&"false"!=window.hasVideoHomepage&&setTimeout(function(){e.classList.remove("is-hidden")},700)}},{key:"destroy",value:function(){document.body.removeEventListener("touchstart",this.boundTouchStart),document.body.removeEventListener("touchmove",this.boundTouchMove),document.body.removeEventListener("touchend",this.boundTouchEnd),document.removeEventListener("wheel",this.handleWheel),document.removeEventListener("keydown",this.boundKeyDown),window.removeEventListener("popstate",this.handlePopState)}},{key:"cacheAndRemoveEmbeds",value:function(){var e,t=this;try{e=document.querySelectorAll(".w-rich iframe")}catch(e){return void console.error("Error selecting iframes:",e)}e&&0!==e.length&&e.forEach(function(e){try{var n;if(!e||!e.parentNode)return;null!==(n=e.classList)&&void 0!==n&&n.contains("youtube-repalcing-image")&&e.src.includes("autoplay=1")&&(e.src=e.src.replace("autoplay=1",""));var i=document.createElement("div");i.style.width=(e.offsetWidth||0)+"px",i.style.height=(e.offsetHeight||0)+"px",e.parentNode.replaceChild(i,e),t.embedsCache.push({iframe:e,placeholder:i})}catch(e){console.warn("Error during embed caching for one iframe:",e)}})}},{key:"restoreEmbeds",value:function(){this.embedsCache&&0!==this.embedsCache.length&&(this.embedsCache.forEach(function(e){try{var t=e.iframe,n=e.placeholder;if(!t||!n||!n.parentNode)return;var i=t.src;t.src="",t.src=i,n.parentNode.replaceChild(t,n)}catch(e){console.warn("Error restoring one embed:",e)}}),this.embedsCache=[])}}],t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},906(e,t,n){"use strict";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=document.querySelector('script[src="'.concat(e,'"]'));if(i)return t.apply(i),i;var o=document.createElement("script");if(o.onload=t,o.src=e,n.defer&&(o.defer=!0),document.body)document.body.appendChild(o);else var a=setInterval(function(){o.parentElement&&clearInterval(a),document.body&&(clearInterval(a),document.body.appendChild(o))},1);return o}function o(){var e=!1;console.log("--- triggered injectQuill ---");try{window.Quill&&(e=!0)}catch(e){console.log("quill not found, loading...")}if(e)return console.log("%cEvent dispatched : valnet_ui_event:quill_injected","color: white; background-color: green; padding: 4px;"),void window.dispatchEvent(new Event("valnet_ui_event:quill_injected"));if(!window.valnet_is_quill_injection_started){window.valnet_is_quill_injection_started=!0;var t=null,n=null,o=null,a=function(){this.isLoaded=!0,t&&t.isLoaded&&n&&n.isLoaded&&o&&o.isLoaded&&setTimeout(function(){console.log("%cEvent dispatched : valnet_ui_event:quill_injected","color: white; background-color: green; padding: 4px;"),window.dispatchEvent(new Event("valnet_ui_event:quill_injected"))})};window.quillScriptLocation&&(t=i(window.quillScriptLocation,function(){this.isLoaded=!0;var e=setInterval(function(){var t=!1;try{window.Quill&&(t=!0)}catch(e){console.log("quill not found, loading...")}t&&(clearInterval(e),window.quillEmojiScriptLocation&&(n=i(window.quillEmojiScriptLocation,a,{defer:!0})),window.quillMentionScriptLocation&&(o=i(window.quillMentionScriptLocation,a,{defer:!0})),window.quillMagicUrlScriptLocation&&(o=i(window.quillMagicUrlScriptLocation,a,{defer:!0})))},1)},{defer:!0}))}}n.d(t,{L:()=>o})},925(e,t,n){"use strict";n.d(t,{A:()=>l});var i=n(3768);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}const l=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ajaxRequest=!1,this.handleAccountVerificationClick=this.handleAccountVerificationClick.bind(this),this.handleCloseButtonClick=this.handleCloseButtonClick.bind(this)},t=[{key:"hideSuccessVerificationMsg",value:function(){var e=document.getElementById("account-verification-popup-success-msg-new");e&&e.classList.add("is-hidden")}},{key:"hideErrorVerificationMsg",value:function(){var e=document.getElementById("account-verification-popup-error-msg-new");e&&e.classList.add("is-hidden")}},{key:"displaySuccessVerificationMsg",value:function(e){var t=document.getElementById("account-verification-popup-success-msg-new"),n=document.getElementById("accountVerificationPopupCloseButton");e&&(t.firstChild.innerHTML=e),t.classList.remove("is-hidden"),setTimeout(function(){t.classList.add("is-hidden"),n&&n.click()},4e3)}},{key:"displayErrorVerificationMsg",value:function(e){var t=document.getElementById("account-verification-popup-error-msg-new"),n=document.getElementById("accountVerificationPopupCloseButton");e&&(t.firstChild.innerHTML=e),t.classList.remove("is-hidden"),setTimeout(function(){t.classList.add("is-hidden"),n&&n.click()},4e3)}},{key:"handleVerificationResponse",value:function(e){this.hideSuccessVerificationMsg(),this.hideErrorVerificationMsg();var t=e.status,n=e.message;"success"===t?this.displaySuccessVerificationMsg(n):this.displayErrorVerificationMsg(n),this.ajaxRequest=!1}},{key:"handleVerifyAccount",value:function(){var e=this;window.isUserLoggedIn&&(this.ajaxRequest&&this.ajaxRequest.abort(),this.ajaxRequest=new XMLHttpRequest,this.ajaxRequest.open("GET","/verify-email/",!0),this.ajaxRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.ajaxRequest.onreadystatechange=function(){4===e.ajaxRequest.readyState&&e.ajaxRequest.response&&e.handleVerificationResponse(JSON.parse(e.ajaxRequest.response))},this.ajaxRequest.send())}},{key:"injectAccountVerificationPopup",value:function(){var e=document.getElementById("account-verification-popup-container");if(!window.accountVerificationContainerInjected&&!e){var t=window.accountVerificationPopupHtml.trim("&quot;").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&amp;/g,"&").replace(/(^"|"$)/g,"").replaceAll("loginForm","loginPopup");document.body.insertAdjacentHTML("beforeend",t),window.accountVerificationContainerInjected=!0}}},{key:"showAccountVerificationPopup",value:function(){this.injectAccountVerificationPopup();var e=document.getElementById("account-verification-popup-container"),t=document.getElementById("account-verification-popup-message");if(t&&(t.innerHTML="Please verify your email address to unlock additional features on your account."),e){var n=e.getAttribute("data-style-path-url"),o="true"===e.getAttribute("data-style-injected");n&&!o?(0,i.tW)(n,function(){e.setAttribute("data-style-injected","true"),e.classList.add("is-visible")}):e.classList.add("is-visible")}this.addAccountVerificationPopupEventListeners()}},{key:"addAccountVerificationPopupEventListeners",value:function(){var e=document.getElementById("accountVerificationPopupCloseButton"),t=document.getElementById("accountVerificationPopupSubmitButton");e&&!e.isAlreadyAttached&&(e.isAlreadyAttached=!0,e.removeEventListener("click",this.handleCloseButtonClick),e.addEventListener("click",this.handleCloseButtonClick)),t&&!t.isAlreadyAttached&&(t.isAlreadyAttached=!0,t.removeEventListener("click",this.handleAccountVerificationClick),t.addEventListener("click",this.handleAccountVerificationClick))}},{key:"handleAccountVerificationClick",value:function(e){return e.preventDefault(),e.stopPropagation(),this.handleVerifyAccount(),!1}},{key:"handleCloseButtonClick",value:function(e){return e.preventDefault(),e.stopPropagation(),document.getElementById("account-verification-popup-container").classList.remove("is-visible"),this.hideSuccessVerificationMsg(),this.hideErrorVerificationMsg(),!1}}],t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()},3506(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}n.d(t,{om:()=>l});var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-image-comparison-tool]",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selector=t,this.pixelDensity=n.pixelDensity||(window.devicePixelRatio?window.devicePixelRatio<2?2:window.devicePixelRatio:2),this.containers="string"==typeof t?document.querySelectorAll(t):t,this.ensureStyles(),this.initContainers()}return t=e,n=[{key:"ensureStyles",value:function(){var e="canvas-image-comparator-style";if(!document.getElementById(e)){var t=document.createElement("style");t.id=e,t.textContent="\n                [data-image-comparison-tool] {\n                    position: relative;\n                    overflow: hidden;\n                }\n                [data-image-comparison-tool] canvas {\n                    display: block;\n                    width: 100%;\n                    height: 100%;\n                    border-radius: 4px;\n                    cursor: ew-resize;\n                }\n                [data-image-comparison-tool] .image-comparator-handle {\n                    position: absolute;\n                    box-shadow: 0 0 10px 0 rgba(0,0,0,0.3);\n                    top: 0;\n                    transform: translateX(-50%);\n                    height: 100%;\n                    touch-action: none;\n                    pointer-events: none;\n                    z-index: 3;\n                }\n                [data-image-comparison-tool] .image-comparator-handle-grip {\n                    position: absolute;\n                    left: 50%;\n                    top: 50%;\n                    transform: translate(-50%, -50%);\n                    border-radius: .5rem;\n                    width: 10px;\n                    height: 50px;\n                    pointer-events: none;\n                }\n            ",document.head.appendChild(t)}}},{key:"initContainers",value:function(){var e=this;this.containers.forEach?this.containers.forEach(function(t){return e.setupContainer(t)}):Array.prototype.forEach.call(this.containers,function(t){return e.setupContainer(t)})}},{key:"setupContainer",value:function(e){var t=this;if(!e._canvasImageComparatorInitialized){var n=e.querySelectorAll("img");if(!(n.length<2)){var i=Object.assign({handleSize:1,handleColor:"#fff",handleGripColor:"#fff",maxHeight:null,hover:null,autoscaleWidthwise:!1,sliderPadding:5},e.dataset),o=Number(i.handleSize),a=i.handleColor,r=i.handleGripColor||a,l=Number(i.maxHeight),s="true"===i.hover,d="true"===i.autoscaleWidthwise,c=1,u=!0,m=document.createElement("canvas");m.setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Image Group",action:"Comparison Slider Click",once:!0}));var v=m.getContext("2d");e.insertBefore(m,e.firstChild),l&&!isNaN(l)&&(m.style.maxHeight="".concat(l,"px"),e.style.maxHeight="".concat(l,"px"));var p=document.createElement("div");p.className="image-comparator-handle",p.style.left="50%",p.style.width=o+"px",p.style.background=a;var h=document.createElement("span");h.className="image-comparator-handle-grip",h.style.background=r,p.appendChild(h),e.appendChild(p),"static"===getComputedStyle(e).position&&(e.style.position="relative");var f=0,y=function(){e.style.width="";var i=e.getBoundingClientRect().width,o=i/c,a=!1;l&&!isNaN(l)&&o>l&&(o=l,d&&(i=o*c,a=!0)),e.style.width=a?"".concat(i,"px"):"",m.width=i*t.pixelDensity,m.height=o*t.pixelDensity,m.style.width="".concat(i,"px"),m.style.height="".concat(o,"px"),e.style.height="".concat(o,"px");var r=function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Math.max(t/e.naturalWidth,n/e.naturalHeight):Math.min(t/e.naturalWidth,n/e.naturalHeight),r=e.naturalWidth*a,l=e.naturalHeight*a;return{dx:(t-r)/2,dy:(n-l)/2,dw:r,dh:l,scale:a}},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{dx:0,dy:0,dw:i,dh:o},a=r(e,t,n.dw,n.dh),l=a.dx,s=a.dy,d=a.dw,c=a.dh,u=a.scale,m=n.dx+l,p=n.dy+s;if(t){var h=m<n.dx?(n.dx-m)/u:0,f=p<n.dy?(n.dy-p)/u:0,y=Math.min(e.naturalWidth-h,n.dw/u),g=Math.min(e.naturalHeight-f,n.dh/u),w=Math.min(d,n.dw),b=Math.min(c,n.dh);v.drawImage(e,h,f,y,g,Math.max(m,n.dx),Math.max(p,n.dy),w,b)}else v.drawImage(e,m,p,d,c);return{dx:m,dy:p,dw:d,dh:c}};f=f||i/2,v.save(),v.scale(t.pixelDensity,t.pixelDensity),v.clearRect(0,0,i,o);var h=r(n[0]);g=Math.min(h.dw,i),v.save(),v.beginPath(),v.rect(h.dx,h.dy,h.dw,h.dh),v.clip(),s(n[1],u,h),v.restore(),v.save(),v.beginPath(),v.rect(0,0,f,o),v.clip(),s(n[0],!1,{dx:0,dy:0,dw:i,dh:o}),v.restore(),v.restore(),p.style.left=f+"px"},g=0,w=Number(i.sliderPadding),b=function(t){var n=e.getBoundingClientRect(),i=(n.width-g)/2,o=(g?i:0)+w,a=(g?i+g:n.width)-w;f=Math.max(o,Math.min(t-n.left,a)),y()},E=function(e){return e.touches&&e.touches[0]?e.touches[0].clientX:e.clientX},k=!1,L=function(e){k=!0,b(E(e)),e.cancelable&&e.preventDefault()},S=function(e){k&&b(E(e))},_=function(){k=!1};m.addEventListener("mousedown",L),m.addEventListener("touchstart",L),p.addEventListener("mousedown",L),p.addEventListener("touchstart",L),window.addEventListener("mousemove",S),window.addEventListener("touchmove",S),window.addEventListener("mouseup",_),window.addEventListener("touchend",_),s&&e.addEventListener("mousemove",function(e){k||b(E(e))});var C=function(){if(Array.from(n).every(function(e){return e.complete})){c=n[0].naturalWidth/n[0].naturalHeight;var e=n[1].naturalWidth/n[1].naturalHeight;u=Math.abs(e-c)>.001,y()}};n.forEach(function(e){e.complete||e.addEventListener("load",C)}),C(),window.addEventListener("resize",y),e._canvasImageComparatorInitialized=!0}}}}],i=[{key:"triggerInit",value:function(t,n){setTimeout(function(){return new e(t,n)},1)}}],n&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();function l(e,t){r.triggerInit(e,t)}"undefined"==typeof window||window.initCanvasImageComparator||(window.initCanvasImageComparator=function(){return new r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-image-comparison-tool]",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})})},3768(e,t,n){"use strict";function i(e){return!e||""==e.replace(/\s|\n|\r/gm,"")}function o(e){var t=document.createElement("template");return t.innerHTML=e,Array.from(t.content.childNodes).find(function(e){return e.nodeType!==Node.TEXT_NODE})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Array.prototype.slice.call(arguments,1);try{e.apply(null,t)}catch(e){console.error(e)}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};l([e]).then(function(){t()})}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.allSettled(e.map(function(e){return new Promise(function(t){var n=function(){return t()};if(!e)return n();var i=document.head.querySelector('link[href="'.concat(e,'"]'));if(i)return"complete"===i.readyState||"loaded"===i.readyState?n():(i.addEventListener("load",n),void i.addEventListener("error",n));var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("href",e),o.addEventListener("load",n),o.addEventListener("error",n),document.head.appendChild(o)})}))}function s(e){for(var t=5381,n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n);return"h_"+(t>>>0).toString(16)}function d(e){for(var t=atob(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new TextDecoder("utf-8").decode(n)}n.d(t,{CC:()=>o,Qb:()=>d,jx:()=>a,lS:()=>i,tW:()=>r,zr:()=>s})},5075(e,t,n){"use strict";var i=n(3768);function o(){var e=document.getElementById("compareSticky"),t=document.getElementById("comparePopup");if(null!==e&&null!==t){/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream;window.addEventListener("scroll",function(){var n=t.getBoundingClientRect().top+window.scrollY;window.scrollY>=n?e.classList.add("is-showing"):e.classList.remove("is-showing")})}null!==e&&void 0!==window.openwebUrl&&null!==window.openwebUrl&&history.pushState(null,null,window.openwebUrl);var n=document.getElementById("dropdown1"),i=document.getElementById("dropdown2"),o=document.getElementById("dropdown3"),a=document.getElementById("dropdown4"),r=document.getElementById("dropdown5"),l=document.getElementById("dropdown6"),s=document.getElementById("startComparisonButton");if(null!==n&&null!==i&&null!==o&&null!==a&&null!==r&&null!==l&&null!==s){var d=function(e,t,n){t.innerHTML="",n.innerHTML="";var i=document.createElement("option");i.value="",i.textContent="Select Model",t.appendChild(i);var o=document.createElement("option");o.value="Select Year",o.textContent="Select Year",n.appendChild(o),u();var a=JSON.parse(e.value);Array.isArray(a)&&a.forEach(function(e){var n=document.createElement("option");n.value=e.id,n.textContent=e.name,t.appendChild(n)})},c=function(e,t){if(null!=t&&null!=t){e.innerHTML="";var n=document.createElement("option");n.value="Select Year",n.textContent="Select Year",e.appendChild(n),u();var i=new XMLHttpRequest;i.open("POST","/fetch/compare-page/car-model-years/tag/"+t,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var o=document.getElementById("compare-error-msg");o&&(o.innerHTML="",o.classList.add("is-hidden")),i.onreadystatechange=function(){if(4==i.readyState){var t=JSON.parse(i.response);if(t.data)t.data.forEach(function(t){var n=document.createElement("option");n.value=t.id,n.textContent=t.name,e.appendChild(n)});t.error&&o&&(o.innerHTML=t.error,o.classList.remove("is-hidden"))}};var a="id="+encodeURIComponent(t);i.send(a)}},u=function(){o.value&&l.value&&"Select Year"!=o.value&&"Select Year"!=l.value&&o.value!=l.value?s.classList.add("is-activated"):s.classList.remove("is-activated")};n.addEventListener("change",function(){d(n,i,o)}),i.addEventListener("change",function(){c(o,this.value)}),a.addEventListener("change",function(){d(a,r,l)}),r.addEventListener("change",function(){c(l,this.value)}),o.addEventListener("change",u),l.addEventListener("change",u),s.addEventListener("click",function(e){!function(){var e=o.value,t=o.options[o.selectedIndex].text,n=l.value,i=l.options[l.selectedIndex].text;if(e!=n&&void 0!==window.comparePageId&&null!=window.comparePageId&&null!=window.openwebUrl&&null!=window.openwebUrl){var a=new XMLHttpRequest;a.open("POST","/fetch/compare-page/comparison",!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var r=document.getElementById("compare-error-msg");r&&(r.innerHTML="",r.classList.add("is-hidden")),a.onreadystatechange=function(){if(4==a.readyState){var e=JSON.parse(a.responseText);e.redirectUrl&&(window.location.href=e.redirectUrl),e.error&&r&&(r.innerHTML=e.error,r.classList.remove("is-hidden"))}};var s="id1="+encodeURIComponent(e);s+="&text1="+encodeURIComponent(t),s+="&id2="+encodeURIComponent(n),s+="&text2="+encodeURIComponent(i),s+="&comparePageId="+encodeURIComponent(window.comparePageId),s+="&openwebUrl="+encodeURIComponent(window.openwebUrl),a.send(s)}}()}),window.addEventListener("pageshow",function(e){(e.persisted||"back_forward"===performance.getEntriesByType("navigation")[0].type)&&(n.selectedIndex=0,a.selectedIndex=0,d(n,i,o),d(a,r,l))})}var m=document.getElementById("tag-1"),v=document.getElementById("tag-2"),p=document.getElementById("compare-page-trims-dropdown-1"),h=document.getElementById("compare-page-trims-dropdown-2");if(null!==m&&null!==v&&null!=m.textContent&&null!=v.textContent){var f=function(e,t,n){if(value=t.value,null!=value){var i=window.location.href,o="?filters=";o+=1==n?value+"-vs-"+e:e+"-vs-"+value,i.includes("?filters=")?i=i.replace(/\?filters=.*/,o):i+=o,window.location.href=i+"&noIndex=true"}};tagId1=m.textContent,tagId2=v.textContent,null!=p&&p.addEventListener("change",function(){f(tagId2,p,1)}),null!=h&&h.addEventListener("change",function(){f(tagId1,h,2)})}var y=document.getElementById("change-car-button-1"),g=document.getElementById("change-car-button-2"),w=document.getElementById("compare-page-selector-close-btn"),b=(a=document.getElementById("dropdown4"),r=document.getElementById("dropdown5"),l=document.getElementById("dropdown6"),document.getElementById("dropdown7")),E=document.getElementById("compare-page-selector-select-btn"),k=document.getElementById("compare-to");if(null!=y&&null!=g&&null!=w&&null!=a&&null!=r&&null!=l&&null!=b&&null!=E&&null!=k&&null!==m&&null!==v&&null!=m.textContent&&null!=v.textContent){var L=function(e,t,n){var i=document.getElementById("compare-page-selector-extra");null!=i&&(k.textContent=t,k.setAttribute("data-id",n),e?i.classList.remove("is-hidden"):(i.classList.add("is-hidden"),a.selectedIndex=0,S(a,r,l,b)))},S=function(e,t,n,i){t.innerHTML="",n.innerHTML="",i.innerHTML="";var o=document.createElement("option");o.value="",o.textContent="Select Model",t.appendChild(o);var a=document.createElement("option");a.value="Select Year",a.textContent="Select Year",n.appendChild(a);var r=document.createElement("option");r.value="Select Trim",r.textContent="Select Trim",i.appendChild(r),_(),JSON.parse(e.value).forEach(function(e){var n=document.createElement("option");n.value=e.id,n.textContent=e.name,t.appendChild(n)})},_=function(){b.value&&"Select Trim"!=b.value?E.classList.add("is-activated"):E.classList.remove("is-activated")};y.addEventListener("click",function(){L(!0,v.textContent,1)}),g.addEventListener("click",function(){L(!0,m.textContent,2)}),w.addEventListener("click",function(){L(!1)}),a.addEventListener("change",function(){S(a,r,l,b)}),r.addEventListener("change",function(){!function(e,t,n){if(null!=n&&null!=n){e.innerHTML="",t.innerHTML="";var i=document.createElement("option");i.value="Select Year",i.textContent="Select Year",e.appendChild(i);var o=document.createElement("option");o.value="Select Trim",o.textContent="Select Trim",t.appendChild(o),_();var a=new XMLHttpRequest;a.open("POST","/fetch/compare-page/car-model-years/tag/"+n,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4==a.readyState){var t=JSON.parse(a.response);if(t.data&&t.data.forEach(function(t){var n=document.createElement("option");n.value=t.id,n.textContent=t.name,e.appendChild(n)}),t.error){e.innerHTML="";var n=document.createElement("option");n.value="Select Year",n.textContent=t.error,e.appendChild(n)}}};var r="id="+encodeURIComponent(n);a.send(r)}}(l,b,this.value)}),l.addEventListener("change",function(){!function(e,t){if(null!=t&&null!=t){e.innerHTML="";var n=document.createElement("option");n.value="Select Trim",n.textContent="Select Trim",e.appendChild(n),_();var i=new XMLHttpRequest;i.open("POST","/fetch/compare-page/car-year-trims/tag/"+t,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4==i.readyState){var t=JSON.parse(i.response);if(t.data&&t.data.forEach(function(t){var n=document.createElement("option");n.value=t.id,n.textContent=t.name,e.appendChild(n)}),t.error){e.innerHTML="";var n=document.createElement("option");n.value="Select Trim",n.textContent=t.error,e.appendChild(n)}}};var o="id="+encodeURIComponent(t);i.send(o)}}(b,this.value)}),b.addEventListener("change",_),E.addEventListener("click",function(e){!function(){var e=b.value;if(toCompareTag=k.textContent,order=k.getAttribute("data-id"),null!=e&&null!=toCompareTag&&null!=order){var t=window.location.href,n="?filters=";1==parseInt(order)?n+=e+"-vs-"+toCompareTag:n+=toCompareTag+"-vs-"+e,t.includes("?filters=")?t=t.replace(/\?filters=.*/,n):t+=n,window.location.href=t+"&noIndex=true"}}()})}document.querySelectorAll("[id=vehicleSpecialFieldsSelect]").forEach(function(e){e.addEventListener("change",function(e){var t=e.target.value;window.location.href=t})})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){(0,i.jx)(o)}):(0,i.jx)(o)},6374(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}n.d(t,{m:()=>d});var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,i=[{key:"push",value:function(t,n){var i=e._getObject(t),o=e._indexOf(i,n);-1!==o&&i.splice(o,1),i.push({val:n,cAt:Date.now()}),e._setObject(t,e._trimOldest(i))}},{key:"has",value:function(t,n){var i=e._getObject(t);return e._has(i,n)}},{key:"filterAlreadyIn",value:function(t,n){var i,o=e._getObject(t),r=[],l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw r}}}}(n);try{for(l.s();!(i=l.n()).done;){var s=i.value;e._has(o,s)||r.push(s)}}catch(e){l.e(e)}finally{l.f()}return r}},{key:"_strFromVal",value:function(e){return e+""}},{key:"_has",value:function(t,n){return t.some(function(t){return e._strFromVal(t.val)===e._strFromVal(n)})}},{key:"_indexOf",value:function(t,n){return t.findIndex(function(t){return e._strFromVal(t.val)===e._strFromVal(n)})}},{key:"_trimOldest",value:function(t){return t.sort(function(e,t){return t.cAt-e.cAt}),t.splice(e.MAX_HISTORY,1/0),t.sort(function(e,t){return e.cAt-t.cAt})}},{key:"_getObject",value:function(t){return e._cachedArr[t]||(e._cachedArr[t]=JSON.parse(localStorage.getItem(t)||"[]")),e._cachedArr[t]}},{key:"_setObject",value:function(t,n){e._cachedArr[t]=n,localStorage.setItem(t,JSON.stringify(n))}},{key:"getAll",value:function(t){return e._getObject(t).map(function(e){return e.val})}},{key:"getMostRecent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return o(e._getObject(t)).sort(function(e,t){return t.cAt-e.cAt}).slice(0,n).map(function(e){return e.val})}}],(n=null)&&l(t.prototype,n),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();d.MAX_HISTORY=1e3,d._cachedArr={}},6854(e,t,n){"use strict";n.d(t,{Em:()=>u,GN:()=>c,qy:()=>v,zY:()=>r});var o=n(399),a=n(3506);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=e.getAttribute("data-gallery-id"),i=e.getAttribute("data-gallery-thumbnail-id");try{"image_masonry"==e.getAttribute("data-gallery-type")?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(Math.random().toString(36).substring(2,15)),i=t.skipEvents||!1,o=document.getElementById(e),a=o.getAttribute("data-gallery-expanded-id"),r=o.getAttribute("data-gallery-expanded-thumbnail-id"),s=o.querySelector(".i-expand"),d=o.querySelectorAll("[data-image-index]"),c=function(e){var t=+((e.target.closest("[data-image-index]")||e.target).getAttribute("data-image-index")||0);l(a,{thumbnailGalleryId:r,index:t,skipEvents:!0});var n=document.getElementById(a);if(n){document.body.classList.add("is-fixed"),n.parentElement.classList.add("is-fullscreen");var i=document.getElementById("images");i&&i.classList.add("fullscreen")}},u=[s],m=0;m<d.length;m++)u.push(d[m]);for(var v=0;v<u.length;v++){var p=u[v];p&&(i||p.setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Image Group",action:"Fullscreen Image Load",once:!0})),p.setAttribute("data-stnl-group-once",n),p.addEventListener("click",c))}}(n,{}):l(n,{thumbnailGalleryId:i,index:0,withTimeout:!1,isFocused:t.isFocused})}catch(e){console.error(e)}try{(0,a.om)()}catch(e){console.error(e)}}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({index:void 0,thumbnailGalleryId:void 0,withTimeout:!0,isFocused:!0,skipEvents:!1},t),i=n.index,o=n.withTimeout,a=n.isFocused,r=n.skipEvents,s=n.thumbnailGalleryId,d="#".concat(e),c=document.querySelector(d);if(c){var u="".concat(Math.random().toString(36).substring(2,15)),m=new Splide(c,{type:"fade",rewind:!0,pagination:!1,arrows:!0,slideFocus:!0,keyboard:!0}),v=145,p=80;document.querySelector(".layout-exclusive")&&(v=250,p=140);var h=new Splide("#"+s,{gap:10,fixedWidth:v,fixedHeight:p,rewind:!0,pagination:!1,isNavigation:!0,arrows:!1,breakpoints:{768:{fixedWidth:120,fixedHeight:80,perPage:3}}});m.on("mounted",function(){var t=document.getElementById(e),n=t.querySelector(".splide__arrow--prev"),i=t.querySelector(".splide__arrow--next");n.setAttribute("tabindex","-1"),i.setAttribute("tabindex","0"),a&&(o?setTimeout(function(){n.focus(),i.focus()},100):(n.focus(),i.focus()))}),m.on("click",function(e){console.log(e)}),m.sync(h),m.mount(),h.mount();var f=document.getElementById(e),y=f.querySelector(".i-expand"),g=f.querySelector(".i-close"),w=(f.querySelector(".splide__arrow--prev"),f.querySelector(".splide__arrow--next"));w&&(r||(w.setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Image Group",action:"Hero Image Load",once:!0})),w.setAttribute("data-stnl-group-once",u))),y&&(r||y.setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Image Group",action:"Fullscreen Image Load",once:!0})),y.setAttribute("data-stnl-group-once",u),y.addEventListener("click",function(e){var t=f.getAttribute("data-gallery-expanded-id");l(t,{thumbnailGalleryId:f.getAttribute("data-gallery-expanded-thumbnail-id"),index:m.index,skipEvents:!0});var n=document.getElementById(t);if(n){document.body.classList.add("is-fixed"),n.parentElement.classList.add("is-fullscreen");var i=document.getElementById("images");i&&i.classList.add("fullscreen")}})),g&&(g.addEventListener("click",function(e){f.parentElement.classList.remove("is-fullscreen"),document.body.classList.remove("is-fixed");var t=document.getElementById("images");t&&t.classList.remove("fullscreen")}),document.addEventListener("keydown",function(e){if("Escape"===event.key){f.parentElement.classList.remove("is-fullscreen"),document.body.classList.remove("is-fixed");var t=document.getElementById("images");t&&t.classList.remove("fullscreen")}})),m.go(i)}}function s(e,t,n,i,o){if(null!=i){for(var a=document.querySelector('div[data-img-unique-id="'.concat(i,'"]')),r=(null!=a.previousElementSibling&&a.previousElementSibling.getAttribute("data-img-unique-id"),a.getAttribute("data-img-unique-id"),null!=a.nextElementSibling&&a.nextElementSibling.getAttribute("data-img-unique-id"),n.getElementsByClassName("swiper-slide")),l=n.querySelector("figure img[src='"+a.dataset.imgUrl+"']"),s=0;s<r.length;s++)r[s].classList.remove("active-slide");if(l)l.parentElement.parentElement.parentElement.classList.add("active-slide");else{var d=document.createElement("div");d.classList.add("swiper-slide","active-slide");var c=document.createElement("div");c.classList.add("body-img","responsive-img");var u=document.createElement("figure"),m=document.createElement("figcaption"),v=document.createElement("img");v.setAttribute("src",a.dataset.imgUrl);var p=document.createElement("div");if(p.classList.add("lightbox__count"),e.length>1?p.innerHTML="Image "+(o+1)+" of "+e.length:p.innerHTML="",void 0!==a.dataset.imgCaption&&(m.innerHTML=JSON.parse(a.dataset.imgCaption)),u.appendChild(v),u.appendChild(m),c.appendChild(u),d.appendChild(c),void 0!==a.dataset.imgDesc){var h=document.createElement("figcaption");h.classList.add("swiper-img-description"),h.innerHTML=JSON.parse(a.dataset.imgDesc),d.appendChild(h)}d.appendChild(p),n.appendChild(d)}}}function d(e){if(document.body.classList.contains("gallery-modal-opened")){var t=document.getElementsByClassName("swiper-button-next"),n=document.getElementsByClassName("swiper-button-prev"),o=document.getElementsByClassName("lightbox__exit-btn");if("Escape"==e.key){for(i=0;i<o.length;i++)if("block"==o[i].parentElement.style.display){o[i].click();break}}else if("ArrowLeft"==e.key){for(i=0;i<n.length;i++)if("block"==n[i].parentElement.parentElement.parentElement.style.display){n[i].click();break}}else if("ArrowRight"==e.key)for(i=0;i<t.length;i++)if("block"==t[i].parentElement.parentElement.parentElement.style.display){t[i].click();break}}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({includeCounters:!1,includeSentinelTracker:!1},e),n=t.includeCounters,i=t.includeSentinelTracker;document.body.removeEventListener("keydown",d),document.body.addEventListener("keydown",d);var o="".concat(Math.random().toString(36).substring(2,15));n&&document.querySelectorAll(".w-display-card-image-group").forEach(function(e){e.addEventListener("click",function(){console.log("counter clicked");var e=this.closest(".display-card").querySelector(".gallery__images");if(e){var t=e.querySelector(".gallery__images__item");t&&t.click()}})});for(var a=document.getElementsByClassName("gallery__images__item"),r=0;r<a.length;r++){if(!a[r].closest('[data-gallery-type="image_masonry"]')){var l=!1;if(a[r].closest(".display-card")&&(l=!0),l){var c="".concat(Math.random().toString(36).substring(2,15));a[r].setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Tag Display Card",action:"Image Gallery Open",once:!0})),a[r].setAttribute("data-stnl-group-once",c)}else i&&(a[r].setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Image Group",action:"Fullscreen Image Load",once:!0})),a[r].setAttribute("data-stnl-group-once",o));a[r].addEventListener("click",function(e){var t=document.getElementById(this.getAttribute("data-gallery-modal-id")),n=document.getElementById(this.getAttribute("data-gallery-slides-container-id")),i=document.getElementsByClassName(this.getAttribute("data-img-class")),a=Array.prototype.indexOf.call(i,this);n.dataset.index=a,s(i,0,n,this.getAttribute("data-img-unique-id"),a);var r=t.getElementsByClassName("swiper-button-next")[0],l=t.getElementsByClassName("swiper-button-prev")[0],d=t.getElementsByClassName("lightbox__exit-btn"),c=null;d&&(c=d[0]),t.classList.add("open-lightbox"),1===i.length&&(r.style.display="none",l.style.display="none"),i.length>1&&(r.getAttribute("status")||(r.setAttribute("status","has_click_event"),r.setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Image Group",action:"Hero Image Load",once:!0})),r.setAttribute("data-stnl-group-once",o),r.addEventListener("click",function(e){(a+=1)>=i.length&&(a=0);var t=i[a];t&&s(i,0,n,t.getAttribute("data-img-unique-id"),a)})),l.getAttribute("status")||(l.setAttribute("status","has_click_event"),l.addEventListener("click",function(e){(a-=1)<0&&(a=i.length-1);var t=i[a];t&&s(i,0,n,t.getAttribute("data-img-unique-id"),a)}))),c&&c.addEventListener("click",function(e){t.style.display="none",t.classList.remove("open-lightbox"),document.body.style.overflow="initial",document.body.classList.remove("gallery-modal-opened")}),t.style.display="block",document.body.style.overflow="hidden",document.body.classList.add("gallery-modal-opened")})}}return!1}function u(){document.querySelectorAll(".w-display-card-video-trailer").forEach(function(e){e.addEventListener("click",function(){var e=this.getAttribute("data-video-uuid"),t=this.closest(".display-card"),n=t.querySelector("#tag-video-".concat(e));if(n){var i=t.querySelector("#tag-video-play-".concat(e));i.style.display="none";var a={stateButton:i,onPlay:function(e){e.options.stateButton&&(e.options.stateButton.style.display="none")},onEnded:function(e){e.options.stateButton&&(e.options.stateButton.style.display="block"),e.options.replayOnEnd&&(e.video.currentTime=0)}};new o.I(n,a).playVideo()}})})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=document.querySelectorAll(".display-card .expand-extra-info-btn");if(t.length>0){var n=function(t){var n="1"===t.currentTarget.dataset.isExpanded,i=t.currentTarget.closest(".display-card"),o=(i.querySelector(".w-display-card-media-menu"),t.currentTarget.getAttribute("data-url"));(i.querySelector(".w-display-card-group-counter")||i.querySelector(".w-display-card-video-trailer"))&&("1"!==t.currentTarget.dataset.mediaLoadTriggered&&"0"===t.currentTarget.dataset.mediaLoaded?(t.currentTarget.dataset.mediaLoadTriggered="1",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fetch(e,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()}).then(function(e){if(e.imageGroup){var i=t.querySelector(".img-group");i&&(i.innerHTML=e.imageGroup,function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({includeCounters:!1,includeSentinelTracker:!0},t),i=(n.includeCounters,n.includeSentinelTracker),o=e.querySelectorAll(".gallery__images__item"),a="".concat(Math.random().toString(36).substring(2,15)),r=0;r<o.length;r++){o[r];i&&(o[r].setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Tag Display Card",action:"Image Gallery Open",once:!0})),o[r].setAttribute("data-stnl-group-once",a)),o[r].addEventListener("click",function(e){var t=document.getElementById(this.getAttribute("data-gallery-modal-id")),n=document.getElementById(this.getAttribute("data-gallery-slides-container-id")),i=document.getElementsByClassName(this.getAttribute("data-img-class")),o=Array.prototype.indexOf.call(i,this);n.dataset.index=o,s(i,0,n,this.getAttribute("data-img-unique-id"),o);var r=t.getElementsByClassName("swiper-button-next")[0],l=t.getElementsByClassName("swiper-button-prev")[0],d=t.getElementsByClassName("lightbox__exit-btn"),c=null;d&&(c=d[0]),t.classList.add("open-lightbox"),1===i.length&&(r.style.display="none",l.style.display="none"),i.length>1&&(r.getAttribute("status")||(r.setAttribute("status","has_click_event"),r.setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Image Group",action:"Hero Image Load",once:!0})),r.setAttribute("data-stnl-group-once",a),r.addEventListener("click",function(e){(o+=1)>=i.length&&(o=0);var t=i[o];t&&s(i,0,n,t.getAttribute("data-img-unique-id"),o)})),l.getAttribute("status")||(l.setAttribute("status","has_click_event"),l.addEventListener("click",function(e){(o-=1)<0&&(o=i.length-1);var t=i[o];t&&s(i,0,n,t.getAttribute("data-img-unique-id"),o)}))),c&&c.addEventListener("click",function(e){t.style.display="none",t.classList.remove("open-lightbox"),document.body.style.overflow="initial",document.body.classList.remove("gallery-modal-opened")}),t.style.display="block",document.body.style.overflow="hidden",document.body.classList.add("gallery-modal-opened")})}}(i,n))}if(e.trailer){var o=t.querySelector("#tag-video-".concat(e.uuid));if(o){var a="".concat(Math.random().toString(36).substring(2,15));o.setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Tag Display Card",action:"Video Played",once:!0})),o.setAttribute("data-stnl-group-once",a),o.src=e.trailer.url,o.type=e.trailer.type,o.load();var r=t.querySelector("#tag-video-play-".concat(e.uuid));r.setAttribute("data-stnl",JSON.stringify({category:"Click Interactions",name:"Tag Display Card",action:"Video Played",once:!0})),r.setAttribute("data-stnl-group-once",a)}}var l=t.querySelector(".expand-extra-info-btn");l&&(l.dataset.mediaLoaded="1",l.dataset.mediaLoadTriggered="0"),p(t)}).catch(function(e){console.error("Error fetching tag media:",e);var n=t.querySelector(".expand-extra-info-btn");n&&(n.dataset.mediaLoadTriggered="0")})}(o,i,e)):n||p(i)),t.currentTarget.dataset.isExpanded=n?"0":"1"};t.forEach(function(e){"1"!==e.getAttribute("data-has-click-listener")&&(e.setAttribute("data-has-click-listener","1"),e.addEventListener("click",n))})}}function v(){m(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});var e=document.querySelectorAll(".w-display-card-media-menu");if(e.length>0){var t=function(e){var t=e.currentTarget.closest(".display-card"),n=e.currentTarget.getAttribute("data-tag-uuid"),i=t.querySelector("#expand-extra-content-".concat(n));i&&i.click()};e.forEach(function(e){"1"!==e.getAttribute("data-has-click-listener")&&(e.setAttribute("data-has-click-listener","1"),e.addEventListener("click",t))})}}function p(e){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var t=e.querySelector(".w-display-card-media");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}}window.makeGalleryImageClickableOnLazyLoadedList=c,window.makeTagVideoClickableOnLazyLoadedList=u,window.expandDisplayCardFooter=v},7243(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}n.d(t,{Q:()=>s});var r=n(8089).verifyUser,l="[data-is-like-article-button]",s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialized=!1},t=[{key:"getDefaultTextEl",value:function(){return this._defaultTextEl||(this._defaultTextEl=document.createElement("span")),this._defaultTextEl}},{key:"getDefaultIconEl",value:function(){return this._defaultIconEl||(this._defaultIconEl=document.createElement("span")),this._defaultIconEl}},{key:"initialize",value:function(){this.initialized||(this.initialized=!0,this.buttons=document.querySelectorAll(l),this.attachEventListeners(),this.cleanupLiked(),this.render())}},{key:"update",value:function(){this.buttons=document.querySelectorAll(l),this.attachEventListeners(),this.render()}},{key:"attachEventListeners",value:function(){for(var e=0;e<this.buttons.length;e++)this.attachEventListener(this.buttons[e])}},{key:"render",value:function(){this.getLiked();for(var e=0;e<this.buttons.length;e++)this.setButtonState(this.buttons[e])}},{key:"attachEventListener",value:function(e){if(!e.isAttached){e.isAttached=!0,e.boundEventListener=this.onButtonClick.bind(this),e.addEventListener("click",e.boundEventListener);var t=e.closest(".inactive");t&&this.modifyClass("remove",t,"inactive")}}},{key:"setButtonState",value:function(e){var t=e.querySelector("[data-is-icon]")||this.getDefaultIconEl(),n=e.querySelector("[data-is-text]")||this.getDefaultTextEl(),i=window.websiteUser&&window.websiteUser.isUserLoggedIn,o=this.getLikedValue(i?e.dataset.id:null,+e.dataset.value),a=e.dataset.likeCount,r=null!==e.closest(".layout-vertical-short");0==o.newValue?(this.modifyClass("remove",t,e.dataset.likeIcon),this.modifyClass("add",t,e.dataset.unlikeIcon),r||(n.innerText=a&&a>9?this.thousandsFormat(Number(a)):e.dataset.likeTitle),e.dataset.value=0):(r||(n.innerText=a&&a>9?this.thousandsFormat(Number(a)):e.dataset.unlikeTitle),this.modifyClass("remove",t,e.dataset.unlikeIcon),this.modifyClass("add",t,e.dataset.likeIcon),e.dataset.value=1)}},{key:"thousandsFormat",value:function(e){for(var t=["","K","M","B","T"],n=0;e>=1e3&&n<t.length-1;)e/=1e3,n++;return e.toFixed(1).replace(/\.0$/,"")+t[n]}},{key:"modifyClass",value:function(e,t,n){for(var i=n.split(" "),o=0;o<i.length;o++)"add"===e?t.classList.add(i[o]):t.classList.remove(i[o])}},{key:"onButtonClick",value:function(e){var t=e.target.closest(l);t.disabled=!0;var n=+t.dataset.value,i={id:t.dataset.id,isLike:1===n?0:1,originalValue:n};if(!r(window.websiteUser,!0,"",!0,{triggeredFrom:"like",gaEventCategory:"like",valnetLoginAction:{apiCallCallback:"LikeArticle.submitLikeArticle",apiCallCallbackOptions:i}}))return t.disabled=!1,!1;this.submitLikeArticle(i).finally(function(){t.disabled=!1})}},{key:"fetchLikeArticle",value:function(e){var t=this;return fetch("/like-article-submit/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e)}).then(function(e){if(!e.ok)throw new Error;return e.json()}).then(function(){t.addToLiked(e.id,e.isLike,e.originalValue)})}},{key:"submitLikeArticle",value:function(e){var t=this;return this.fetchLikeArticle(e).then(function(){setTimeout(function(){t.render()})}).catch(function(){})}},{key:"getLiked",value:function(){var e=localStorage.getItem("likeArticleList");return e?JSON.parse(e||"{}"):{}}},{key:"setLiked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};localStorage.setItem("likeArticleList",JSON.stringify(e))}},{key:"addToLiked",value:function(e,t,n){var i=this.getLiked();i[e]={newValue:t,oldValue:n,createdAt:Date.now()},this.setLiked(i)}},{key:"getLikedValue",value:function(e,t){if(e){var n=this.getLiked()[e];if(n)return n}return{oldValue:t,newValue:t,defaultValue:!0,createdAt:Date.now()}}},{key:"removeLiked",value:function(e){var t=this.getLiked();delete t[e],this.setLiked(t)}},{key:"cleanupLiked",value:function(){for(var e=[],t=[],n=0;n<this.buttons.length;n++){var i=this.buttons[n];-1==e.indexOf(i.dataset.id)&&(e.push(i.dataset.id),t.push(+i.dataset.value))}for(var o=0;o<e.length;o++)this.getLikedValue(e[o],t[o]).newValue===t[o]&&this.removeLiked(e[o]);var a=this.getLiked();for(var r in a)(null==a[r].createdAt||a[r].createdAt<Date.now()-3e5)&&delete a[r];this.setLiked(a)}}],t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();s._instance=null,s.getInstance=function(){return s._instance||(s._instance=new s),s._instance}},8089(e,t,n){"use strict";n.r(t),n.d(t,{verifyUser:()=>s});var i=n(925);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"thread",o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(a=r(r({},{mode:"popup",idParent:null,className:"popup",triggeredFrom:"thread",gaEventCategory:"thread",showCloseButton:!0}),a),!e){if(window.dispatchEvent(new CustomEvent("valnet_ui_event:user_not_logged_in")),t){if(!window.ValnetLogin)return console.error("ValnetLogin is not defined."),!1;var d=new ValnetLogin(a);d.showLoginForm(d),o&&(location.hash=n)}return"function"==typeof l&&l(),!1}if(!e.isVerified){if(window.dispatchEvent(new CustomEvent("valnet_ui_event:user_not_verified")),t)(new i.A).showAccountVerificationPopup();return"function"==typeof s&&s(),!1}return!0}},8790(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){if(e.classList.toggle("is-hidden"),document.querySelector(".thread-widget-summary-button").classList.toggle("active"),!e.classList.contains("is-hidden")){var n=new CustomEvent("vn_ui:initialize_interactives");window.dispatchEvent(n),setTimeout(function(){if(window.lazyListAjaxUrl&&"#threads"!=window.location.hash)window.location.hash="#threads";else{var e=document.getElementById("threads");e&&t&&e.scrollIntoView({behavior:"smooth",block:"start"})}},0)}if(t){var i=document.getElementById("threads");i&&i.scrollIntoView({behavior:"smooth",block:"start"})}}}window.toggleThreadsSummary=function(t){var n=document.querySelector("[data-is-widget-thread-summary]");n&&(n._dataLoaded?e(n,t):(n.classList.add("is-loading"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};fetch("/fetch/sensatools/fetch-threads-summaries/?articleId=".concat(e)).then(function(e){return e.json()}).then(t).catch(n)}(n.getAttribute("data-id-article"),function(t){n.innerHTML=t.threadSummary,n._dataLoaded=!0,e(n),n.classList.remove("is-loading")},console.error),n.addEventListener("click",function(e){var t=e.target.closest("[data-ref-id-comment]");if(t){var n=t.getAttribute("data-ref-id-comment");if(n){var i=document.getElementById("comment-".concat(n));if(i)i.scrollIntoView({behavior:"smooth",block:"center"});else{var o=window.location.href;window.open("".concat(o,"?post=").concat(n,"#comment-").concat(n),"_blank")}}}})))}},9953(e,t,n){"use strict";n.d(t,{a:()=>c});var i=n(3768);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var l="iablc_key",s="vnPromoAsyncFlags",d="MUR".concat((0,i.zr)(document.URL)),c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window[d]||(window[d]=this,this.initTimeout=setTimeout(this.initialize.bind(this),500))},t=[{key:"initialize",value:function(){this.processFlags(),window.addEventListener("iablc_event",this.onStateChanged.bind(this)),this.readFromStorage()}},{key:"processFlags",value:function(){try{if(window[s]){var e=JSON.parse(atob(window[s]));this.url=e.mural,this.extras=JSON.parse(atob(e.muralConfig))}}catch(e){this.url=null}}},{key:"readFromStorage",value:function(){if(localStorage){var e=localStorage.getItem(l);this.updateFlag(this.itemToBool(e))}}},{key:"onStateChanged",value:function(e){e&&e.detail&&e.detail[l]&&this.updateFlag(this.itemToBool(e.detail[l]))}},{key:"itemToBool",value:function(e){return!(!e||"true"!==e&&!0!==e)}},{key:"updateFlag",value:function(e){var t=new Date;e?t.setTime(t.getTime()+31536e6):(t.setFullYear(2e3),t.setMonth(0),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0));var n=t.toUTCString();document.cookie="".concat("vnPromo_2cfe6e26de9b","=").concat(e?"yes":"no","; expires=").concat(n,"; path=/"),this.state=e,this.showMural()}},{key:"senp",value:function(){if("true"===localStorage.getItem("muralWasPresent")&&!this.state&&window.websiteSentinel){var e,t,n=!0,i=this.el;i&&(n="false"!==(null===(e=i.dataset)||void 0===e?void 0:e.sentinelTracking)&&"0"!==(null===(t=i.dataset)||void 0===t?void 0:t.sentinelTracking));var o,a=this.extras.converted;n&&(null===(o=window.websiteSentinel)||void 0===o||o.sendEvent(a.category,a.name,a.value));var r=localStorage.getItem("userHasMural");if(localStorage.removeItem("userHasMural"),"true"===r){localStorage.setItem("userWasMuraledBefore",!0);var l,s=this.extras.convertedUser;n&&(null===(l=window.websiteSentinel)||void 0===l||l.sendEvent(s.category,s.name,s.value))}}}},{key:"getInfo",value:function(){var e={},t=document.querySelector("[data-author-nice-name]");return t&&t.getAttribute("data-author-nice-name")&&(e.authorNiceName=t.getAttribute("data-author-nice-name")),e.referer=document.referrer||"",e.isInternalTraffic=!!window.isInternalTraffic,e}},{key:"showMural",value:function(){var e=this;this.url&&(document.querySelector('.w-promotion-offer[data-popup="true"]')||this.alreadyShown||(this.alreadyShown=!0,fetch(this.url,{method:"POST",body:JSON.stringify(this.getInfo()),headers:{"Content-Type":"application/json","X-Referer":document.referrer||"","X-Requested-With":"XMLHttpRequest","X-Internal-Traffic":(!!window.isInternalTraffic).toString()}}).then(function(e){return e.json()}).then(function(t){if(t&&t.content){var n=(0,i.Qb)(t.content);if(!(0,i.lS)(n)){var o=(0,i.CC)(n);e.el=o;var a=o.querySelectorAll("script"),r=o.querySelectorAll("style"),l=o.querySelector("dialog");r.forEach(function(e){document.head.appendChild(e)}),document.body.querySelector("main").appendChild(l),a.forEach(function(e){var t=document.createElement("script");t.textContent=e.textContent;try{document.body.appendChild(t)}catch(e){console.error(e)}}),localStorage.setItem("muralWasPresent",!0),localStorage.setItem("userHasMural",!0)}}}).catch(function(){}).finally(function(){e.senp()})))}}],t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==i.return||i.return()}finally{if(s)throw r}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var a=function(){"use strict";return n=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),document.body._lazyListLoader)return document.body._lazyListLoader;this.ajaxUrl=t.ajaxUrl,this.waypointElement=t.waypointElement,this.container=t.container,this.totalItems=t.totalItems,this.lastHeaderIndex=t.lastHeaderIndex,this.numItemRequested=t.numItemRequested,this.triggerWayPointHandler=!0,this.loadedItems=t.numItemRequested,this.pageNumber=0,this.isEmakiPreview=t.isEmakiPreview,this.loadedElements=[],this.failedElements=[],this.alreadyTriggered=!1,this.reachedEnd=!1,document.body._lasyListLoader=this},o=[{key:"getAjaxRequest",value:function(){var e=new XMLHttpRequest;return e.open("POST",this.ajaxUrl,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e}},{key:"getRequest",value:function(){var e={};if(new FormData,e.data=JSON.stringify({currentHeaderIndex:this.lastHeaderIndex,requestedItemSize:this.numItemRequested,loadedItems:this.loadedItems,pageNumber:this.pageNumber,totalItems:this.totalItems,isEmakiPreview:this.isEmakiPreview}),window.adsNinja&&"function"==typeof window.adsNinja.getExtendedSectionAdRequestData){var t=window.adsNinja.getExtendedSectionAdRequestData(!1);t&&(e.adData=JSON.stringify(t))}return fetch(this.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()})}},{key:"tick",value:function(){var e=this;this.tryFailedBlocks(),this.reachedEnd||this.tickIsBusy||(this.tickIsBusy=!0,this.pageNumber++,this.getRequest().then(function(e){return e.json()}).then(function(t){return t&&t.html||(e.reachedEnd=!0),t}).then(this.processResponse.bind(this)).then(this.initializeBlock.bind(this)).then(function(){Waypoint.refreshAll()}).catch(function(){console.log("%cLazy List: Processing response","color: yellow; background: cyan; padding: 4px; border-radius: 3px;")}).finally(function(){e.tickIsBusy=!1,e.tick()}))}},{key:"processResponse",value:function(e){console.log("%cLazy List: Processing response","color: yellow; background: cyan; padding: 4px; border-radius: 3px;");var t=this.waypointElement,n=document.createElement("div");return n.classList.add("content-block-regular"),n.innerHTML=e.html,t.insertAdjacentElement("beforebegin",n),this.decodeTimestamps(n),this.loadedItems+=e.loadedItemsSize,this.lastHeaderIndex=e.lastHeaderIndex,this.loadedElements.push(n),n}},{key:"tryFailedBlocks",value:function(){if(this.failedElements.lenght){console.log("%cLazy List: Trying failed blocks","color: yellow; background: cyan; padding: 4px; border-radius: 3px;");try{var e,n=t(this.failedElements);try{for(n.s();!(e=n.n()).done;){var i=e.value;window.ads_injector&&window.ads_injector.generateRepeatableZones(i,"character count repeatable")}}catch(e){n.e(e)}finally{n.f()}this.failedElements=[]}catch(e){console.error(e)}}}},{key:"initializeBlock",value:function(t){console.log("%cLazy List: Initializing block","color: yellow; background: cyan; padding: 4px; border-radius: 3px;");try{window.ads_injector&&window.ads_injector.generateRepeatableZones(t,"character count repeatable")}catch(e){this.failedElements.push(t),console.error(e)}window.makeSingleImageClickableOnLazyLoadedList(),window.makeGalleryImageClickableOnLazyLoadedList({includeCounters:!0}),window.makeTagVideoClickableOnLazyLoadedList(),window.expandDisplayCardFooter(),window.onClickToggleExpandanleBlocks(),window.expandDisplayCardSpecsOnClick(),window.handleArrayOfGalleries(),window.websiteUser&&(window.addMyModulesLoginPopupEventListener(),window.addToListModulesOptionsShowEventListener(),new MyModules);try{window.attachTagInteractionShortMenus()}catch(e){}window.initializeInteractives&&window.initializeInteractives(),window.adsNinja&&"function"==typeof window.adsNinja.runForExtendedSection&&window.adsNinja.runForExtendedSection(returnData.adData&&"object"===e(returnData.adData)&&Object.keys(returnData.adData).length>0?returnData.adData:null)}},{key:"decodeTimestamps",value:function(e){try{window.ValnetB64Ts&&"function"==typeof window.ValnetB64Ts.init?window.ValnetB64Ts.init(e):document.dispatchEvent(new CustomEvent("valnet:timestamp:decode",{detail:{root:e}}))}catch(e){}}},{key:"isWaypointInView",value:function(){return!!this.waypointElement&&this.waypointElement.getBoundingClientRect().top<=window.innerHeight}},{key:"waypointTrigger",value:function(){var e=this;this.alreadyTriggered||(this.alreadyTriggered=!0,new Waypoint({element:this.waypointElement,handler:function(t){"down"==t&&e.tick()},offset:function(){return Waypoint.viewportHeight()+5*Waypoint.viewportHeight()}}))}}],o&&i(n.prototype,o),a&&i(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}();window.LazyList=a})(),(()=>{window.shareModule={shareUrl:function(e,t,n){switch(e){case"facebook":return"https://www.facebook.com/sharer/sharer.php?u="+t;case"twitter":return null===n?"https://twitter.com/intent/tweet?url="+encodeURIComponent(t):"https://twitter.com/intent/tweet?text="+encodeURIComponent(n)+"&url="+encodeURIComponent(t);case"pinterest":return null===n?"https://pinterest.com/pin/create/button/?url="+t+"&media=&description=Check this out!%0D%0A"+t:"https://pinterest.com/pin/create/button/?url="+t+"&media=&description="+n;case"google-plus":return"https://plus.google.com/share?url="+t;case"reddit":return"https://reddit.com/submit/?url="+t;default:return}},ShareButton:function(e,t){var n={popUpWindow:function(){window.open(t,null,"width=650,height=350")}};return e.addEventListener("click",function(e){n.popUpWindow(),e.stopImmediatePropagation()}),n},run:function(){for(var e=document.querySelectorAll(".js-share-button"),t=0;t<e.length;t++){var n=e[t].getAttribute("data-share-type"),i=e[t].getAttribute("data-share-url"),o=e[t].getAttribute("data-share-status");null!=n&&null!=i&&(i=this.shareUrl(n,i,o)),this.ShareButton(e[t],i)}var a=document.getElementsByClassName("fb-comments-count");for(t=0;t<a.length;t++)if(null!=a[t]&&null!=a[t])var r=document.getElementsByClassName("fb_comments_count"),l=setInterval(function(){if(r.length>0&&parseInt(r[0].textContent)>0)return a[0].style.display="block",a[1].style.display="block",clearInterval(l),!1},1e3)}};for(var e=document.getElementsByClassName("copy-link-button"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){n()});function n(){var e=document.location.href;navigator.clipboard.writeText(e).then(function(){var e=document.getElementById("sharingCopyAlertDiv");e&&(e.classList.add("is-copied"),setTimeout(function(){e.classList.remove("is-copied")},3e3))},function(){console.log("Copy Url Error.")})}var i=document.getElementById("sharePopup"),o=document.querySelectorAll(".option-btn.btn-share");if(o.length>0&&i){var a=function(e){e.stopPropagation(),i.classList.add("active")},r=function(e){e.stopPropagation(),i.classList.remove("active")},l=function(e){i.classList.toggle("active")};o.forEach(function(e){e.addEventListener("mouseenter",a),e.addEventListener("mouseleave",r),e.addEventListener("click",l),e.addEventListener("touchend",function(e){e.preventDefault(),l()})}),i.addEventListener("touchend",function(e){e.stopPropagation()})}var s=document.querySelector("#js-social-sharing-bottom"),d=document.querySelector("#js-wrap-dropdown-remaining-socials");if(d){var c=function(e){e.stopPropagation(),d.classList.toggle("active"),s.classList.toggle("active")};s.addEventListener("mouseenter",function(e){e.stopPropagation(),d.classList.add("active"),s.classList.add("active")}),s.addEventListener("mouseleave",function(e){e.stopPropagation(),d.classList.remove("active"),s.classList.remove("active")}),s.addEventListener("click",c),s.addEventListener("touchend",function(e){e.preventDefault(),c(e)}),d.addEventListener("touchend",function(e){e.stopPropagation()})}})(),document.addEventListener("DOMContentLoaded",function(){window.shareModule.run()}),(()=>{"use strict";var _common_gallery_images__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6854),_common_canvas_image_comparator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3506),_common_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3768),_car_comparison__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5075),_common_mural_tracker_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9953),_thread_summary_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8790),_thread_summary_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_thread_summary_js__WEBPACK_IMPORTED_MODULE_5__),_common_verticalShortVideoManager_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(443);function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){l=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function testPathForMural(){try{new _common_mural_tracker_js__WEBPACK_IMPORTED_MODULE_4__.a}catch(e){console.error(e)}}function setCookie(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new Date;i?o.setTime(o.getTime()+60*i*1e3):o.setDate(o.getDate()+n);var a=o.toUTCString();document.cookie=e+"="+t+";expires="+a+";path=/"}function getCookie(e){var t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""}function deleteCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){testPathForMural()}):testPathForMural(),window.whereToWatchWidget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!=n||(n=document),null!=t||(t=e),n.querySelectorAll("#display-card-tabs-".concat(e)).forEach(function(e){var n=e.querySelectorAll(".tab-content-".concat(t)),i=e.querySelectorAll("#tab-container-".concat(t," li")),o=i[0],a=n[0];o.classList.add("selected"),a.classList.remove("hide"),i.forEach(function(e,t){e.id!==o.id&&(e.classList.remove("selected"),n[t].classList.add("hide"));var a=function(){i.forEach(function(e){e.classList.remove("selected")}),e.classList.add("selected"),n.forEach(function(e){e.classList.add("hide")}),n[t].classList.remove("hide")};e.removeEventListener("click",a),e.addEventListener("click",a)})})},window.handleSeasonListChange=function(e,t){var n=t.value;if(n){var i=t.closest(".where-to-watch-widget"),o=i.querySelector("#tabs-wrapper-".concat(n));i.querySelectorAll("#display-card-tabs-".concat(e," .tabs-wrapper")).forEach(function(e){return e.id===o.id?e.classList.remove("hide"):e.classList.add("hide")}),window.whereToWatchWidget(e,n,i)}},window.enableWhereToWatchEverywhere=function(){document.querySelectorAll(".active-display-card-tabs .tabs-wrapper:first-child").forEach(function(e){var t=e.id.split("-");window.whereToWatchWidget(t.pop())})},window.enableWhereToWatchEverywhere(),window.isLayoutExclusive=function(){return!!document.querySelector(".layout-exclusive")},window.valnetLoadFooterArticle=function(){var infoTableBtn=document.getElementById("js-info-table-btn");null!=infoTableBtn&&infoTableBtn.addEventListener("click",function(){if(infoTableBtn)for(var e=document.querySelectorAll(".js-it-target"),t=0;t<e.length;t++)e[t].classList.add("open")});for(var itlb=document.getElementsByClassName("js-title-btn"),i,_i2=0;_i2<itlb.length;_i2++)itlb[_i2].addEventListener("click",function(){this.classList.toggle("open"),this.parentNode.classList.toggle("open")});function extractEmbedScriptSource(e){if(e in window.arrayOfEmbedScripts&&window.arrayOfEmbedScripts[e]){var t=window.arrayOfEmbedScripts[e].replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/^"|"$/g,"").trim(" ");return(new DOMParser).parseFromString(t,"text/html")}return null}var hasFbAndInstEmbeds=function(){var e=!1,t=!1;for(var n in window.arrayOfEmbeds)for(var i in window.arrayOfEmbeds[n])"embedded_facebook"!==i&&"facebook"!==i||(e=!0),"embedded_instagram"!==i&&"instagram"!==i||(t=!0);return e&&t},appendScriptForEmbeds=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=document.getElementById(t);i&&i.remove();var o=document.createElement("script");o.id=t,o.src=e,o.async=!0,o.onload=n,document.body.appendChild(o)},_loop=function _loop(embed){var _loop4=function _loop4(value){var scriptDoc=extractEmbedScriptSource(value),script=null;scriptDoc&&(script=scriptDoc.getElementsByTagName("script")[0],script&&(script.type="text/javascript")),new Waypoint({element:document.getElementById(embed),handler:function handler(direction){var _this=this;console.info("Direction: "+direction),console.log("Embed Lazy Loading",this.element.id);var html=window.arrayOfEmbeds[embed][value].replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/^"|"$/g,"").replace(/&amp;/g,"&").trim(" ");switch(this.element.innerHTML=html,value){case"twitter":case"embedded_twitter":console.log("Twitter Widget Reload"),appendScriptForEmbeds("https://platform.twitter.com/widgets.js","twitter-embed-script"),void 0!==window.twttr&&window.twttr.widgets.load(this.element);break;case"facebook":case"embedded_facebook":console.log("Facebook Widget Reload"),appendScriptForEmbeds("https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v20.0","facebook-embed-script"),void 0!==window.FB&&window.FB.XFBML.parse(this.element,function(){console.log("Facebook Widget rendered successfully!"),hasFbAndInstEmbeds()&&(window.FB&&(window.FB=void 0),appendScriptForEmbeds("https://www.instagram.com/embed.js","instagram-embed-script"))});break;case"instagram":case"embedded_instagram":console.log("Instagram Widget Reload"),appendScriptForEmbeds("https://www.instagram.com/embed.js","instagram-embed-script"),void 0!==window.instgrm&&window.instgrm.Embeds.process();break;case"tiktok":case"embedded_tiktok":console.log("Tiktok Widget Reload"),appendScriptForEmbeds("https://www.tiktok.com/embed.js","tiktok-embed-script");break;case"gleam":case"embedded_gleam":appendScriptForEmbeds("https://widget.gleamjs.io/e.js","gleam-embed-script");break;case"reelgood":var link=scriptDoc.getElementsByTagName("link")[0],head=document.getElementsByTagName("head")[0];head.contains(document.getElementById(script.id))&&(head.removeChild(document.querySelector('[href="'+link.href+'"]')),head.removeChild(document.getElementById(script.id))),head.appendChild(link),head.appendChild(script);break;case"reddit":case"embedded_reddit":appendScriptForEmbeds("https://embed.reddit.com/widgets.js","reddit-embed-script",function(){var e=_this.element.querySelector("iframe"),t=e.getBoundingClientRect().height,n=_this.element.getBoundingClientRect().height;(t<n||0==n)&&(0==n?e.style.minHeight=_this.element.style.minHeight:e.style.height=n+"px")}.bind(this));break;case"justWatch":case"squirrel":case"embedded_squirrel":break;case"valnet_map":var elementId=this.element.id;eval(document.getElementById("script-"+elementId).textContent);break;default:script&&script.src&&appendScriptForEmbeds(script.src,"".concat(value,"-embed-script"))}this.destroy()},offset:function(){return Waypoint.viewportHeight()+300}})};for(var value in window.arrayOfEmbeds[embed])_loop4(value)};for(var embed in window.arrayOfEmbeds)_loop(embed);var _loop2=function(e){new Waypoint({element:document.getElementById(e),handler:function(t){try{console.log("Gallery Lazy Loading",this.element.id),this.element.innerHTML=window.arrayOfGalleries[e].replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/^"|"$/g,"").replace(/&amp;/g,"&").trim(" "),(0,_common_gallery_images__WEBPACK_IMPORTED_MODULE_0__.zY)(this.element),this.destroy()}catch(e){console.error(e)}},offset:function(){return Waypoint.viewportHeight()+300}})};for(var gallery in window.arrayOfGalleries)_loop2(gallery);window.handleArrayOfGalleries=function(){var e,t=_createForOfIteratorHelper(document.querySelectorAll('[id^="article-gallery"]'));try{for(t.s();!(e=t.n()).done;){var n=e.value;0!=n.children.length&&(0,_common_gallery_images__WEBPACK_IMPORTED_MODULE_0__.zY)(n,{isFocused:!1})}}catch(e){t.e(e)}finally{t.f()}},window.initializeArticleLazyList=function(){var e=document.getElementById("article-waypoint");e&&null!=window.lazyListAjaxUrl&&new LazyList({ajaxUrl:window.lazyListAjaxUrl,waypointElement:e,container:document.getElementsByClassName("article-body")[0],totalItems:window.lazyListTotalItems,numItemRequested:window.lazyListNumItemRequested,lastHeaderIndex:window.lazyListLastHeaderIndex,isEmakiPreview:window.lazylistIsEmakiPreview}).waypointTrigger();return!1},window.initializeArticleLazyList(),window.handleDirectoryOpenButtons();var navHeaderElements=document.querySelectorAll(".sidenav-header"),_iterator2=_createForOfIteratorHelper(navHeaderElements),_step2;try{var _loop5=function(){var e=_step2.value;function t(e){e.preventDefault();var t=this.getAttribute("data-parent-id"),n=document.getElementById(t);n&&n.classList.remove("is-selected")}e.removeEventListener("click",t),e.addEventListener("click",t)};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop5()}catch(e){_iterator2.e(e)}finally{_iterator2.f()}var navElements=document.querySelectorAll(".sidenav-item"),_iterator3=_createForOfIteratorHelper(navElements),_step3;try{var _loop6=function(){var e=_step3.value;function t(t){e.classList.toggle("is-selected")}e.removeEventListener("click",t),e.addEventListener("click",t)};for(_iterator3.s();!(_step3=_iterator3.n()).done;)_loop6()}catch(e){_iterator3.e(e)}finally{_iterator3.f()}if(null!=window.articleFetchAjaxUrl&&-1==document.cookie.indexOf("unauthenicatedArticleLimitReached=true")){var articleClip=new ArticleFetchClip({ajaxUrl:window.articleFetchAjaxUrl,currentPermalink:window.articleFetchCurrentPermalink,nextPermalink:window.articleFetchNextPermalink,waypointElement:window.articleFetchWaypointElement,excludeIds:window.articleFetchExludeIds,maximum:window.articleFetchMaximum});articleClip.waypointTrigger()}function handleDisqus(e){var t=e.target;"SPAN"==t.nodeName&&(t=t.parentNode);var n=t.getAttribute("data-disqus-container"),i=t.getAttribute("data-disqus-identifier"),o=t.getAttribute("data-disqus-page-url"),a=t.getAttribute("data-disqus-page-title");if(window.disqus_container_id=n,console.log(i+" "+o+" "+a),disqus_config=function(){this.page.identifier=i,this.page.url=o},"undefined"==typeof DISQUS){console.log("here unload");var r=document,l=r.createElement("script");l.async=!0,l.type="text/javascript",l.src="https://"+window.disqusForumShortname+".disqus.com/embed.js",l.setAttribute("data-timestamp",+new Date),(r.head||r.body).appendChild(l)}"undefined"!=typeof DISQUS&&DISQUS.reset({reload:!0,config:disqus_config})}if(null!=window.disqusForumShortname&&(window.loadDisqus=function(){var e=document.getElementById("dsq-count-scr");if(e){e.remove();var t=document,n=t.createElement("script");n.src="//"+window.disqusForumShortname+".disqus.com/count.js",n.setAttribute("id","dsq-count-scr"),(t.head||t.body).appendChild(n)}var i,o=_createForOfIteratorHelper(document.getElementsByClassName("disqus-load-btn"));try{for(o.s();!(i=o.n()).done;){var a=i.value;a.removeEventListener("click",handleDisqus),a.addEventListener("click",handleDisqus)}}catch(e){o.e(e)}finally{o.f()}},window.loadDisqus()),1==window.STN_VIDEO_ENABLED)var waypoint=new Waypoint({element:document.getElementById("stn_video_player"),handler:function(e){if("down"==e&&0==window.STN_VIDEO_INJECTED){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src","//embed.sendtonews.com/player2/embedcode.php?fk=u4hf7yFG&cid=13551"),t.setAttribute("data-type","s2nScript"),document.body.appendChild(t),this.element.innerHTML="\n                    <div class='s2nPlayer-u4hf7yFG' data-type='full'></div>\n                    ",window.STN_VIDEO_INJECTED=!0,console.log("STN_VIDEO_INJECTED")}},offset:window.STN_OFFSET});function handleOpenweb(e){var t=e.currentTarget,n=document,i=n.createElement("script");n.getElementById(t.dataset.openwebContainer).setAttribute("data-spotim-module","conversation"),i.setAttribute("src","https://launcher.spot.im/spot/"+window.openwebId),i.setAttribute("data-spotim-module","spotim-launcher"),i.setAttribute("data-post-url",t.dataset.postUrl),i.setAttribute("data-article-tags",t.dataset.articleTags),i.setAttribute("data-post-id",t.dataset.postId),i.setAttribute("data-spotim-autorun","false"),console.log("handleOpenweb",t.dataset.postId,t.dataset.postUrl,t.dataset.articleTags),(n.head||n.body).appendChild(i)}null!=window.openwebId&&(window.loadOpenweb=function(){var e,t=_createForOfIteratorHelper(document.getElementsByClassName("openweb-load-btn"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.removeEventListener("click",handleOpenweb),n.addEventListener("click",handleOpenweb,{passive:!0})}}catch(e){t.e(e)}finally{t.f()}},window.loadOpenweb());var reloadScript=function(e,t){var n=document.createElement("script");return n.src=e,n.async=!0,t.parentNode.insertBefore(n,t)},expandDiv=document.getElementById("w-article-author-bio-expand"),expandButton=document.getElementById("article-author-bio-expand-btn"),expandButtonWrapper=document.getElementById("article-author-bio-expand"),authorsBioDisplayHandler=function(){for(var e=document.getElementsByClassName("w-article-author-bio"),t=0;t<e.length;t++)e[t].classList.contains("hide")&&e[t].classList.remove("hide");expandDiv.classList.add("is-expanded"),expandButtonWrapper.classList.add("hide")};null!=expandButton&&expandButton.addEventListener("click",authorsBioDisplayHandler,!1),window.clickableYTElement=function(){var e=document.getElementsByClassName("clickable-feature-image-yt-embed");if(e)for(var t=function(t){var n=e[t];e[t]&&n.addEventListener("click",function(e){n.innerHTML=window.youtubeEmbedCodes[t],n.classList.add("w-rich"),n.classList.add("w-youtube"),n.classList.remove("icon"),n.classList.remove("i-youtube")})},n=0;n<e.length;n++)t(n);return!1},window.clickableYTElement();var reviewItemGalleryThumbnails=document.getElementsByClassName("review-item-gallery-thumbnail"),imgAdded=[];if(reviewItemGalleryThumbnails&&reviewItemGalleryThumbnails.length>0)for(var _i4=0;_i4<reviewItemGalleryThumbnails.length;_i4++)reviewItemGalleryThumbnails[_i4].addEventListener("click",function(){for(var e=this.getAttribute("data-image-class"),t=document.getElementsByClassName(e),n=0;n<t.length;n++)t[n].style.display="none";for(var i=this.getAttribute("data-thumb-image-class"),o=document.getElementsByClassName(i),a=Array.prototype.slice.call(o).indexOf(this),r=0;r<o.length;r++)o[r].classList.remove("active-thumb");this.classList.add("active-thumb");var l=this.getAttribute("data-target"),s=document.getElementById(l);if(s&&a>0){var d=this.getAttribute("data-img-var"),c=window.reviewItemsImgs[d].replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/^"|"$/g,"").trim(" "),u=s.firstElementChild.innerHTML;console.log(u),null==imgAdded[l]&&(s.firstElementChild.innerHTML=c+s.firstElementChild.innerHTML,imgAdded[l]=!0)}s.style.display="block"});function singleImageExpand(e,t,n,i){var o=document.createElement("div");o.classList.add("swiper-slide","active-slide");var a=document.createElement("div");a.classList.add("body-img","responsive-img");var r=document.createElement("figure"),l=document.createElement("figcaption"),s=document.createElement("img");if(s.setAttribute("src",t),void 0!==n&&(l.innerHTML=JSON.parse(n)),r.appendChild(s),r.appendChild(l),a.appendChild(r),o.appendChild(a),void 0!==i){var d=document.createElement("figcaption");d.classList.add("swiper-img-description"),d.innerHTML=JSON.parse(i),o.appendChild(d)}e&&(e.innerHTML="",e.appendChild(o))}function getParentDisplayCard(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display-card",n=e;!n.classList.contains(t);)n=n.parentElement;return n}function expandCustomBlock(e){this.parentElement.classList.toggle("is-expand");var t=this.children[0];return"read more"==t.innerText.toLowerCase()?t.innerText="read less":(t.innerText.toLowerCase(),t.innerText="read more"),!1}window.makeSingleImageClickableOnLazyLoadedList=function(){var e,t=_createForOfIteratorHelper(document.querySelectorAll(".image-expandable"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.style.cursor="pointer";n.querySelector("img");n.addEventListener("click",function(e){var t=document.getElementById(this.getAttribute("data-modal-id"));if(singleImageExpand(document.getElementById(this.getAttribute("data-modal-container-id")),this.getAttribute("data-img-url"),this.getAttribute("data-img-caption"),this.getAttribute("data-img-desc")),t){if(t.getElementsByClassName("lightbox__exit-btn"))t.getElementsByClassName("lightbox__exit-btn")[0].addEventListener("click",function(e){t.style.display="none",document.body.style.overflow="initial",document.body.classList.remove("gallery-modal-opened")});t.style.display="block",document.body.style.overflow="hidden",document.body.classList.add("gallery-modal-opened")}})}}catch(e){t.e(e)}finally{t.f()}return!1},window.makeSingleImageClickableOnLazyLoadedList(),window.expandVideoDescription=function(){var e=document.querySelector(".w-show-video-more");e&&e.addEventListener("click",function(){var e=document.querySelector(".content-block-regular.expandable-video");e&&e.classList.remove("expandable-video")})},window.expandVideoDescription(),window.expandDisplayCardSpecsOnClick=function(){for(var e=document.getElementsByClassName("show-more"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){for(var t=e.target,n=t.previousElementSibling.children,i=0;i<n.length;i++){n[i].classList.remove("is-hidden")}t.classList.add("is-hidden")})},window.expandDisplayCardSpecsOnClick(),window.expandDisplayCardSpecsOnClickNew=function(){for(var e=document.getElementsByClassName("show-more-new"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){var t=e.target;getParentDisplayCard(t).classList.remove("expandable"),t.classList.add("is-hidden")})},window.expandDisplayCardSpecsOnClickNew(),(0,_common_gallery_images__WEBPACK_IMPORTED_MODULE_0__.GN)({includeCounters:!0}),(0,_common_gallery_images__WEBPACK_IMPORTED_MODULE_0__.Em)(),(0,_common_gallery_images__WEBPACK_IMPORTED_MODULE_0__.qy)({includeCounters:!0}),window.assignDisplayCardHyperlinkHoverHandlers=function(){var e="display-card-hyperlink-show-vignette",t="display-card-hyperlink-no-vignette",n="vignette-show",i=!1,o={};function a(e,i){if(null==o[e]){var a=new XMLHttpRequest;a.open("GET","/fetch/tag/".concat(e,"/vignette"),!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var o=JSON.parse(this.response);if(o.success){if(o.vignette&&null!=o.vignette.id){var a=i.querySelector("a"),l=function(e,t,i,o){var a=null,l=document.querySelector("style#customUniqueCSS");null===l&&((l=document.createElement("style")).id="customUniqueCSS",document.head.appendChild(l));l.innerHTML.includes(t.css)||(l.innerHTML+=t.css);a="mobile"==window.device||window.isIOS?function(e,t,n){var i=null;if(null===document.querySelector("#tag-".concat(e,"-vignette"))){(i=document.createElement("div")).id="tag-".concat(e,"-vignette"),i.setAttribute("data-id",e),i.innerHTML=t.html,i.style.display="none",i.classList.add("tag-vignette");var o=document.createElement("div");o.classList.add("tag-vignette-close"),o.classList.add("icon"),o.classList.add("btn-close"),o.classList.add("i-close"),o.addEventListener("click",function(e){r(e.target.parentElement)}),i.appendChild(o),n.appendChild(i)}return i}(e,t,i):function(e,t,i,o){var a=null;null===document.querySelector("#tag-".concat(e,"-vignette"))&&((a=document.createElement("a")).id="tag-".concat(e,"-vignette"),a.setAttribute("data-id",e),a.innerHTML=t.html,a.style.display="none",a.classList.add("tag-vignette"),a.addEventListener("mouseenter",function(e){!function(e){e.classList.add(n)}(e.target)}),a.addEventListener("mouseleave",function(e){!function(e){e.classList.remove(n),d(e)}(e.target)}),null!=o&&(a.href=o.href,a.target="_blank",null!==o.target&&void 0!==o.target&&(a.target=o.target)),i.appendChild(a));return a}(e,t,i,o);return a}(e,o.vignette,document.body,a);v(i,l)}else i.classList.add(t);i.classList.remove("is-loading")}}},a.send(),o[e]=a}}function r(t){if(null!==t){var i=document.querySelector("span.".concat(e,'[data-id="').concat(t.getAttribute("data-id"),'"]'));i&&i.classList.remove(e),t.classList.remove(n),l(t)}}function l(e){null===e||e.classList.contains(n)||(e.style.display="none")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==window.hyperlinkVignetteTimeout&&void 0!==window.hyperlinkVignetteTimeout&&clearTimeout(window.hyperlinkVignetteTimeout),document.querySelectorAll(".tag-vignette").forEach(function(t){t!==e&&r(t)})}function d(e){window.hyperlinkVignetteTimeout=setTimeout(function(){l(e)},100)}function c(e){i=!0}function u(e){i||h(e),i=!1}function m(t,i){if(t.classList.contains(e)&&null!==i){i.classList.add(n),i.style.display="block";var o=t.getBoundingClientRect(),a=i.getBoundingClientRect(),r=document.querySelector("main.w-content").getBoundingClientRect(),l=window.scrollY+o.top-a.height-5,s=0;a.width<window.innerWidth&&(s=(window.innerWidth-a.width)/2);var d=r.top+5+window.scrollY;l<d&&(l=d),i.style.left="".concat(s,"px"),i.style.top="".concat(l,"px"),l<window.scrollY&&i.scrollIntoView(!0),window.isIOS?(document.addEventListener("touchmove",c,!0),document.addEventListener("touchend",u,!0)):document.addEventListener("click",h,!0)}}function v(t,i){"mobile"==window.device||window.isIOS?m(t,i):function(t,i){if(t.classList.contains(e)&&null!==i){i.classList.add(n),i.style.display="block";var o=t.getBoundingClientRect(),a=i.getBoundingClientRect(),r=0,l=0,s=o.left+o.width+window.scrollX+5,d=o.left-(a.width+window.scrollX+5);r=s+a.width>window.innerWidth&&d>=0?o.left-(a.width+window.scrollX+5):s;var c=o.top+window.scrollY-a.height/2+o.height/2,u=window.scrollY,m=window.innerHeight+window.scrollY-a.height;l=c<u?u:c>m?m:c,i.style.left=r+"px",i.style.top=l+"px"}}(t,i)}function p(t){t.classList.remove(e),t.classList.remove("is-loading");var i=t.getAttribute("data-id"),o=document.querySelector("#tag-".concat(i,"-vignette"));null!=o&&(o.classList.remove(n),function(t){if(!t.classList.contains(e)){var n=t.getAttribute("data-id");d(document.querySelector("#tag-".concat(n,"-vignette")))}}(t))}function h(t){var i=document.querySelector(".".concat(n));if(i){var o=i.getAttribute("data-id"),a=document.querySelector("span.".concat(e,'[data-id="').concat(o,'"]'));i.contains(t.target)||!a||a.contains(t.target)||(s(),window.removeEventListener("click",h))}}document.querySelectorAll(".display-card-hyperlink").forEach(function(i){"mobile"==window.device||window.isIOS?i.addEventListener("click",function(o){i.classList.contains(e)||i.classList.contains(t)||(!function(t){if(!t.classList.contains(e)){document.querySelectorAll(".".concat(e)).forEach(function(t){t.classList.remove(e)}),document.querySelectorAll(".".concat(n)).forEach(function(e){e.classList.remove(n)}),t.classList.add(e);var i=t.getAttribute("data-id"),o=document.querySelector("#tag-".concat(i,"-vignette"));s(o),null===o?(t.classList.add("is-loading"),a(i,t)):m(t,o)}}(i),o.preventDefault())}):(i.addEventListener("mouseenter",function(){!function(n){if(!n.classList.contains(t)){n.classList.add(e);var i=n.getAttribute("data-id"),o=document.querySelector("#tag-".concat(i,"-vignette"));s(o),null===o?(n.classList.add("is-loading"),setTimeout(function(){n.classList.contains(e)&&a(i,n)},200)):v(n,o)}}(i)}),i.addEventListener("mouseleave",function(){p(i)}))})},window.showVignettesOnHover&&!window.isSlowConnection&&window.assignDisplayCardHyperlinkHoverHandlers(),window.onClickToggleExpandanleBlocks=function(){var e=document.getElementsByClassName("emaki-custom expandable"),t=document.getElementsByClassName("emaki-custom key-points");return e&&Array.prototype.forEach.call(e,function(e){var t=e.getElementsByClassName("custom_block-buttom-area")[0];t&&(t.removeEventListener("click",expandCustomBlock),t.addEventListener("click",expandCustomBlock))}),t&&Array.prototype.forEach.call(t,function(e){var t=e.getElementsByClassName("custom_block-buttom-area")[0];t&&t.addEventListener("click",function(){e.classList.add("is-expand"),this.innerText=""})}),!1},window.onClickToggleExpandanleBlocks();var quickLinks=document.getElementsByClassName("collapsible-quick-link");function expandQuickLinksBlock(e){this.classList.contains("hide-button")||this.classList.add("hide-button");var t=this.parentNode.parentNode.nextElementSibling;t&&t.classList.contains("display-card-quick-links-extra")&&!t.classList.contains("show-section")&&t.classList.add("show-section")}function copyUrlToClipboard(e){e.preventDefault();var t=e.target.dataset.url;navigator.clipboard.writeText(t);var n=document.getElementById("sharingCopyAlertDiv");n.classList.add("is-copied"),setTimeout(function(){n.classList.remove("is-copied")},3e3)}quickLinks&&Array.prototype.forEach.call(quickLinks,function(e){e.addEventListener("click",function(){e.parentNode.parentNode.classList.toggle("icon-clicked");var t=e.parentNode.parentNode.getElementsByClassName("table-content-sub-level");t[0]&&t[0].classList.toggle("is-collapse")})}),window.onClickToggleExtraQuickLinks=function(){var e=document.getElementsByClassName("quick-links-see-more-btn");return e&&Array.prototype.forEach.call(e,function(e){e&&(e.removeEventListener("click",expandQuickLinksBlock),e.addEventListener("click",expandQuickLinksBlock))}),!1},window.onClickToggleExtraQuickLinks(),window.reloadArticleCopyElements=function(){var e,t=_createForOfIteratorHelper(document.getElementsByClassName("btn-copy-url"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.removeEventListener("click",copyUrlToClipboard),n.addEventListener("click",copyUrlToClipboard)}}catch(e){t.e(e)}finally{t.f()}};var footerElement=document.getElementById("w-footer wrapper");footerElement&&(footerElement.classList.contains("keep-footer")||window.keepFooter||(window.footerElement=footerElement,footerElement.remove()))},window.handleDirectoryOpenButtons=function(){var e=document.querySelectorAll('[data-is-article-directory-list-cta="true"]'),t=document.getElementById("article-directory-sidenav-close"),n=document.getElementById("article-directory-sidenav");if(n){var i=document.getElementById("article-body");i&&i.insertBefore(n,i.children[0])}if(e&&e.length>0&&n){if(n.classList.contains("is-open")){var o,a=_createForOfIteratorHelper(e);try{for(a.s();!(o=a.n()).done;){o.value.classList.add("is-active")}}catch(e){a.e(e)}finally{a.f()}}var r,l=_createForOfIteratorHelper(e);try{var s=function(){var t=r.value;if(t.alreadyAttached)return 1;t.addEventListener("click",function(t){n.classList.toggle("is-open");var i=n.classList.contains("is-open"),o=t.currentTarget.dataset.articlepermalink;if(n){var a,r=_createForOfIteratorHelper(e);try{for(r.s();!(a=r.n()).done;){var l=a.value;i?l.classList.add("is-active"):l.classList.remove("is-active")}}catch(e){r.e(e)}finally{r.f()}if(i){var s,d="sidenav-item-link-"+o,c=_createForOfIteratorHelper(document.getElementsByClassName("sidenav-item-link"));try{for(c.s();!(s=c.n()).done;){var u=s.value;u.classList.remove("is-current"),u.id==d&&u.classList.add("is-current")}}catch(e){c.e(e)}finally{c.f()}}}}),t.alreadyAttached=!0};for(l.s();!(r=l.n()).done;)s()}catch(e){l.e(e)}finally{l.f()}}if(t&&!t.alreadyAttached){t.addEventListener("click",function(t){document.getElementById("article-directory-sidenav").classList.remove("is-open");var n,i=_createForOfIteratorHelper(e);try{for(i.s();!(n=i.n()).done;){n.value.classList.remove("is-active")}}catch(e){i.e(e)}finally{i.f()}}),t.alreadyAttached=!0}},window.editCurrentDirectoryArticle=function(e){var t,n=!1,i="sidenav-item-link-"+e,o=document.getElementsByClassName("sidenav-item-link"),a=null,r=_createForOfIteratorHelper(document.getElementsByClassName("sidenav-item"));try{for(r.s();!(t=r.n()).done;){t.value.classList.remove("is-selected")}}catch(e){r.e(e)}finally{r.f()}var l,s=_createForOfIteratorHelper(o);try{for(s.s();!(l=s.n()).done;){var d=l.value;if(d.classList.remove("is-current"),d.id==i){d.classList.add("is-current"),n=!0;for(a=d.parentElement;a;){var c=a.children;if(a=null,c){var u=c[0];if(u){var m=u.dataset.parentId;if(m){var v=document.getElementById(m);v&&(v.classList.add("is-selected"),a=v.parentElement)}}}}}}}catch(e){s.e(e)}finally{s.f()}if(!n){var p,h=_createForOfIteratorHelper(document.getElementsByClassName("article-directory-list-cta"));try{for(h.s();!(p=h.n()).done;){p.value.classList.remove("is-hidden")}}catch(e){h.e(e)}finally{h.f()}var f=document.getElementById("article-directory-sidenav");f&&f.classList.remove("is-open")}},window.dismissArticleLimit=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.getElementById("article-limit-drawer"),n=document.getElementById("article-hidden-content"),i=document.getElementById("overflow-hide");t&&t.classList.add("is-hidden"),n&&n.classList.remove("article-hidden-content"),i&&i.classList.remove("first-paragraph-blocker"),document.querySelectorAll(".js-hidden-by-overlay").forEach(function(e){e.removeAttribute("style")});var o=document.querySelector('[data-waypoint-overlay="article-waypoint"]');o&&(o.id="article-waypoint",o.removeAttribute("data-waypoint-overlay")),window.initializeArticleLazyList(),e||(gtag("event","article_limit_drawer",{event_action:"dismissed",event_label:window.location.pathname}),window.websiteSentinel&&window.websiteSentinel.sendEvent("article_limit_drawer","dismissed",""))},window.trackUnauthenticatedArticleViews=function(){var e=document.getElementById("article-limit-drawer"),t=document.querySelectorAll(".article-limit-drawer-close"),n=document.querySelector('[data-is-login-article-limiter="true"]'),i=!1;if(n&&!n._articleLimiterAlreadyAttached){n._articleLimiterAlreadyAttached=!0,(0,_common_utils__WEBPACK_IMPORTED_MODULE_2__.tW)(n.getAttribute("data-style-path-url"),function(){n.removeAttribute("hidden")}),"function"==typeof n.showModal&&(n.showModal(),document.body.style.overflow="hidden");for(var o=n.querySelectorAll("[data-is-close-button]"),a=0;a<o.length;a++)o[a]._articleLimiterAlreadyAttached||(o[a].addEventListener("click",function(){n.close()}),o[a]._articleLimiterAlreadyAttached=!0);o.length>0?(n.outsideClickListener=function(e){(e.target.contains(n)||e.target===n)&&n.close()},n.addEventListener("close",function(e){document.removeEventListener("click",n.outsideClickListener),document.body.style.overflow="",window.dismissArticleLimit()}),document.addEventListener("click",n.outsideClickListener)):(n.interceptEscapeListener=function(e){"Escape"===e.key&&n.open&&(e.stopPropagation(),e.preventDefault())},window.addEventListener("keydown",n.interceptEscapeListener));var r=new ValnetLogin({mode:"articlelimiter",idParent:"valnet-login-container-drawer",className:"banner",triggeredFrom:"article",gaEventCategory:"article_limit_drawer",showCloseButton:!0,onFinishedSignOnProcess:function(){n.classList.add("is-hidden")},onClosePopupCallback:function(){document.body.style.overflow="",window.dismissArticleLimit(!0)}});r.showLoginForm(r),i=!0}if(e){var l=new ValnetLogin({mode:"drawer",idParent:"article-limit-drawer-login",className:"banner",triggeredFrom:"article",gaEventCategory:"article_limit_drawer",showCloseButton:!1});l.showLoginForm(l),l.resetStickyAdsOnDrawerVisible(),i=!0,t&&t.length>0&&t.forEach(function(e){e.classList.remove("is-hidden")});var s=document.getElementsByClassName("article_heading"),d=document.getElementsByClassName("article-body");if(d&&d.length>0)d[d.length-1].children[0].classList.add("is-fade-in");s&&s.length>1?window.addEventListener("scroll",function(){var e=document.getElementsByClassName("article_heading"),t=e[e.length-1].getBoundingClientRect().top,n=document.getElementById("article-limit-drawer");if(n){t<=100&&(n.classList.add("is-visible"),console.log("Reached the target element!"))}}):e.classList.add("is-visible")}if(i){var c="loadedPage2+",u="articlesLimitDepth",m=getCookie(u);if(m)try{JSON.parse(decodeURIComponent(m)).came_from_homepage&&(c="loadedPage2+_homepage")}catch(e){console.warn('[Event Tracker] Error parsing "'.concat(u,'":'),e)}else console.warn('[Event Tracker] "'.concat(u,'" Not found in cookies'));var v=window.isInternalTraffic&&c?c:"loadedLandingPage",p=function(e,t){console.log("%c[Event Tracker][".concat(e,"]%c ").concat(t),"color: green; font-weight: bold;","color: black; font-weight: normal;")};"function"==typeof gtag?(p("GA",v),gtag("event","article_limit_drawer",{event_action:v,event_label:window.location.pathname})):console.warn("[Event Tracker] gtag is not defined"),void 0!==window.websiteSentinel&&"function"==typeof window.websiteSentinel.sendEvent?(p("Sentinel",v),window.websiteSentinel.sendEvent("article_limit_drawer",v,"")):console.warn("[Event Tracker] Sentinel is not defined"),getCookie("isCooldownSet")&&deleteCookie("isCooldownSet")}return!1},window.trackUnauthenticatedArticleViews(),window.loadVerticalShortVideoManager=function(){window.currentVideoId&&new _common_verticalShortVideoManager_js__WEBPACK_IMPORTED_MODULE_6__.R({currentVideoId:window.currentVideoId,hasVideoHomepage:window.hasVideoHomepage,zoneName:window.currentZoneName}).init()},window.adsNinja=window.adsNinja||{},window.adsNinja.queue=window.adsNinja.queue||[],window.adsNinja.queue.push(function(){window.adsNinja.__waitForReadyEvent(function(){window.loadVerticalShortVideoManager()})}),window.infiniteScrollOnPlaylistArticles=function(){var e=document.querySelector(".playlist-preview-list");if(e){var t=e.closest(".w-display-card"),n=t.dataset.endpoint,i=0;e.onscroll=function(){var o=e.scrollTop;if(o-i>10&&"false"===t.dataset.isLoading&&"true"===t.dataset.keepLoading){var a=parseInt(t.dataset.pageSize),r=parseInt(t.dataset.page)+1;t.dataset.isLoading=!0,fetch("".concat(n,"?page=").concat(r,"&pageSize=").concat(a)).then(function(e){return e.json()}).then(function(n){e.insertAdjacentHTML("beforeend",n.html),t.dataset.page=r,i=o,t.dataset.isLoading=!1,r>=n.pageCount&&(t.dataset.keepLoading="false")}).catch(function(e){return console.error(e)})}}}},"complete"!==document.readyState?document.addEventListener("readystatechange",function(e){"complete"===e.target.readyState&&(window.valnetLoadFooterArticle(),window.infiniteScrollOnPlaylistArticles())}):(window.valnetLoadFooterArticle(),window.infiniteScrollOnPlaylistArticles());var closeLimitBanners=document.querySelectorAll('[id^="article-limit-drawer-close-"]');closeLimitBanners.length>0&&closeLimitBanners.forEach(function(e){e.addEventListener("click",function(e){window.dismissArticleLimit()})}),window.attachPolyHeader=function(){var e=document.querySelectorAll('[data-is-poly-exclusive-header="true"]');e.length>0&&e.forEach(function(e){e._headerAnimAlreadyAttached||(e._headerAnimAlreadyAttached=!0,function(e){requestAnimationFrame(function t(){var n=e.getBoundingClientRect(),i=window.innerHeight,o=n.height-window.innerHeight,a=Math.max(.1*o,100);Math.ceil(n.bottom-a)<=i?e.classList.add("reached-end"):e.classList.remove("reached-end"),requestAnimationFrame(t)})}(e))})},attachPolyHeader()})(),(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var i=function(){"use strict";return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log("article options",t),this.url=t.ajaxUrl,this.previousPermalink=t.previousPermalink||void 0,this.previousTitle=t.previousTitle||void 0,this.currentPermalink=t.currentPermalink,this.nextPermalink=t.nextPermalink,this.waypointElement=t.waypointElement,this.excludeIds=t.excludeIds,this.maximumClips=t.maximum,this.index=1},n=[{key:"getAjaxRequest",value:function(){var e=new XMLHttpRequest;return e.open("POST",this.url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e}},{key:"updateLocationUrl",value:function(e){history.replaceState("","",e)}},{key:"reloadEmbedScripts",value:function(e){var t=e.querySelector(".w-facebook");if(t||(t=e.querySelector(".w-embedded_facebook")),t){var n=t.id,i=document.getElementById(n),o=t.dataset.embedInfo,a=JSON.parse(o);console.log("Facebook Widget Reload",a.script.src),this.reloadScript(a.script.src,i),"undefined"!=typeof FB&&FB.XFBML.parse(i)}var r=e.querySelector(".w-instagram");if(r||(r=e.querySelector(".w-embedded_instagram")),r){var l=r.id,s=document.getElementById(l),d=r.dataset.embedInfo,c=JSON.parse(d);console.log("Instagram Widget Reload",c.script.src),this.reloadScript(c.script.src,s),"undefined"!=typeof instgrm&&instgrm.Embeds.process()}var u=e.querySelector(".w-emaki_video");if(u){u.id;var m=document.getElementById(instagramkId),v=u.dataset.embedInfo,p=JSON.parse(v);if(window.adsNinja&&window.adsNinja.queue.push(function(){window.adsNinja.configureBiddingManagerVideoPlayers()}),p.script.src){var h=document.createElement("script");h.src=p.script.src,p.script.textContent&&(h.textContent=p.script.textContent),console.log("Gleam Widget Reload",p.script.src),m.appendChild(h)}}var f=e.querySelector(".w-tiktok");if(f||(f=e.querySelector(".w-embedded_tiktok")),f){var y=f.id,g=document.getElementById(y),w=f.dataset.embedInfo,b=JSON.parse(w);console.log("Tiktok Widget Reload",b.script.src),this.reloadScript(b.script.src,g)}var E=e.querySelector(".w-gleam");if(E||(E=e.querySelector(".w-embedded_gleam")),E){E.id;var k=document.getElementById(tiktokkId),L=E.dataset.embedInfo,S=JSON.parse(L);console.log("Gleam Widget Reload",S.script.src),this.reloadScript(S.script.src,k)}var _=e.querySelector(".w-reelgood");if(_){_.id;var C=_.dataset.embedInfo,I=JSON.parse(C),A=null;I&&I.script&&I.script.id&&(A=I.script.id);var x=null;I&&I.link&&I.link.href&&(x=I.link.href);var T=document.getElementsByTagName("head")[0];if(T.contains(document.getElementById(A))&&(x&&T.removeChild(document.querySelector('[href="'+x+'"]')),T.removeChild(document.getElementById(A))),x){var B=document.createElement("link");B.href=x,T.appendChild(B)}if(scripId){var P=document.createElement("script");P.src=url,P.async=!0,T.appendChild(P)}}var q=e.querySelector(".w-reddit");if(q||(q=e.querySelector(".w-embedded_reddit")),q){var O=q.id,N=document.getElementById(O),M=q.dataset.embedInfo,j=JSON.parse(M);console.log("Reddit Widget Reload",j.script.src),this.reloadScript(j.script.src,N)}var V=e.querySelector(".w-twitter");if(V||(V=e.querySelector(".w-embedded_twitter")),V){var D=V.id,H=document.getElementById(D),F=V.dataset.embedInfo,R=JSON.parse(F);console.log("Twitter Widget Reload",R.script.src),this.reloadScript(R.script.src,H),"undefined"!=typeof twttr&&twttr.widgets.load(H)}var U=e.querySelector(".w-justWatch");if(U){var W=U.id,z=document.getElementById(W),J=U.dataset.embedInfo,G=JSON.parse(J);"undefined"!=typeof JustWatch?JustWatch.reloadWidgets():this.reloadScript(G.script.src,z)}}},{key:"reloadScript",value:function(e,t){var n=document.createElement("script");return n.src=e,n.async=!0,t.parentNode.insertBefore(n,t.nextSibling)}},{key:"waypointHandler",value:function(){var e=document.getElementById("waypointLoader");e&&(e.style.display="",e.style.visibility="visible");var t=this;t.previousPermalink=document.location.pathname;var n=document.getElementsByClassName("heading_title")[t.index-1];t.previousTitle=n.innerText;var i=this.getAjaxRequest();if(i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){console.log("%cINFINITE SCROLL ARTICLE AJAX","color: yellow; background: green; padding: 4px; border-radius: 3px;");var n={};try{n=""!==i.response?JSON.parse(i.response):[]}catch(e){n.html=""}if(""!==n.html){var o=(new DOMParser).parseFromString(n.html,"text/html"),a=o.querySelector(".youtube-repalcing-image");a&&window.youtubeEmbedCodes.push('<iframe src="'+a.src+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'),t.waypointElement.insertAdjacentHTML("afterend",n.html),window.gaEventsSent=!1,t.index<=t.maximumClips&&(console.log("returnInFo",n),t.index=n.index+1,t.url=n.nextUrl,t.waypointElement=document.getElementsByClassName("w-content")[n.index],t.currentPermalink=t.nextPermalink,t.nextPermalink=n.nextPermalink,t.excludeIds=n.excludeIds,window.adsNinja&&n.adData&&window.adsNinja.runForExtendedSection(n.adData),window.makeSingleImageClickableOnLazyLoadedList(),window.makeGalleryImageClickableOnLazyLoadedList(),window.makeTagVideoClickableOnLazyLoadedList(),window.expandDisplayCardFooter(),window.onClickToggleExpandanleBlocks(),window.clickableYTElement(),window.onClickToggleExtraQuickLinks(),window.handleDirectoryOpenButtons(),window.trackUnauthenticatedArticleViews(),window.propegateMavx(),window.handleArrayOfGalleries(),window.expandDisplayCardSpecsOnClick(),window.isInternalTraffic=!0,window.disqusEnable&&(console.log("disqus enable"),window.loadDisqus()),window.openwebId&&window.loadOpenweb(),-1==document.cookie.indexOf("unauthenicatedArticleLimitReached=true")&&t.waypointTrigger(n),window.reloadArticleCopyElements(),t.reloadEmbedScripts(o)),n.newsletterPopupVisibility&&window.showNewsletterPopup()}Waypoint.refreshAll(),e&&(e.style.visibility="hidden")}},t.index<=this.maximumClips){console.log("call",t.index,this.maximumClips);var o="data="+encodeURIComponent(JSON.stringify({max:this.maximumClips,index:this.index,excludeIds:this.excludeIds}));if(window.adsNinja&&"function"==typeof window.adsNinja.getExtendedSectionAdRequestData){var a=window.adsNinja.getExtendedSectionAdRequestData();if(a){var r="&adData=";o+=r+=encodeURIComponent(JSON.stringify(a))}}i.send(o)}else{e&&(e.style.display="none");var l=window.footerElement;if(l){var s=document.getElementsByClassName("w-content");s&&s[s.length-1].after(l)}}}},{key:"waypointTrigger",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=t.currentPermalink,i=t.nextPermalink,o=t.index;window.waypointAjax=new Waypoint({element:this.waypointElement,handler:function(e){"down"==e&&(t.waypointHandler(),this.destroy())},offset:function(){return this.context.innerHeight()-this.adapter.outerHeight()+800}}),new Waypoint({element:this.waypointElement,handler:function(e){"down"==e&&o<=t.maximumClips&&(t.updateLocationUrl(i),window.editCurrentDirectoryArticle(i),null==window.sentinelSentIndex||window.sentinelSentIndex==o)&&(window.sentinelSentIndex=o+1,new valnet_sentinel("pageView",document.getElementsByClassName("w-article")[o]),window.an_sentinel&&window.an_sentinel.__sentinel.hasOwnProperty("infiniteScrollEvent")&&null!==window.an_sentinel.__sentinel.infiniteScrollEvent&&window.dispatchEvent(new Event(window.an_sentinel.__sentinel.infiniteScrollEvent))),"up"==e&&(t.updateLocationUrl(n),window.editCurrentDirectoryArticle(n))},offset:function(){return this.context.innerHeight()-this.adapter.outerHeight()-400}}),new Waypoint({element:this.waypointElement,handler:function(n){"down"==n&&(e&&!window.gaEventsSent&&(window.gaEventsSent=!0,t.sendGAEvents(e)),this.destroy())},offset:400}),new Waypoint({element:this.waypointElement,handler:function(n){"down"==n&&(t.sendGAEventToTrackEngagement(e),this.destroy())},offset:-1600})}},{key:"sendGAEvents",value:function(e){}},{key:"sendGAEventToTrackEngagement",value:function(e){if(e){var t=e.gaCustomDimensions,n=document.location.origin+this.currentPermalink,i={eventCategory:"infiniteScroll",eventAction:"article "+this.index+" engagement",eventLabel:this.currentPermalink,location:n},o={event_action:"article #"+this.index+" engagement",event_label:this.currentPermalink,page_location:n};t&&(i.title=t.title,o.page_title=t.title),gtag("event","infinite_scroll",o)}}},{key:"sendUserLoggedInGAEvents",value:function(){}}],n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();window.ArticleFetchClip=i})()})();