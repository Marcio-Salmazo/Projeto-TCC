(()=>{"use strict";var e={925(e,t,i){i.d(t,{A:()=>r});var n=i(3768);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}const r=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ajaxRequest=!1,this.handleAccountVerificationClick=this.handleAccountVerificationClick.bind(this),this.handleCloseButtonClick=this.handleCloseButtonClick.bind(this)},t=[{key:"hideSuccessVerificationMsg",value:function(){var e=document.getElementById("account-verification-popup-success-msg-new");e&&e.classList.add("is-hidden")}},{key:"hideErrorVerificationMsg",value:function(){var e=document.getElementById("account-verification-popup-error-msg-new");e&&e.classList.add("is-hidden")}},{key:"displaySuccessVerificationMsg",value:function(e){var t=document.getElementById("account-verification-popup-success-msg-new"),i=document.getElementById("accountVerificationPopupCloseButton");e&&(t.firstChild.innerHTML=e),t.classList.remove("is-hidden"),setTimeout(function(){t.classList.add("is-hidden"),i&&i.click()},4e3)}},{key:"displayErrorVerificationMsg",value:function(e){var t=document.getElementById("account-verification-popup-error-msg-new"),i=document.getElementById("accountVerificationPopupCloseButton");e&&(t.firstChild.innerHTML=e),t.classList.remove("is-hidden"),setTimeout(function(){t.classList.add("is-hidden"),i&&i.click()},4e3)}},{key:"handleVerificationResponse",value:function(e){this.hideSuccessVerificationMsg(),this.hideErrorVerificationMsg();var t=e.status,i=e.message;"success"===t?this.displaySuccessVerificationMsg(i):this.displayErrorVerificationMsg(i),this.ajaxRequest=!1}},{key:"handleVerifyAccount",value:function(){var e=this;window.isUserLoggedIn&&(this.ajaxRequest&&this.ajaxRequest.abort(),this.ajaxRequest=new XMLHttpRequest,this.ajaxRequest.open("GET","/verify-email/",!0),this.ajaxRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.ajaxRequest.onreadystatechange=function(){4===e.ajaxRequest.readyState&&e.ajaxRequest.response&&e.handleVerificationResponse(JSON.parse(e.ajaxRequest.response))},this.ajaxRequest.send())}},{key:"injectAccountVerificationPopup",value:function(){var e=document.getElementById("account-verification-popup-container");if(!window.accountVerificationContainerInjected&&!e){var t=window.accountVerificationPopupHtml.trim("&quot;").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&amp;/g,"&").replace(/(^"|"$)/g,"").replaceAll("loginForm","loginPopup");document.body.insertAdjacentHTML("beforeend",t),window.accountVerificationContainerInjected=!0}}},{key:"showAccountVerificationPopup",value:function(){this.injectAccountVerificationPopup();var e=document.getElementById("account-verification-popup-container"),t=document.getElementById("account-verification-popup-message");if(t&&(t.innerHTML="Please verify your email address to unlock additional features on your account."),e){var i=e.getAttribute("data-style-path-url"),a="true"===e.getAttribute("data-style-injected");i&&!a?(0,n.tW)(i,function(){e.setAttribute("data-style-injected","true"),e.classList.add("is-visible")}):e.classList.add("is-visible")}this.addAccountVerificationPopupEventListeners()}},{key:"addAccountVerificationPopupEventListeners",value:function(){var e=document.getElementById("accountVerificationPopupCloseButton"),t=document.getElementById("accountVerificationPopupSubmitButton");e&&!e.isAlreadyAttached&&(e.isAlreadyAttached=!0,e.removeEventListener("click",this.handleCloseButtonClick),e.addEventListener("click",this.handleCloseButtonClick)),t&&!t.isAlreadyAttached&&(t.isAlreadyAttached=!0,t.removeEventListener("click",this.handleAccountVerificationClick),t.addEventListener("click",this.handleAccountVerificationClick))}},{key:"handleAccountVerificationClick",value:function(e){return e.preventDefault(),e.stopPropagation(),this.handleVerifyAccount(),!1}},{key:"handleCloseButtonClick",value:function(e){return e.preventDefault(),e.stopPropagation(),document.getElementById("account-verification-popup-container").classList.remove("is-visible"),this.hideSuccessVerificationMsg(),this.hideErrorVerificationMsg(),!1}}],t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i}()},3768(e,t,i){function n(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach(function(i){e=e.replace(new RegExp("{{".concat(i,"}}"),"g"),t[i])}),e}function s(){document.body.style.overflow="hidden",document.body.classList.add("scroll-lock")}function o(){document.body.style.overflow="",document.body.classList.remove("scroll-lock")}function r(e){var t=e.replace(/^\/+|\/+$/g,"");return""===t?"":"/".concat(t,"/")}function l(e){try{return structuredClone(e)}catch(t){return JSON.parse(JSON.stringify(e))}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};d([e]).then(function(){t()})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.allSettled(e.map(function(e){return new Promise(function(t){var i=function(){return t()};if(!e)return i();var n=document.head.querySelector('link[href="'.concat(e,'"]'));if(n)return"complete"===n.readyState||"loaded"===n.readyState?i():(n.addEventListener("load",i),void n.addEventListener("error",i));var a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("href",e),a.addEventListener("load",i),a.addEventListener("error",i),document.head.appendChild(a)})}))}i.d(t,{F$:()=>r,M0:()=>a,MZ:()=>n,TM:()=>l,hG:()=>o,tW:()=>c,wu:()=>s})}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,i),s.exports}function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=document.querySelector('script[src="'.concat(e,'"]'));if(n)return t.apply(n),n;var a=document.createElement("script");if(a.onload=t,a.src=e,i.defer&&(a.defer=!0),document.body)document.body.appendChild(a);else var s=setInterval(function(){a.parentElement&&clearInterval(s),document.body&&(clearInterval(s),document.body.appendChild(a))},1);return a}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init(t)},t=[{key:"getDefaultOptions",value:function(){return{title:"Confirm",message:"Are you sure?",block:null,yes:"Yes",no:"No",layout:"default",onConfirm:function(){},onDismiss:function(){}}}},{key:"init",value:function(){this.initElement()}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setOptions(e),this.setElementContent(this.renderLayout(this.options.layout)),this.dialog.showModal(),this.updateScrollableToEndState()}},{key:"attachEvents",value:function(){var e=this;this.dialog.addEventListener("click",function(t){var i=t.target.closest("a[data-bypass-prevent-default]");i&&e.dialog.contains(i)||t.preventDefault(),t.target.hasAttribute("data-is-confirmation-dialog-confirm")?(e.options.onConfirm(),e.dismiss()):t.target.hasAttribute("data-is-confirmation-dialog-dismiss")&&(e.options.onDismiss(),e.dismiss())})}},{key:"initElement",value:function(){this.dialog=document.querySelector("[data-is-confirmation-dialog]"),this.dialog||(this.dialog=document.createElement("dialog"),this.dialog.classList.add("is-confirmation-dialog"),this.dialog.classList.add("w-thread-suggestion-subform"),this.dialog.setAttribute("data-is-confirmation-dialog",""),document.body.appendChild(this.dialog)),this.attachEvents()}},{key:"updateScrollableToEndState",value:function(){var e=this;if(this.dialog.open){var t=window.requestAnimationFrame||function(e){return setTimeout(e,16)},i=this.dialog.querySelector("[data-is-scrolling-zone]"),n=this.dialog.querySelector("[data-is-footer]");t(function(){try{i&&n&&(i.scrollHeight<i.scrollTop+i.clientHeight+20?n.classList.add("thread-scroll-end"):n.classList.remove("thread-scroll-end"))}catch(e){}e.updateScrollableToEndState.call(e)})}}},{key:"dismiss",value:function(){this.setOptions(),this.dialog.close()}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=Object.assign(this.getDefaultOptions(),this.options,e)}},{key:"setElementContent",value:function(e){this.dialog.innerHTML=e}},{key:"renderLayout",value:function(e){var t=this.options;switch(e){case"presentation":return'\n                    <div class="thread-suggestion-form">\n                        <div class="thread-form-content" data-is-scrolling-zone="true">\n                            <div class="thread-form-section">\n                                <h3 class="thread-form-title icon i-thread-title">'.concat(t.title,'</h3>\n                                <p class="subtitle-text">').concat(t.message,"</p>\n                            </div>\n                            ").concat(t.block?'<div class="confirmation-dialog-custom-block">'.concat(t.block,"</div>"):"",'\n                        </div>\n                        <div class="confirmation-dialog-footer" data-is-footer="true">\n                            <button type="button" class="btn-user-action cancel" data-is-confirmation-dialog-dismiss>').concat(t.no,'</button>\n                            <button type="button" class="btn-user-action" data-is-confirmation-dialog-confirm\n                             ').concat(t.sentinelTracking?'data-stnl="'+encodeURIComponent(JSON.stringify(t.sentinelTracking))+'"':"","\n                            >").concat(t.yes,"</button>\n                        </div>\n                    </div>\n                ");case"modal":return'\n                    <div class="modal-content">\n                        <div class="w-modal-title">\n                            <h3 class="modal-title">'.concat(t.title,'</h3>\n                        </div>\n                        <div class="modal-message">\n                            <p>').concat(t.message,'</p>\n                        </div>\n                        <div class="modal-actions">\n                            <button type="button" class="btn-user-action cancel" data-is-confirmation-dialog-dismiss>').concat(t.no,'</button>\n                            <button type="button" class="btn-user-action modal-confirm" data-is-confirmation-dialog-confirm\n                             ').concat(t.sentinelTracking?'data-stnl="'+encodeURIComponent(JSON.stringify(t.sentinelTracking))+'"':"","\n                            >").concat(t.yes,"</button>\n                        </div>\n                    </div>\n                ");default:return'\n                    <div class="thread-suggestion-form">\n                        <div class="thread-form-content">\n                            <div class="thread-form-section">\n                                <h3 class="thread-form-title icon i-thread-title">'.concat(t.title,'</h3>\n                                <p class="subtitle-text">').concat(t.message,"</p>\n                            </div>\n                            ").concat(t.block?'<div class="confirmation-dialog-custom-block">'.concat(t.block,"</div>"):"",'\n                        </div>\n                        <div class="confirmation-dialog-footer">\n                            <button type="button" class="btn-user-action cancel" data-is-confirmation-dialog-dismiss>').concat(t.no,'</button>\n                            <button type="button" class="btn-user-action" data-is-confirmation-dialog-confirm\n                            ').concat(t.sentinelTracking?'data-stnl="'+encodeURIComponent(JSON.stringify(t.sentinelTracking))+'"':"","\n                            >").concat(t.yes,"</button>\n                        </div>\n                    </div>\n                ")}}}],t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i}(),l=null;function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l||(l=new r),l.show(e)}var d=i(3768);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var m=function(){return e=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._declarePrivates(),this._input=t,this._options=i,this._includedOnly=this._options.includedOnly||!1,this._noClearButton=this._options.noClearButton||!1,this._alwaysTopInitialItem=this._options.alwaysTopInitialItem||null,this._setPermanentItems(this._options.permanentItems||[]),this._populateItems(this._options.items||[]),this._setInitialSelectedOption(this._options.selectedItem||null),this._hookCallbacks(),this._init()},t=[{key:"_declarePrivates",value:function(){this._id=(0,d.MZ)(),this._ITEM_HEIGHT=50,this._ITEMS_BEFORE_IDX=5,this._ITEMS_AFTER_IDX=10,this._includedOnly=!1,this._noClearButton=!1,this._listeners={},this._el=null,this._toggleButton=null,this._searchableInput=null,this._resultsContainer=null,this._clearValueButton=null,this._selectedItemLabel=null,this._initiallySelectedOption=null,this._alwaysTopInitialItem=null,this._drawer=null,this._input=null,this._options=null,this._permanentItems=[],this._items=[],this._selectedItem=null,this._opened=!1,this._debounceTimeout=null,this._filteredItemsStack=[],this._lastFilteredItemsCount=0,this._callbacks={onSelect:null,onClear:null,onSearch:null,onKeyPress:null,onInit:null}}},{key:"_setPermanentItems",value:function(e){e&&e.length>0&&(this._permanentItems=e)}},{key:"_hookCallbacks",value:function(){this._options.onSelect&&(this._callbacks.onSelect=this._options.onSelect),this._options.onClear&&(this._callbacks.onClear=this._options.onClear),this._options.onSearch&&(this._callbacks.onSearch=this._options.onSearch),this._options.onKeyPress&&(this._callbacks.onKeyPress=this._options.onKeyPress),this._options.onInit&&(this._callbacks.onInit=this._options.onInit)}},{key:"_setInitialSelectedOption",value:function(e){this._selectedItem=e,this._initiallySelectedOption=(0,d.TM)(e)}},{key:"_clearItems",value:function(){this._items=[]}},{key:"_populateItems",value:function(e){for(var t=this,i=0;i<e.length;i++)this._items.push(e[i]);this._items=this._items.sort(function(e,i){return t._alwaysTopInitialItem&&t._initiallySelectedOption&&i.id===t._initiallySelectedOption.id?1:e.name.localeCompare(i.name)})}},{key:"_fireCallback",value:function(e){var t=this._callbacks[e];if("function"==typeof t){for(var i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];t.apply(void 0,[this].concat(n))}}},{key:"_init",value:function(){var e=document.createElement("div");if(e.id="sd-".concat(this._id),e.setAttribute("data-id",this._id),this._options.class)if("string"==typeof this._options.class)e.classList.add(this._options.class);else if(Array.isArray(this._options.class))for(var t=0;t<this._options.class.length;t++)e.classList.add(this._options.class[t]);e.innerHTML='\n            <div class="thread-form-section has-inside-label">\n                <label class=inside-label for="thread-title">Topic</label>\n                <div class="w-searchable-input has-inside-label">\n                    <button class="searchable-input" data-is-selected-item-label="'.concat(this._id,'" data-is-toggle-button="').concat(this._id,'"><span class="icon i-search"></span></button>\n                    <button data-is-clear-button="').concat(this._id,'" class="searchable-btn-clear"><span class="icon i-close"></span></button>\n                    <span class="searchable-arrow icon i-chevron-down-solid"></span>\n                </div>\n            </div>\n            <div class="w-searchable-list" data-is-drawer="').concat(this._id,'">\n                <input data-searchable-input="').concat(this._id,'" type="text" class="searchable-list-area" placeholder="').concat(this._options.placeholder||"Search...",'">\n                <div class="searchable-results" data-results="').concat(this._id,'"></div>\n            </div>\n        '),this._el=e,this._input.parentElement.insertBefore(e,this._input),this._toggleButton=this._el.querySelector('[data-is-toggle-button="'.concat(this._id,'"]')),this._drawer=this._el.querySelector('[data-is-drawer="'.concat(this._id,'"]')),this._selectedItemLabel=this._el.querySelector('[data-is-selected-item-label="'.concat(this._id,'"]')),this._searchableInput=this._el.querySelector('[data-searchable-input="'.concat(this._id,'"]')),this._resultsContainer=this._el.querySelector('[data-results="'.concat(this._id,'"]')),this._clearValueButton=this._el.querySelector('[data-is-clear-button="'.concat(this._id,'"]')),this._clearValueButton.style.display=this._noClearButton?"none":"",this._attachListeners(),this._setOpen(!1),this._render(),this._fireCallback("onInit")}},{key:"_render",value:function(){console.time("REND"),this._performRender(),console.timeEnd("REND")}},{key:"_performRender",value:function(){var e=this,t=this._searchableInput.value.toLowerCase();if(this._filteredItemsStack=[],!this._opened)return this._el.classList.add("is-closed"),this._el.classList.remove("is-opened"),void this._drawer.classList.add("is-hidden");this._drawer.classList.remove("is-hidden"),this._el.classList.remove("is-closed"),this._el.classList.add("is-opened");var i=this._items.filter(function(i){if(!e._searchableInput.value)return!0;var n="".concat(i.name).toLowerCase().includes(t);return n||(n="".concat(i.id).toLowerCase().includes(t)||n),n});if(this._selectedItem&&(i.find(function(t){return t.id===e._selectedItem.id})||i.unshift(this._selectedItem)),i.length>0)for(var n=0;n<i.length;n++)this._filteredItemsStack.push(i[n]);else this._resultsContainer.scrollTop=0;this._visualUpdateList()}},{key:"_visualUpdateList",value:function(){if(this._resultsContainer.style.position="relative",this._resultsContainer.innerHTML='<div style="min-height: '.concat(this._filteredItemsStack.length*this._ITEM_HEIGHT,'px; width: 100%;z-index: -1; opacity: 0;visibility: hidden;"></div>'),this._filteredItemsStack.length!=this._lastFilteredItemsCount&&(this._lastFilteredItemsCount=this._filteredItemsStack.length,this._resultsContainer.scrollTop=0),this._filteredItemsStack.length>0)for(var e=this._resultsContainer.scrollTop,t=Math.floor(e/this._ITEM_HEIGHT),i=Math.max(0,t-this._ITEMS_BEFORE_IDX),n=Math.min(this._filteredItemsStack.length-1,t+this._ITEMS_AFTER_IDX),a=i;a<n;a++)this._resultsContainer.appendChild(this._renderItem(this._filteredItemsStack[a],a*this._ITEM_HEIGHT));else this._renderNoResults()}},{key:"_renderNoResults",value:function(){var e=this._resultsContainer;e.innerHTML="";var t=document.createElement("div");t.classList.add("searchable-dropdown__no-results"),t.innerHTML="No results",e.appendChild(t)}},{key:"_renderItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=!!this._selectedItem&&e.id===this._selectedItem.id,n=document.createElement("button");return n.setAttribute("style","height: 50px; position: absolute; left: 0; width: 100%; top: ".concat(t,"px")),n.setAttribute("data-value",e.id),n.innerHTML="<span>".concat(e.name,"</span>"),n.classList.add("searchable-item"),i&&n.classList.add("is-selected"),n}},{key:"_attachListeners",value:function(){this._listeners.searchableInputKeyUp=this._searchableInputKeyUp.bind(this),this._listeners.searchableInputFocus=this._searchableInputFocus.bind(this),this._listeners.searchableInputBlur=this._searchableInputBlur.bind(this),this._listeners.clearClick=this._clearClick.bind(this),this._listeners.itemClick=this._itemClick.bind(this),this._listeners.mainClick=this._mainClick.bind(this),this._listeners.toggleButtonClick=this._toggleButtonClick.bind(this),this._listeners.resultsContainerScroll=this._visualUpdateList.bind(this),document.body.addEventListener("click",this._searchableInputBlur.bind(this)),this._noClearButton||this._clearValueButton.addEventListener("click",this._listeners.clearClick),this._toggleButton.addEventListener("click",this._listeners.toggleButtonClick),this._searchableInput.addEventListener("keyup",this._listeners.searchableInputKeyUp),this._searchableInput.addEventListener("focus",this._listeners.searchableInputFocus),this._resultsContainer.addEventListener("click",this._listeners.itemClick),this._resultsContainer.addEventListener("scroll",this._listeners.resultsContainerScroll),this._el.addEventListener("click",this._listeners.mainClick)}},{key:"_detachListeners",value:function(){document.body.removeEventListener("click",this._listeners.searchableInputBlur),this._noClearButton||this._clearValueButton.removeEventListener("click",this._listeners.clearClick),this._searchableInput.removeEventListener("keyup",this._listeners.searchableInputKeyUp),this._searchableInput.removeEventListener("focus",this._listeners.searchableInputFocus),this._resultsContainer.removeEventListener("click",this._listeners.itemClick),this._resultsContainer.removeEventListener("scroll",this._listeners.resultsContainerScroll),this._toggleButton.removeEventListener("click",this._listeners.toggleButtonClick),this._el.removeEventListener("click",this._listeners.mainClick)}},{key:"_searchableInputKeyUp",value:function(e){var t=this;this._render(),window.clearTimeout(this._debounceTimeout),this._debounceTimeout=window.setTimeout(function(){t._fireCallback("onSearch",t._searchableInput.value)},this._options.debounceTime||100)}},{key:"_searchableInputFocus",value:function(){this._opened||(this._setSearchableInputValue(""),this._setOpen(!0),this._render(),this._fireCallback("onFocus"))}},{key:"_toggleButtonClick",value:function(e){this._opened?this._searchableInputBlur(e):this._searchableInputFocus(e)}},{key:"_setOpen",value:function(e){this._opened=e}},{key:"_setSelectedItem",value:function(e){e?(this._selectedItem=e,this._input.value=e.id,this._el.setAttribute("data-value",e.id),this._el.classList.add("is-populated"),this._el.classList.remove("is-not-populated"),this._clearValueButton.classList.remove("is-hidden")):(this._selectedItem=null,this._input.value="",this._el.removeAttribute("data-value"),this._el.classList.add("is-not-populated"),this._el.classList.remove("is-populated"),this._clearValueButton.classList.add("is-hidden"))}},{key:"_setSelectedItemLabel",value:function(e){this._selectedItemLabel.innerHTML=e||this._options.placeholder||""}},{key:"_setSearchableInputValue",value:function(e){this._searchableInput.value=e}},{key:"_searchableInputBlur",value:function(){this._opened&&(this._setOpen(!1),this._setSelectedItemLabel(this._selectedItem?this._selectedItem.name:""),this._setSearchableInputValue(this._selectedItem?this._selectedItem.name:""),this._render(),this._fireCallback("onBlur"))}},{key:"_itemClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=e.target.closest("[data-value]");if(t){var i=t.getAttribute("data-value"),n=null;n=this._selectedItem&&i==this._selectedItem.id?this._selectedItem:this._items.find(function(e){return e.id==i}),this._setSelectedItem(n),this._setSelectedItemLabel(n.name),this._setSearchableInputValue(n.name),this._setOpen(!1),this._render(),this._fireCallback("onSelect",n)}}},{key:"_clearClick",value:function(){this._setSelectedItem(null),this._setSelectedItemLabel(""),this._setSearchableInputValue(""),this._setOpen(!1),this._render(),this._fireCallback("onClear")}},{key:"_mainClick",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"destroy",value:function(){this._detachListeners(),document.getElementById("sd-".concat(this._id)).remove()}},{key:"selectedItem",get:function(){return this._selectedItem},set:function(e){var t=this._items.find(function(t){return t.id==e.id});t?e=t:this._includedOnly&&(e=(0,d.TM)(this._initiallySelectedOption)),this._setSelectedItem(e),this._setSelectedItemLabel(e?e.name:""),this._setSearchableInputValue(e?e.name:""),this._render(),this._fireCallback("onSelect",e)}},{key:"items",get:function(){return this._items},set:function(e){this._clearItems(),this._populateItems(this._permanentItems),this._populateItems(e),this._render()}},{key:"elementIsChild",value:function(e){return this._el.contains(e)}}],t&&h(e.prototype,t),i&&h(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}var b=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._store={},this._loadings={},this._loaders={}},t=[{key:"registerFetchLoader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._loaders[e]=t}},{key:"get",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){};void 0===this._store[e]?this._loaders[e]?(this._loadings[e]=this._loadings[e]||[],0==this._loadings[e].length&&this._loaders[e]().then(function(e){return e.json()}).then(function(i){t._store[e]=i,t._loadings[e].map(function(e){return e(t.clone(i),null)})}).catch(function(i){t._loadings[e].map(function(e){return e(null,i)})}).finally(function(){t._loadings[e]=[]}),this._loadings[e].push(i)):i(null,new Error('Data loader for "'.concat(e,'" is missing'))):i(this.clone(this._store[e]))}},{key:"clone",value:function(e){var t=null;try{t=structuredClone(e)}catch(i){t=JSON.parse(JSON.stringify(e))}return t}}],t&&f(e.prototype,t),i&&f(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i}(),y=i(925);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?w(Object(i),!0).forEach(function(t){k(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function k(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function L(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"thread",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(a=S(S({},{mode:"popup",idParent:null,className:"popup",triggeredFrom:"thread",gaEventCategory:"thread",showCloseButton:!0}),a),!e){if(window.dispatchEvent(new CustomEvent("valnet_ui_event:user_not_logged_in")),t){if(!window.ValnetLogin)return console.error("ValnetLogin is not defined."),!1;var r=new ValnetLogin(a);r.showLoginForm(r),n&&(location.hash=i)}return"function"==typeof s&&s(),!1}if(!e.isVerified){if(window.dispatchEvent(new CustomEvent("valnet_ui_event:user_not_verified")),t)(new y.A).showAccountVerificationPopup();return"function"==typeof o&&o(),!1}return!0}!function(){var e=!1,t="Title and Content are required",i="Title and Content are required",a="Title must be less than 125 characters",s="Link must be less than 2000 characters",o="File size exceeds the limit of 25MB",r="File size exceeds the limit of 10MB",l="Link is not valid",u="Unsupported file type",h="Display name is required",p="Display name is not valid",v=new b;function f(){if(!document.querySelector("[data-is-thread-suggestion-dialog]")){var e,n,v,f=(e=window.valnetThreadSuggestionTemplates,n=document.createElement("dialog"),v=(0,d.MZ)(),n.setAttribute("data-is-thread-suggestion-dialog",!0),n.setAttribute("data-dialog-name",v),n.setAttribute("data-style-path-url",e.styleUrl),n.classList.add("w-thread-suggestion-form"),n.innerHTML='\n    <div class="is-hidden">\n        <span data-template-is-brand-name="true">'.concat(e.brandName,'</span>\n        <i data-template-is-no-image-placeholder="').concat(e.noImagePlaceholder,'"></i>\n        <div class="is-hidden" data-template-is-welcome-message="true">\n            <p class="subtitle-text">Submit a Thread of your own on <span class="highlight">').concat(e.brandName,'</span> under <span class="thread-form-topic-inline">{{listingPage}}</span>.\n            <br/>We look forward to hearing from you!</p>\n            <p class="subtitle-text" style="margin-top: 1rem;">Please provide a title and content with your submission. A link and image are optional.</p>\n        </div>\n    </div>\n    <div class="is-hidden" data-is-user-tag-template="true">\n        ').concat(e.userCard,'\n    </div>\n\n    <form class="thread-suggestion-form" action="">\n        <div class="thread-form-content" data-is-scrolling-zone="true">\n            <button id="close-thread-form" class="btn-close" data-is-cancel="true"><span class="icon i-close"></span></button>\n            <div class="thread-form-section">\n                <h3 class="thread-form-title icon i-thread-title">Submit a Thread</h3>\n                <div class="w-subtitle-text" data-is-welcome-message="true"></div>\n            </div>\n\n            <input hidden type="hidden" name="listing" data-is-listing-name="true" />\n            ').concat("false"===e.loggedInUserHasDisplayName?'\n             \x3c!-- Display Name Field --\x3e\n            <div id="new-user-display-name-field" class="thread-form-section has-inside-label" style="gap: 0;">\n                <label class="inside-label" for="logged-in-user-display-name">Select Display Name</label>\n                <input tabindex="3"\n                type="text" id="logged-in-user-display-name" name="displayName"\n                class="has-inside-label" style="border-bottom-left-radius: 0; border-bottom-right-radius: 0;"\n                maxlength="125"\n                placeholder="'.concat(e.defaultDisplayName,'"\n                data-logged-in-user-display-name="true"\n                required>\n                <div class="w-tooltip">\n                    <p class="text-input-note">Between 2-25 alphanumeric characters, underscores, and hyphens.</p>\n                    <div class="tooltip-content">\n                        <div id="tooltip-btn" class="tooltip-btn icon i-tooltip missing-display-name-tooltip-btn" onclick="window.toggleMissingDisplayNameTooltip(this)"></div>\n                        <div class="tooltip-box tooltip-bottom center">\n                            <ul class="tooltip-content-list">\n                                <li>Must be between 2 and 25 characters.</li>\n                                <li>Can only contain alphanumeric characters, underscores, and hyphens.</li>\n                                <li>Underscores and hyphens cannot be used at the start or end.</li>\n                                <li>Underscores and hyphens cannot be used multiple times in row. </li>\n                                <li>Inappropriate language is not permitted.</li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            '):"",'\n\n\n            \x3c!-- Title Field --\x3e\n            <div class="thread-form-section has-inside-label">\n                <label class="inside-label" for="thread-title">Title</label>\n                <input tabindex="3" type="text" id="thread-title" class="has-inside-label" name="title" maxlength="125" required>\n            </div>\n\n            \x3c!-- Content Editor --\x3e\n            <div class="thread-form-section has-inside-label">\n                <label for="content" style="margin: 0;">Content</label>\n                <textarea id="editThreadTextTextarea-').concat(v,'" maxlength="2000" class="is-hidden" placeholder="" rows="6" name="content" required></textarea>\n                <div id="editThreadToolbar-').concat(v,'" style="user-select: none;">\n                    <button tabindex="3" class="ql-bold"></button>\n                    <button tabindex="3" class="ql-italic"></button>\n                    <button tabindex="3" class="ql-underline"></button>\n                    <button tabindex="3" class="ql-strike"></button>\n                    <button tabindex="3" class="ql-emoji"></button>\n                </div>\n                <div data-is-content-editor-container="true" id="editThreadTextEditor-').concat(v,'"></div>\n                <p class="supporting-text">It is not permitted for content to contain links, inappropriate language, or spam.</p>\n            </div>\n\n            \x3c!-- Optional Link Field --\x3e\n            <div class="thread-form-section has-inside-label">\n                <label class="inside-label" for="thread-link">Link (Optional)</label>\n                <input  tabindex="3" type="url" id="thread-link" class="has-inside-label" name="link">\n            </div>\n\n            \x3c!-- Image Field --\x3e\n            <div class="thread-form-section file-upload">\n                <label style="margin-bottom: 0;">Image (Optional)</label>\n                <div class="w-img-preview">\n                    <input  tabindex="3" type="file" id="thread-image" name="image" accept=".jpg,.jpeg,.png,.x-png,.gif,.webp" hidden>\n                    <div class="w-upload-img-btn above-image">\n                        <label for="thread-image" class="btn-upload icon i-upload-image">Upload Image</label>\n                        <button type="button" data-is-clear-image="true" class="user-form-btn-reset icon i-close is-hidden"><span class="mobile-hidden">Remove Image</span></button>\n                    </div>\n                    <div class="img-preview">\n                        <img data-img-preview="true" class="is-hidden">\n                    </div>\n                </div>\n            </div>\n            <p class="f-errors" data-is-feedback-message="true"></p>\n        </div>\n\n        \x3c!-- Buttons --\x3e\n        <div class="confirmation-dialog-footer" data-is-footer="true">\n            <button class="btn-user-action cancel" tabindex="1" type="button" data-is-cancel="true">Cancel</button>\n            <button class="btn-user-action" tabindex="0" type="submit" data-is-submit="true">Submit</button>\n        </div>\n    </form>\n    '),document.body.appendChild(n),n);if(f){var g=f.getAttribute("data-style-path-url");(0,d.tW)(g,function(){!function(e){if(e.isAttached)return;e.isAttached=!0,e.templateData={},e.transientData={};try{e.templateData.brandName=e.querySelector("[data-template-is-brand-name]").innerHTML,e.templateData.noImagePlaceholder=e.querySelector("[data-template-is-no-image-placeholder]").getAttribute("data-template-is-no-image-placeholder"),e.templateData.welcomeMessage=e.querySelector("[data-template-is-welcome-message]").innerHTML}catch(e){console.error(e)}e.interactivityToggle=function(t){for(var i=e.querySelectorAll("input, textarea, select, button"),n=0;n<i.length;n++)t?"true"===i[n].getAttribute("data-is-interactivity-disabled")&&i[n].removeAttribute("disabled"):i[n].hasAttribute("disabled")||(i[n].setAttribute("data-is-interactivity-disabled","true"),i[n].setAttribute("disabled","true")),i[n].blur();t&&e.querySelector("[data-is-submit]").focus()},e.showThreadSuggestionModal=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.wu)(),e.initTransientData(),e.hideFeedback(),e.interactivityToggle(!1),e.showModal(),setTimeout(function(){e.interactivityToggle(!0),e.setListing(t.listing)},0)};var n=e.querySelector("form");if(n){var v=n.querySelectorAll("[data-is-cancel]"),f=n.querySelector("[data-is-submit]"),g=e.querySelector("[data-img-preview]"),b=e.querySelector("[data-is-clear-image]"),y=e.getAttribute("data-dialog-name"),_=e.querySelector("[data-is-feedback-message]"),w=e.querySelector("[data-is-scrolling-zone]"),S=e.querySelector("[data-is-footer]");e.fireReady=function(){e.firedReady||(e.firedReady=!0,setTimeout(function(){console.log("%cEvent dispatched : valnet_ui_event:thread_suggestion_dialog_injected","color: white; background-color: green; padding: 2px 5px; border-radius: 3px;"),window.dispatchEvent(new Event("valnet_ui_event:thread_suggestion_dialog_injected"))},0))},e.initTransientData=function(){e.transientData={}},e.setListing=function(t){if(t){var i=n.querySelector('[name="listing"]'),a=e.querySelector("[data-is-listing-name]"),s=e.querySelector("[data-is-welcome-message]"),o=new URLSearchParams(t),r=o.get("name"),l=(0,d.F$)(o.get("permalink"));i.value=l,a.innerText=r,s.innerHTML=(0,d.M0)(e.templateData.welcomeMessage,{listingPage:r}),e.transientData.listing=t,e.transientData.listingName=r,e.transientData.listingPermalink=l,e.searchableDropdown.selectedItem={id:l,name:r}}},e.toggleFormButtons=function(e){for(var t=0;t<v.length;t++)v[t].disabled=!e;f.disabled=!e},e.updateScrollableToEndState=function(){(window.requestAnimationFrame||function(e){return setTimeout(e,16)})(function(){try{w.scrollHeight<w.scrollTop+w.clientHeight+20?S.classList.add("thread-scroll-end"):S.classList.remove("thread-scroll-end"),e.updateScrollableToEndState()}catch(e){console.error(e)}})},e.updateScrollableToEndState(),e.quillAttachingScript=setInterval(function(){if(!e.quillEditor)try{e.quillEditor=(t="editThreadTextEditor-".concat(y),i="editThreadToolbar-".concat(y),e.querySelector('textarea[name="content"]'),a=n,new Quill("#"+t,{modules:{magicUrl:!0,toolbar:{container:"#"+i,handlers:{emoji:function(){},image:function(){a.querySelector('input[type="file"][name="image"]').click()}}},"emoji-toolbar":!0,"emoji-textarea":!1,"emoji-shortname":!0},placeholder:"Share your thoughts",theme:"snow"})),console.log("%cEvent dispatched : valnet_ui_event:quill_attached","color: white; background-color: green; padding: 4px;"),window.dispatchEvent(new Event("valnet_ui_event:quill_attached")),clearInterval(e.quillAttachingScript)}catch(e){console.error("Quill error: ".concat(e))}var t,i,a},1),e.populateContentField=function(){n.querySelector('[name="content"]').value=function(e){var t=document.createElement("div");t.innerHTML=e;for(var i=t.querySelectorAll("p"),n=[],a=0,s=!0,o=0;o<i.length;o++){var r=i[o];1==r.children.length&&"BR"==r.children[0].tagName?a++:(s=!1,a=0),(a>1||s)&&n.push(r)}for(var l=0;l<n.length;l++)n[l].remove();return t.innerHTML}(function(e){var t=document.createElement("div"),i=e;t.innerHTML=i,t.setAttribute("hidden",!0),document.body.appendChild(t);for(var n=t.querySelectorAll("span.ql-emojiblot"),a=0;a<n.length;a++){var s=n[a].outerHTML,o=n[a].innerText;i=i.replace(s,o)}return t.remove(),i}(e.quillEditor.root.innerHTML))},e.showFeedback=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t&&0===t.length)e.hideFeedback();else{for(var i=[],n=0;n<t.length;n++)-1===i.indexOf(t[n])&&i.push(t[n]);for(var a="",s=0;s<i.length;s++)s<i.length-2?a+=i[s]+", ":s===i.length-2?a+=i[s]+" and ":a+=i[s];_.innerHTML="".concat(a.charAt(0).toUpperCase()+a.slice(1),"."),_.classList.remove("is-hidden")}},e.resetForm=function(){e.quillEditor.setContents([]),e.quillEditor.setText(""),e.hideFeedback(),n.reset();var t=e.querySelector("[data-img-preview]");t&&(t.src="",t.removeAttribute("src"),t.classList.add("is-hidden")),b&&b.classList.add("is-hidden")},e.hideFeedback=function(){_.innerHTML="",_.classList.add("is-hidden"),n.querySelectorAll(".error").forEach(function(e){e.classList.remove("error")})},e.searchableDropdown=new m(e.querySelector('input[name="listing"]'),{placeholder:"Search a topic...",debounceTime:100,includedOnly:!0,noClearButton:!0,alwaysTopInitialItem:!0,selectedItem:{id:"",name:"General"},permanentItems:[{id:"",name:"General"}],items:[],class:"searchable-dropdown",onInit:function(e,t){},onSelect:function(t,i){e.querySelector("[data-is-welcome-message]").innerHTML=(0,d.M0)(e.templateData.welcomeMessage,{listingPage:i?i.name:"Select Topic"}),e.transientData.listingName=i?i.name:"Select Topic",e.transientData.listingPermalink=i?i.id:""}});var k=function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){var t=!1;e.populateContentField();for(var i=n.querySelectorAll("input, textarea, select"),a=0;a<i.length;a++){var s=i[a];if(s.value&&(!e.searchableDropdown.elementIsChild(s)&&"listing"!=s.getAttribute("name"))){t=!0;break}}if(t)return void c({title:"Discard Submission",message:"Are you sure you want to cancel? Your Thread will not be submitted.",no:"Keep Editing",yes:"Discard Submission",layout:"modal",onConfirm:function(){(0,d.hG)(),e.close(),e.resetForm();var t=new CustomEvent("valnet_ui_event:thread_suggestion_dialog_closed");window.dispatchEvent(t)}})}var o=e.querySelector("[data-img-preview]");o&&(o.src="",o.removeAttribute("src"),o.classList.add("is-hidden")),(0,d.hG)(),e.close(),e.resetForm();var r=new CustomEvent("valnet_ui_event:thread_suggestion_dialog_closed");window.dispatchEvent(r)},L=e.querySelector('input[type="file"]');L.addEventListener("change",function(t){var i=t.target.files[0];(e.hideFeedback(),i)&&(["image/png","image/x-png","image/jpg","image/jpeg","image/gif","image/webp"].includes(i.type)||(t.target.value="",e.showFeedback([u])),["image/gif","image/webp"].includes(i.type)&&i.size/1048576>10&&(t.target.value="",e.showFeedback([r])),i.size/1048576>25&&(t.target.value="",e.showFeedback([o])));t.target.files&&t.target.files[0]?(g.src=URL.createObjectURL(t.target.files[0]),g.classList.remove("is-hidden"),b.classList.remove("is-hidden")):(g.src="",g.removeAttribute("src"),g.classList.add("is-hidden"),b.classList.add("is-hidden"))}),L.addEventListener("cancel",function(e){e.preventDefault(),e.stopPropagation()}),e.addEventListener("cancel",function(e){k()});for(var I=0;I<v.length;I++){v[I].addEventListener("click",function(e){e.preventDefault(),k()})}b.addEventListener("click",function(e){e.preventDefault();var t=n.querySelector('input[type="file"]');t.value=null,t.dispatchEvent(new Event("change",{bubbles:!0}))}),f.addEventListener("click",function(r){r.preventDefault(),e.populateContentField(),e.hideFeedback();var d=new FormData(n),u=[],m=d.get("title"),v=d.get("content");m||(n.querySelector('[name="title"]').classList.add("error"),u.push(i)),m.length>125&&(n.querySelector('[name="title"]').classList.add("error"),u.push(a)),v||(n.querySelector('[data-is-content-editor-container="true"]').classList.add("error"),u.push(t));var f=null,g=d.get("image");if(g&&g.size>0&&(f=URL.createObjectURL(g)),g&&g.size/1048576>25){var b=n.querySelector('input[type="file"]');b.classList.add("error"),b.value="",u.push(o)}var y=d.get("link"),_="",w=e.querySelector("[data-logged-in-user-display-name]");if(w&&(w.value?window.isLoggedInDisplayNameToFillValid(w.value)||(w.classList.add("error"),u.push(p)):(w.classList.add("error"),u.push(h))),y){y.length>2e3&&(n.querySelector('[name="link"]').classList.add("error"),u.push(s));try{new URL(y)}catch(e){n.querySelector('[name="link"]').classList.add("error"),u.push(l)}}if(u&&u.length>0)e.showFeedback(u);else{var S=e.querySelector("[data-is-user-tag-template]");if(S){if(w){var L=S.querySelector(".threads-text.user");L||(L=document.createElement("div")).classList.add("threads-text","user"),L.textContent=w.value,S.appendChild(L)}_=S.innerHTML}var I=d.get("content");y&&(I='\n                    <div class="thread-prompt-link">\n                        <a class="prompt-link-img icon i-link-url" href="'.concat(y,'" target="_blank" rel="noreferrer" data-bypass-prevent-default>\n                            <picture>\n                                <img class="" alt="Link Image" src="').concat(e.templateData.noImagePlaceholder,'">\n                            </picture>\n                            <div class="img-caption">Generated on Publish</div>\n                        </a>\n                        <div class="w-prompt-link">\n                            <div class="prompt-link-favicon">\n                            </div>\n                            <div class="prompt-link-url">\n                                <a href="').concat(y,'" target="_blank" rel="noreferrer" data-bypass-prevent-default>').concat(y,"</a>\n                            </div>\n                        </div>\n                    </div>\n                    ").concat(d.get("content"),"\n                    "));var E='\n                    <div class="threads-prompt main">\n                        <h1 class="threads-prompt-title">'.concat(d.get("title"),'</h1>\n                        <div class="w-threads-author">').concat(_,'</div>\n                        <div class="w-thread-prompt-content">\n                            <div class="threads-prompt-response">').concat(I,'</div>\n                            <img class="thread-prompt-img featured-img-thread ').concat(f?"":"is-hidden",'" src="').concat(f,'">\n                        </div>\n                    </div>\n                ');c({title:"Confirm Submission",message:'Are you ready to submit your Thread under <span class="thread-form-topic-inline">'.concat(e.transientData.listingName,'</span>? It will be reviewed by the <span class="highlight">').concat(e.templateData.brandName,"</span> team in short order and you will receive feedback."),yes:"Confirm Submission",no:"Keep Editing",block:E,layout:"presentation",sentinelTracking:{category:"Click Interactions",name:"Thread",action:"Submit Thread Form Submit"},onConfirm:function(){e.toggleFormButtons(!1),fetch("/thread-suggestion/save/",{method:"POST",body:d}).then(function(t){if(!t.ok)throw new Error(t.statusText);t.json().then(function(t){if(!t.success)throw new Error(t.message);!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({title:"Success",message:"Success",timeout:3e3},e),i=document.querySelector("[data-is-success-dialog]");i||((i=document.createElement("dialog")).classList.add("is-success-dialog","user-dialog-container"),i.setAttribute("data-is-success-dialog",""),document.body.appendChild(i),i.addEventListener("click",function(e){e.target===i&&i.close()})),i.innerHTML='\n        <div class="w-user-msg user-alert alert-success">\n            <div class="icon"></div>\n            <h3 class="alert-title">'.concat(t.title,'</h3>\n            <p class="user-msg">').concat(t.message,"</p>\n        </div>\n    "),i.showModal(),setTimeout(function(){i.close()},t.timeout)}({title:"Success",message:"Your Thread has been successfully submitted. It will be reviewed by a member of our team prior to publication. Thanks for sharing your thoughts!",timeout:5e3}),e.toggleFormButtons(!0),k(!0)}).catch(function(t){var i=t.message;"."===i.charAt(i.length-1)&&(i=i.slice(0,-1)),e.showFeedback([i]),e.toggleFormButtons(!0)})}).catch(function(t){var i=t.message;"."===i.charAt(i.length-1)&&(i=i.slice(0,-1)),e.showFeedback([i]),e.toggleFormButtons(!0)})}})}})}e.fireReady()}(f)})}}}function g(){var e=document.querySelectorAll("[data-is-thread-suggestion-show-button]");e&&e.length>0&&e.forEach(function(e){!function(e){if(e.isAttached)return;e.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),L(window.websiteUser,!0,"thread",!0,{})&&(_(e.getAttribute("data-listing")),y(e.getAttribute("data-listing")),e.classList.add("is-active"))}),e.isAttached=!0}(e)}),window.addEventListener("valnet_ui_event:thread_suggestion_dialog_closed",function(){!function(e){e&&e.length>0&&e.forEach(function(e){e.classList.remove("is-active")})}(e)})}function y(){w({listing:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"name=General&permalink=")||"name=General&permalink="})}function _(){var t=function t(){var i=function(){window.removeEventListener("valnet_ui_event:thread_suggestion_dialog_injected",i)};window.addEventListener("valnet_ui_event:thread_suggestion_dialog_injected",i),window.removeEventListener("valnet_ui_event:quill_injected",t),e||(e=!0,f())};window.addEventListener("valnet_ui_event:quill_injected",t),function(){var e=!1;console.log("--- triggered injectQuill ---");try{window.Quill&&(e=!0)}catch(e){console.log("quill not found, loading...")}if(e)return console.log("%cEvent dispatched : valnet_ui_event:quill_injected","color: white; background-color: green; padding: 4px;"),void window.dispatchEvent(new Event("valnet_ui_event:quill_injected"));if(!window.valnet_is_quill_injection_started){window.valnet_is_quill_injection_started=!0;var t=null,i=null,a=null,s=function(){this.isLoaded=!0,t&&t.isLoaded&&i&&i.isLoaded&&a&&a.isLoaded&&setTimeout(function(){console.log("%cEvent dispatched : valnet_ui_event:quill_injected","color: white; background-color: green; padding: 4px;"),window.dispatchEvent(new Event("valnet_ui_event:quill_injected"))})};window.quillScriptLocation&&(t=n(window.quillScriptLocation,function(){this.isLoaded=!0;var e=setInterval(function(){var t=!1;try{window.Quill&&(t=!0)}catch(e){console.log("quill not found, loading...")}t&&(clearInterval(e),window.quillEmojiScriptLocation&&(i=n(window.quillEmojiScriptLocation,s,{defer:!0})),window.quillMentionScriptLocation&&(a=n(window.quillMentionScriptLocation,s,{defer:!0})),window.quillMagicUrlScriptLocation&&(a=n(window.quillMagicUrlScriptLocation,s,{defer:!0})))},1)},{defer:!0}))}}()}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v.get("listingPages",function(t,i){var n=document.querySelector("[data-is-thread-suggestion-dialog]");if(n)n.showThreadSuggestionModal&&(t&&t.list&&(n.searchableDropdown.items=t.list),n.showThreadSuggestionModal(e));else{var a=function(){w(e),window.removeEventListener("valnet_ui_event:thread_suggestion_dialog_injected",a)};window.addEventListener("valnet_ui_event:thread_suggestion_dialog_injected",a)}})}function S(){document.querySelectorAll("[data-is-thread-suggestion-login-button]").forEach(function(e){!function(e){if(e.isAttached)return;e.addEventListener("click",function(t){var i=new window.ValnetLogin({mode:"popup",idParent:null,className:"popup",triggeredFrom:"thread",gaEventCategory:"thread",showCloseButton:!0,onClosePopupCallback:function(){return sessionStorage.removeItem("showThreadSuggestion")}});i.showLoginForm(i),sessionStorage.setItem("showThreadSuggestion",JSON.stringify({show:!0,listing:e.getAttribute("data-listing")}))}),e.isAttached=!0}(e)})}v.registerFetchLoader("listingPages",function(){return fetch("/thread-suggestion/get-listing-pages/",{method:"GET"})}),window.threadSuggestionAttachShowThreadSuggestionDialogButtons=g,window.threadSuggestionAttachLoginButtons=S;var k=!1;function I(){if(!k){k=!0;var e=sessionStorage.getItem("showThreadSuggestion");if(e)if(sessionStorage.removeItem("showThreadSuggestion"),window&&window.websiteUser)if(L(window.websiteUser,!1,"thread",!0,{})){var t=JSON.parse(e);t.show&&(_(t.listing),y(t.listing))}}}window.isLoggedInDisplayNameToFillValid=function(e){return!!/^[a-zA-Z0-9]([a-zA-Z0-9_-]{0,22}[a-zA-Z0-9])?$/.test(e)},window.addEventListener("valnet_ui_event:quill_injected",function(){e||(e=!0,f(),g())}),window.addEventListener("valnet_ui_event:post_load_init",function(){S(),g(),I()}),S(),g(),I()}()})();